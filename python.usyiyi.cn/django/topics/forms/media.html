<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Form Assets (the Media class) — Django 1.8.2 中文文档</title>
<link href="../../_static/default.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.8.2.dev20150513143415',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="../../_static/jquery.js" type="text/javascript"></script>
<script src="../../_static/underscore.js" type="text/javascript"></script>
<script src="../../_static/doctools.js" type="text/javascript"></script>
<link href="../../index.html" rel="top" title="Django 1.8.2.dev20150513143415 documentation"/>
<link href="index.html" rel="up" title="Working with forms"/>
<link href="../templates.html" rel="next" title="Templates"/>
<link href="modelforms.html" rel="prev" title="Creating forms from models"/>
<script src="http://python.usyiyi.cn/django/templatebuiltins.js" type="text/javascript"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/topics/forms/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/topics/forms/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>
</head>
<body>
<div class="document">
<div class="yui-t6" id="custom-doc">
<div id="hd">
<h1><font id="80">Django 1.8.2 文档</font></h1>
<div id="global-nav">
<a href="../../index.html" title="Home page">Home</a>  |
        <a href="../../contents.html" title="Table of contents">Table of contents</a>  |
        <a href="../../genindex.html" title="Global index">Index</a>  |
        <a href="../../py-modindex.html" title="Module index">Modules</a>
</div>
<div class="nav">
    « <a href="modelforms.html" title="Creating forms from models">previous</a>
     |
    <a accesskey="U" href="../index.html" title="Using Django">up</a>
   |
    <a href="../templates.html" title="Templates">next</a> »</div>
</div>
<div id="bd">
<div id="yui-main">
<div class="yui-b">
<div class="yui-g" id="topics-forms-media">
<div class="section" id="s-form-assets-the-media-class">
<span id="form-assets-the-media-class"></span><h1><font id="81">表单素材 ( <tt class="docutils literal"><span class="pre">Media</span></tt> 类)</font><a class="headerlink" href="media.html#form-assets-the-media-class" title="Permalink to this headline">¶</a></h1>
<p><font id="1">渲染有吸引力的、易于使用的web表单不仅仅需要HTML -- 同时也需要CSS样式表，并且，如果你打算使用奇妙的web2.0组件，你也需要在每个页面包含一些JavaScript。</font><font id="2">任何提供的页面都需要CSS和JavaScript的精确配合，它依赖于页面上所使用的组件。</font></p>
<p><font id="3">这就是素材定义所导入的位置。</font><font id="4">Django允许你将一些不同的文件 -- 像样式表和脚本 -- 与需要这些素材的表单和组件相关联。</font><font id="5">例如，如果你想要使用日历来渲染DateField，你可以定义一个自定义的日历组件。</font><font id="6">这个组件可以与渲染日历所需的CSS和JavaScript关联。</font><font id="7">当日历组件用在表单上的时候，Django可以识别出所需的CSS和JavaScript文件，并且提供一个文件名的列表，以便在你的web页面上简单地包含这些文件。</font></p>
<div class="admonition-assets-and-django-admin admonition">
<p class="first admonition-title"><font id="8">素材和Django&nbsp;Admin</font></p>
<p><font id="9">Django的Admin应用为日历、过滤选择等一些东西定义了一些自定义的组件。</font><font id="10">这些组件定义了素材的需求，DJango Admin使用这些自定义组件来代替Django默认的组件。</font><font id="11">Admin模板只包含在提供页面上渲染组件所需的那些文件。</font></p>
<p class="last"><font id="12">如果你喜欢Django Admin应用所使用的那些组件，可以在你的应用中随意使用它们。</font><font id="13">它们位于<tt class="docutils literal"><span class="pre">django.contrib.admin.widgets</span></tt>。</font></p>
</div>
<div class="admonition-which-javascript-toolkit admonition">
<p class="first admonition-title"><font id="14">选择哪个JavaScript工具包？</font></p>
<p class="last"><font id="15">现在有许多JavaScript工具包，它们中许多都包含组件（比如日历组件），可以用于提升你的应用。</font><font id="16">Django 有意避免去称赞任何一个JavaScript工具包。</font><font id="17">每个工具包都有自己的有点和缺点 -- 要使用适合你需求的任何一个。</font><font id="18">Django 有能力集成任何JavaScript工具包。</font></p>
</div>
<div class="section" id="s-assets-as-a-static-definition">
<span id="s-id1"></span><span id="assets-as-a-static-definition"></span><span id="id1"></span><h2><font id="82">作为静态定义的素材</font><a class="headerlink" href="media.html#assets-as-a-static-definition" title="Permalink to this headline">¶</a></h2>
<p><font id="19">定义素材的最简单方式是作为静态定义。</font><font id="20">如果使用这种方式，定义在<tt class="docutils literal"><span class="pre">Media</span></tt>内部类中出现，</font><font id="21">内部类的属性定义了需求。</font></p>
<p><font id="22">这是一个简单的例子：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">'all'</span><span class="p">:</span> <span class="p">(</span><span class="s">'pretty.css'</span><span class="p">,)</span>
        <span class="p">}</span>
        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span><span class="s">'animations.js'</span><span class="p">,</span> <span class="s">'actions.js'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="23">上面的代码定义了&nbsp;<tt class="docutils literal"><span class="pre">CalendarWidget</span></tt>，它继承于<tt class="docutils literal"><span class="pre">TextInput</span></tt>。</font><font id="24">每次CalendarWidget在表单上使用时，表单都会包含CSS文件<tt class="docutils literal"><span class="pre">pretty.css</span></tt>，以及JavaScript文件<tt class="docutils literal"><span class="pre">animations.js</span></tt> 和 <tt class="docutils literal"><span class="pre">actions.js</span></tt>。</font></p>
<p><font id="25">静态定义在运行时被转换为名为<tt class="docutils literal"><span class="pre">media</span></tt>的组件属性。</font><font id="26"><tt class="docutils literal"><span class="pre">CalendarWidget</span></tt>实例的素材列表可以通过这种方式获取：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p><font id="27">下面是所有可能的<tt class="docutils literal"><span class="pre">Media</span></tt>选项的列表。</font><font id="28">它们之中没有必需选项。</font></p>
<div class="section" id="s-css">
<span id="css"></span><h3><font id="87">css</font><a class="headerlink" href="media.html#css" title="Permalink to this headline">¶</a></h3>
<p><font id="29">各种表单和输出媒体所需的，描述CSS的字典。</font></p>
<p><font id="30">字典中的值应该为文件名称的列表或者元组。</font><font id="31">对于如何指定这些文件的路径，详见<a class="reference internal" href="media.html#form-asset-paths"><em>路径的章节</em></a>。</font></p>
<p><font id="32">字典中的键位输出媒体的类型。</font><font id="33">它们和媒体声明中CSS文件接受的类型相同：&nbsp;‘all’, ‘aural’, ‘braille’, ‘embossed’, ‘handheld’, ‘print’, ‘projection’, ‘screen’, ‘tty’ 和‘tv’。</font><font id="34">如果你需要为不同的媒体类型使用不同的样式表，要为每个输出媒体提供一个CSS文件的列表。</font><font id="35">下面的例子提供了两个CSS选项 -- 一个用于屏幕，另一个用于打印：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
    <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'screen'</span><span class="p">:</span> <span class="p">(</span><span class="s">'pretty.css'</span><span class="p">,),</span>
        <span class="s">'print'</span><span class="p">:</span> <span class="p">(</span><span class="s">'newspaper.css'</span><span class="p">,)</span>
    <span class="p">}</span>
</pre></div>
</div>
<p><font id="36">如果一组CSS文件适用于多种输出媒体的类型，字典的键可以为输出媒体类型的逗号分隔的列表。</font><font id="37">在下面的例子中，TV和投影仪具有相同的媒体需求：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
    <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'screen'</span><span class="p">:</span> <span class="p">(</span><span class="s">'pretty.css'</span><span class="p">,),</span>
        <span class="s">'tv,projector'</span><span class="p">:</span> <span class="p">(</span><span class="s">'lo_res.css'</span><span class="p">,),</span>
        <span class="s">'print'</span><span class="p">:</span> <span class="p">(</span><span class="s">'newspaper.css'</span><span class="p">,)</span>
    <span class="p">}</span>
</pre></div>
</div>
<p><font id="38">如果最后的CSS定义即将被渲染，会变成下面的HTML：</font></p>
<div class="highlight-python"><div class="highlight"><pre>&lt;link href="http://static.example.com/pretty.css" type="text/css" media="screen" rel="stylesheet" /&gt;
&lt;link href="http://static.example.com/lo_res.css" type="text/css" media="tv,projector" rel="stylesheet" /&gt;
&lt;link href="http://static.example.com/newspaper.css" type="text/css" media="print" rel="stylesheet" /&gt;
</pre></div>
</div>
</div>
<div class="section" id="s-js">
<span id="js"></span><h3><font id="88">js</font><a class="headerlink" href="media.html#js" title="Permalink to this headline">¶</a></h3>
<p><font id="39">所需的JavaScript文件由一个元组来描述。</font><font id="40">如何制定这些文件的路径，详见<a class="reference internal" href="media.html#form-asset-paths"><em>路径一节</em></a>。</font></p>
</div>
<div class="section" id="s-extend">
<span id="extend"></span><h3><font id="89">extend</font><a class="headerlink" href="media.html#extend" title="Permalink to this headline">¶</a></h3>
<p><font id="41">一直布尔值，定义了<tt class="docutils literal"><span class="pre">Media</span></tt>声明的继承行为。</font></p>
<p><font id="42">通常，任何使用静态<tt class="docutils literal"><span class="pre">Media</span></tt>定义的对象都会继承所有和父组件相关的素材。</font><font id="43">无论父对象如何定义它自己的需求，都是这样。</font><font id="44">例如，如果我们打算从上面的例子中扩展我们的基础日历控件：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">FancyCalendarWidget</span><span class="p">(</span><span class="n">CalendarWidget</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s">'all'</span><span class="p">:</span> <span class="p">(</span><span class="s">'fancy.css'</span><span class="p">,)</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span><span class="s">'whizbang.js'</span><span class="p">,)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">FancyCalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;link href="http://static.example.com/fancy.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/whizbang.js"&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p><font id="45">&nbsp;FancyCalendar 组件继承了所有父组件的素材。</font><font id="46">如果你不想让<tt class="docutils literal"><span class="pre">Media</span></tt> 以这种方式被继承，要向<tt class="docutils literal"><span class="pre">Media</span></tt> 声明中添加 <tt class="docutils literal"><span class="pre">extend=False</span></tt> 声明：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">FancyCalendarWidget</span><span class="p">(</span><span class="n">CalendarWidget</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">extend</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s">'all'</span><span class="p">:</span> <span class="p">(</span><span class="s">'fancy.css'</span><span class="p">,)</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span><span class="s">'whizbang.js'</span><span class="p">,)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">FancyCalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href="http://static.example.com/fancy.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/whizbang.js"&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p><font id="47">如果你需要对继承进行更多控制，要使用<a class="reference internal" href="media.html#dynamic-property"><em>动态属性</em></a>来定义你的素材。</font><font id="48">动态属性可以提供更多的控制，来控制继承哪个文件。</font></p>
</div>
</div>
<div class="section" id="s-media-as-a-dynamic-property">
<span id="s-dynamic-property"></span><span id="media-as-a-dynamic-property"></span><span id="dynamic-property"></span><h2><font id="83">Media</font> as a dynamic property</h2>
<p><font id="49">如果你需要对素材需求进行更多的复杂操作，你可以直接定义<tt class="docutils literal"><span class="pre">media</span></tt>属性。</font><font id="50">这可以通过定义一个返回<tt class="docutils literal"><span class="pre">forms.Media</span></tt>实例的组件属性来实现。</font><font id="51"></font><font id="52"><tt class="docutils literal"><span class="pre">forms.Media</span></tt>的构造器</font><font id="53">接受 <tt class="docutils literal"><span class="pre">css</span></tt> 和 <tt class="docutils literal"><span class="pre">js</span></tt>关键字参数，和在静态媒体定义中的格式相同。</font></p>
<p><font id="54">例如，我们的日历组件的静态定义可以定义成动态形式：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_media</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">forms</span><span class="o">.</span><span class="n">Media</span><span class="p">(</span><span class="n">css</span><span class="o">=</span><span class="p">{</span><span class="s">'all'</span><span class="p">:</span> <span class="p">(</span><span class="s">'pretty.css'</span><span class="p">,)},</span>
                           <span class="n">js</span><span class="o">=</span><span class="p">(</span><span class="s">'animations.js'</span><span class="p">,</span> <span class="s">'actions.js'</span><span class="p">))</span>
    <span class="n">media</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_media</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="55">对于如何构建动态<tt class="docutils literal"><span class="pre">media</span></tt> 属性的的返回值，详见<a class="reference internal" href="media.html#media-objects">媒体对象</a>一节。</font></p>
</div>
<div class="section" id="s-paths-in-asset-definitions">
<span id="s-form-asset-paths"></span><span id="paths-in-asset-definitions"></span><span id="form-asset-paths"></span><h2><font id="84">素材定义中的路径</font><a class="headerlink" href="media.html#paths-in-asset-definitions" title="Permalink to this headline">¶</a></h2>
<p><font id="56">用于指定素材的路径可以是相对的或者绝对的。</font><font id="57">如果路径以 <tt class="docutils literal"><span class="pre">/</span></tt>，<tt class="docutils literal"><span class="pre">http://</span></tt> 或者<tt class="docutils literal"><span class="pre">https://</span></tt>开头，会被解释为绝对路径。</font><font id="58">所有其它的路径会在开头追加合适前缀的值。</font></p>
<p><font id="59">作为&nbsp;<a class="reference internal" href="../../ref/contrib/staticfiles.html"><em>staticfiles app</em></a>的简介的一部分，添加了两个新的设置，它们涉及到渲染完整页面所需的“静态文件”：<a class="reference internal" href="../../ref/settings.html#std:setting-STATIC_URL"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_URL</span></tt></a> 和<a class="reference internal" href="../../ref/settings.html#std:setting-STATIC_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_ROOT</span></tt></a>。</font></p>
<p><font id="60">Django 会检查是否<a class="reference internal" href="../../ref/settings.html#std:setting-STATIC_URL"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_URL</span></tt></a>设置不是<tt class="docutils literal"><span class="pre">None</span></tt>，来寻找合适的前缀来使用，并且会自动回退使用<a class="reference internal" href="../../ref/settings.html#std:setting-MEDIA_URL"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_URL</span></tt></a>。</font><font id="61">例如，如果你站点的 <a class="reference internal" href="../../ref/settings.html#std:setting-MEDIA_URL"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_URL</span></tt></a> 是 <tt class="docutils literal"><span class="pre">'http://uploads.example.com/'</span></tt> 并且 <a class="reference internal" href="../../ref/settings.html#std:setting-STATIC_URL"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_URL</span></tt></a> 是<tt class="docutils literal"><span class="pre">None</span></tt>：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s">'all'</span><span class="p">:</span> <span class="p">(</span><span class="s">'/css/pretty.css'</span><span class="p">,),</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span><span class="s">'animations.js'</span><span class="p">,</span> <span class="s">'http://othersite.com/actions.js'</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href="/css/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://uploads.example.com/animations.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://othersite.com/actions.js"&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p><font id="62">但如果<a class="reference internal" href="../../ref/settings.html#std:setting-STATIC_URL"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_URL</span></tt></a> 为 <tt class="docutils literal"><span class="pre">'http://static.example.com/'</span></tt>：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href="/css/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://othersite.com/actions.js"&gt;&lt;/script&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="s-media-objects">
<span id="media-objects"></span><h2><font id="85"><tt class="docutils literal"><span class="pre">Media</span></tt>对象</font><a class="headerlink" href="media.html#media-objects" title="Permalink to this headline">¶</a></h2>
<p><font id="63">当你访问表单上的一个组件的<tt class="docutils literal"><span class="pre">media</span></tt>属性时，返回值是一个<tt class="docutils literal"><span class="pre">forms.Media</span></tt>对象。</font><font id="64"></font><font id="65">就像已经看到的那样，表示&nbsp;<tt class="docutils literal"><span class="pre">Media</span></tt> 对象的字符串，是在你的HTML页面的<tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt> 代码段包含相关文件所需的HTML。</font></p>
<p><font id="66">然而，<tt class="docutils literal"><span class="pre">Media</span></tt>对象具有一些其它的有趣属性。</font></p>
<div class="section" id="s-subsets-of-assets">
<span id="subsets-of-assets"></span><h3><font id="90">素材的子集</font><a class="headerlink" href="media.html#subsets-of-assets" title="Permalink to this headline">¶</a></h3>
<p><font id="67">如果你仅仅想得到特定类型的文件，你可以使用下标运算符来过滤出你感兴趣的媒体。</font><font id="68">例如：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">media</span><span class="p">[</span><span class="s">'css'</span><span class="p">])</span>
<span class="go">&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
</pre></div>
</div>
<p><font id="69">当你使用下标运算符的时候，返回值是一个新的&nbsp;<tt class="docutils literal"><span class="pre">Media</span></tt>对象，但是只含有感兴趣的媒体。</font></p>
</div>
<div class="section" id="s-combining-media-objects">
<span id="combining-media-objects"></span><h3><font id="91">组合<tt class="docutils literal"><span class="pre">Media</span></tt>对象</font><a class="headerlink" href="media.html#combining-media-objects" title="Permalink to this headline">¶</a></h3>
<p><font id="70"><tt class="docutils literal"><span class="pre">Media</span></tt> 对象可以添加到一起。</font><font id="71">添加两个<tt class="docutils literal"><span class="pre">Media</span></tt>的时候，产生的<tt class="docutils literal"><span class="pre">Media</span></tt>对象含有二者指定的素材的并集：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">CalendarWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s">'all'</span><span class="p">:</span> <span class="p">(</span><span class="s">'pretty.css'</span><span class="p">,)</span>
<span class="gp">... </span>        <span class="p">}</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span><span class="s">'animations.js'</span><span class="p">,</span> <span class="s">'actions.js'</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">OtherWidget</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span><span class="s">'whizbang.js'</span><span class="p">,)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w1</span> <span class="o">=</span> <span class="n">CalendarWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w2</span> <span class="o">=</span> <span class="n">OtherWidget</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">w1</span><span class="o">.</span><span class="n">media</span> <span class="o">+</span> <span class="n">w2</span><span class="o">.</span><span class="n">media</span><span class="p">)</span>
<span class="go">&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/whizbang.js"&gt;&lt;/script&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-media-on-forms">
<span id="media-on-forms"></span><h2><font id="86">表单上的<tt class="docutils literal"><span class="pre">Media</span></tt></font><a class="headerlink" href="media.html#media-on-forms" title="Permalink to this headline">¶</a></h2>
<p><font id="72">组件并不是唯一拥有<tt class="docutils literal"><span class="pre">media</span></tt>定义的对象 -- 表单可以定义<tt class="docutils literal"><span class="pre">media</span></tt>。</font><font id="73">在表单上定义<tt class="docutils literal"><span class="pre">media</span></tt> 的规则和组件上面一样：定义可以为静态的或者动态的。</font><font id="74">声明的路径和继承规则也严格一致。</font></p>
<p><font id="75">无论是否你定义了<tt class="docutils literal"><span class="pre">media</span></tt>，&nbsp;<em>所有</em>表单对象都有<tt class="docutils literal"><span class="pre">media</span></tt>属性。</font><font id="76">这个属性的默认值是，向所有属于这个表单的组件添加<tt class="docutils literal"><span class="pre">media</span></tt>定义的结果。</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">date</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">CalendarWidget</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">OtherWidget</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">media</span>
<span class="go">&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/whizbang.js"&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p><font id="77">如果你打算向表单关联一些额外的素材 -- 例如，表单布局的CSS -- 只是向表单添加<tt class="docutils literal"><span class="pre">Media</span></tt>声明就可以了：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">date</span> <span class="o">=</span> <span class="n">DateField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">CalendarWidget</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">OtherWidget</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s">'all'</span><span class="p">:</span> <span class="p">(</span><span class="s">'layout.css'</span><span class="p">,)</span>
<span class="gp">... </span>        <span class="p">}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">ContactForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">media</span>
<span class="go">&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;link href="http://static.example.com/layout.css" type="text/css" media="all" rel="stylesheet" /&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt;</span>
<span class="go">&lt;script type="text/javascript" src="http://static.example.com/whizbang.js"&gt;&lt;/script&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="yui-b" id="sidebar">
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<h3><font id="92">Table Of Contents</font></h3>
<ul>
<li><a class="reference internal" href="media.html#"><font id="98">Form Assets (the <tt class="docutils literal"><span class="pre">Media</span></tt> class)</font></a><ul>
<li><a class="reference internal" href="media.html#assets-as-a-static-definition"><font id="99">Assets as a static definition</font></a><ul>
<li><a class="reference internal" href="media.html#css"><font id="100">css</font></a></li>
<li><a class="reference internal" href="media.html#js"><font id="101">js</font></a></li>
<li><a class="reference internal" href="media.html#extend"><font id="102">extend</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="media.html#media-as-a-dynamic-property"><font id="103"><tt class="docutils literal"><span class="pre">Media</span></tt> as a dynamic property</font></a></li>
<li><a class="reference internal" href="media.html#paths-in-asset-definitions"><font id="104">Paths in asset definitions</font></a></li>
<li><a class="reference internal" href="media.html#media-objects"><font id="105"><tt class="docutils literal"><span class="pre">Media</span></tt> objects</font></a><ul>
<li><a class="reference internal" href="media.html#subsets-of-assets"><font id="106">Subsets of assets</font></a></li>
<li><a class="reference internal" href="media.html#combining-media-objects"><font id="107">Combining <tt class="docutils literal"><span class="pre">Media</span></tt> objects</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="media.html#media-on-forms"><font id="108"><tt class="docutils literal"><span class="pre">Media</span></tt> on Forms</font></a></li>
</ul>
</li>
</ul>
<h3><font id="93">Browse</font></h3>
<ul>
<li><font id="109">Prev: <a href="modelforms.html">Creating forms from models</a></font></li>
<li><font id="110">Next: <a href="../templates.html">Templates</a></font></li>
</ul>
<h3><font id="94">You are here:</font></h3>
<ul>
<li>
<a href="../../index.html"><font id="111">Django 1.8.2.dev20150513143415 documentation</font></a>
<ul><li><a href="../index.html"><font id="112">Using Django</font></a>
<ul><li><a href="index.html"><font id="113">Working with forms</font></a>
<ul><li><font id="114">Form Assets (the <tt class="docutils literal"><span class="pre">Media</span></tt> class)</font></li></ul>
</li></ul></li></ul>
</li>
</ul>
<h3><font id="95">This Page</font></h3>
<ul class="this-page-menu">
<li><a href="http://python.usyiyi.cn/django/_sources/topics/forms/media.txt" rel="nofollow"><font id="115">Show Source</font></a></li>
</ul>
<div id="searchbox" style="display: none">
<h3><font id="96">Quick search</font></h3>
<form action="http://python.usyiyi.cn/django/search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
<p class="searchtip" style="font-size: 90%"><font id="78"> Enter search terms or a module, class or function name. </font></p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<h3><font id="97">Last update:</font></h3>
<p class="topless"><font id="79">May 13, 2015</font></p>
</div>
</div>
<div id="ft">
<div class="nav">
    « <a href="modelforms.html" title="Creating forms from models">previous</a>
     |
    <a accesskey="U" href="../index.html" title="Using Django">up</a>
   |
    <a href="../templates.html" title="Templates">next</a> »</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div id="disqus_thread"></div><br>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'djangocn'; // required: replace example with your forum shortname
    var disqus_identifier = '/django/topics/forms/media.html';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<link href="http://python.usyiyi.cn/django/_static/ms_translator.css" rel="stylesheet" type="text/css"/>
<script src="http://python.usyiyi.cn/django/_static/ms_translator.js" type="text/javascript"></script>
<script src="http://python.usyiyi.cn/django/_static/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
<div id="MicrosoftTranslator" style="display:none; position: absolute; z-index: 2147483647; margin: 0px; border: 2px solid rgb(210, 210, 210); padding: 0px; color: rgb(0, 0, 0); background-color: rgb(230, 230, 230); font-family: Arial,Helvetica,Sans-Serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; direction: ltr; text-align: left; left: 274px; top: 2048.03px; min-width: 400px;">
    <div id="MSTCClose" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/tooltip_close.gif">
      </a>
    </div>
    
    <div id="MSTCPopDown" style="float: right;" style="display: none;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popdown.gif">
      </a>
    </div>
    <div id="MSTCPopUP" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popup.gif">
      </a>
    </div>
    
    <div id="MSTCTitle" style="margin: 4px 4px 8px; font-weight: bold;">原文
    </div>
    
    <div style="direction: ltr; text-align: left;">
      <span id="MSTCOrigion" style="display: inline-block; margin: 0px 4px 4px;"> </span>
    </div>
    
    <div id="MicrosoftTranslatorCommunity" class="MSTCltr">
      <div id="MSTCContent">
        <a id="MSTCExpandLink">
          <span id="MSTCImprove">改进翻译</span>
          <span id="MSTCSuggest">最小化</span>
          <img src="http://python.usyiyi.cn/django/_static/ctftoggledown.gif" id="MSTCToggleDown">
          <img src="http://python.usyiyi.cn/django/_static/ctftoggleup.gif" id="MSTCToggleUp">
        </a>
        <div id="MSTCRootPanel">
          <span id="MSTCLoading" style="display: none;">正在加载...</span>
          <div style="display: none;" id="MSTCTransPanelError">
            <div class="MSTCTableRow">
              <div class="MSTCTransPanelExc MSTCTableCell">
                <img style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_exclamation.gif" id="ExclamationImage">
              </div>
              <div class="MSTCTableCell">
                <span id="MSTCTransPanelErrorMsg"></span>
              </div>
            </div>
            <div class="MSTCTableRow">
              <div class="MSTCTableCell"></div>
              <div class="MSTCTableCell MSTCFlipHoriz">
                <input type="image" style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_OK.gif" class="MSTCErrorButtons" id="MSTCOKImgBtn" name="MSTCOKImgBtn">
              </div>
            </div>
          </div>
          
          <div id="MSTCTransPanel">
          </div>
          
          <div id="MSTCPrevNextPanel">
            <a id="MSTCPrevLink" style='border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>上一页</span>
            </a>
            <a style='color: black; border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>第</span>
              <span id="MSTCPage"></span>
              <span>页</span>
            </a>
            <a id="MSTCNextLink" style='padding-left: 5px;'>
              <span>下一页</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>