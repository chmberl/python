<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Django的管理站点 — Django 1.8.2 中文文档</title>
<link href="../../../_static/default.css" rel="stylesheet" type="text/css"/>
<link href="../../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.8.2.dev20150513143415',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="../../../_static/jquery.js" type="text/javascript"></script>
<script src="../../../_static/underscore.js" type="text/javascript"></script>
<script src="../../../_static/doctools.js" type="text/javascript"></script>
<link href="../../../index.html" rel="top" title="Django 1.8.2.dev20150513143415 documentation"/>
<link href="../index.html" rel="up" title="contrib packages"/>
<link href="actions.html" rel="next" title="Admin actions"/>
<link href="../index.html" rel="prev" title="contrib packages"/>
<script src="http://python.usyiyi.cn/django/templatebuiltins.js" type="text/javascript"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/ref/contrib/admin/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/ref/contrib/admin/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>
</head>
<body>
<div class="document">
<div class="yui-t6" id="custom-doc">
<div id="hd">
<h1><font id="626">Django 1.8.2 文档</font></h1>
<div id="global-nav">
<a href="../../../index.html" title="Home page">Home</a>  |
        <a href="../../../contents.html" title="Table of contents">Table of contents</a>  |
        <a href="../../../genindex.html" title="Global index">Index</a>  |
        <a href="../../../py-modindex.html" title="Module index">Modules</a>
</div>
<div class="nav">
    « <a href="../index.html" title='&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;contrib&lt;/span&gt;&lt;/tt&gt; packages'>previous</a>
     |
    <a accesskey="U" href="../../index.html" title="API Reference">up</a>
   |
    <a href="actions.html" title="Admin actions">next</a> »</div>
</div>
<div id="bd">
<div id="yui-main">
<div class="yui-b">
<div class="yui-g" id="ref-contrib-admin-index">
<div class="section" id="s-module-django.contrib.admin">
<span id="s-the-django-admin-site"></span><span id="module-django.contrib.admin"></span><span id="the-django-admin-site"></span><h1><font id="627">The Django admin site</font><a class="headerlink" href="index.html#module-django.contrib.admin" title="Permalink to this headline">¶</a></h1>
<p><font id="1">Django中一个最强大的部分是自动管理接口，</font><font id="2">在模型中读取元数据来提供一个强大的、生产就绪的接口，使内容生产者能够立即使用它向站点中添加内容，</font><font id="3">在这篇文档中，我们讨论如何去激活，使用和自定义Django的站点管理接口。</font></p>
<div class="section" id="s-overview">
<span id="overview"></span><h2><font id="628">Overview</font><a class="headerlink" href="index.html#overview" title="Permalink to this headline">¶</a></h2>
<p><font id="4">通过使用<a class="reference internal" href="../../django-admin.html#django-admin-startproject"><tt class="xref std std-djadmin docutils literal"><span class="pre">startproject</span></tt></a>创建的默认的项目模版中admin是可用的。</font></p>
<p><font id="5">作为参考，下面是一些要求：</font></p>
<ol class="arabic simple">
<li><font id="666">添加 <tt class="docutils literal"><span class="pre">'django.contrib.admin'</span></tt>到<a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> 设置中.</font></li>
<li><font id="667">admin有四个依赖 - <a class="reference internal" href="../../../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.auth</span></tt></a>, <a class="reference internal" href="../contenttypes.html#module-django.contrib.contenttypes" title="django.contrib.contenttypes: Provides generic interface to installed models."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.contenttypes</span></tt></a>, <a class="reference internal" href="../messages.html#module-django.contrib.messages" title="django.contrib.messages: Provides cookie- and session-based temporary message storage."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.messages</span></tt></a> 和<a class="reference internal" href="../../../topics/http/sessions.html#module-django.contrib.sessions" title="django.contrib.sessions: Provides session management for Django projects."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.sessions</span></tt></a>. </font><font id="668">如果这些应用没有在 <a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> 列表中, 添加这些应用.</font></li>
<li><font id="669">把 <tt class="docutils literal"><span class="pre">django.contrib.messages.context_processors.messages</span></tt> 添加到 <tt class="docutils literal"><span class="pre">DjangoTemplates</span></tt>后台定义在<a class="reference internal" href="../../settings.html#std:setting-TEMPLATES"><tt class="xref std std-setting docutils literal"><span class="pre">TEMPLATES</span></tt></a>中的<tt class="docutils literal"><span class="pre">'context_processors'</span></tt>选项，同样把<a class="reference internal" href="../../middleware.html#django.contrib.auth.middleware.AuthenticationMiddleware" title="django.contrib.auth.middleware.AuthenticationMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.auth.middleware.AuthenticationMiddleware</span></tt></a> 和 <a class="reference internal" href="../../middleware.html#django.contrib.messages.middleware.MessageMiddleware" title="django.contrib.messages.middleware.MessageMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.messages.middleware.MessageMiddleware</span></tt></a> 添加到 <a class="reference internal" href="../../settings.html#std:setting-MIDDLEWARE_CLASSES"><tt class="xref std std-setting docutils literal"><span class="pre">MIDDLEWARE_CLASSES</span></tt></a>. </font><font id="670">(这些默认都是激活的，所以你只需要这样做如果你手动调整过这些设置.)</font></li>
<li><font id="671">确定哪一个应用模块是应该可编辑的在admin接口。</font></li>
<li><font id="672">对于这些中的每一个模块,选择性的创建一个 <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 类包含了自定义的管理功能和选择那些特殊的模块</font></li>
<li><font id="673">实例化<tt class="docutils literal"><span class="pre">AdminSite</span></tt> 并且告诉他每一个模块和<tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 类.</font></li>
<li><font id="674">绑定<tt class="docutils literal"><span class="pre">AdminSite</span></tt>实例到URLconf.</font></li>
</ol>
<p><font id="6">做了这些步骤之后, 你将能够使用Django管理站点通过访问你已经绑定的URL(<tt class="docutils literal"><span class="pre">/admin/</span></tt>, 默认的).</font></p>
<div class="section" id="s-other-topics">
<span id="other-topics"></span><h3><font id="634">其他话题</font><a class="headerlink" href="index.html#other-topics" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="actions.html"><font id="675">Admin 行为</font></a></li>
<li class="toctree-l1"><a class="reference internal" href="admindocs.html"><font id="676">&nbsp;Django admin 文档生成</font></a></li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title"><font id="7">注意</font></p>
<p><font id="8">有关服务的静态文件（图片，JavaScript和CSS）与生产管理相关的信息，请参阅 <a class="reference internal" href="../../../howto/deployment/wsgi/modwsgi.html#serving-files"><em>文件服务</em></a>.</font></p>
<p class="last"><font id="9">还有什么问题? </font><font id="10">试试 &nbsp;<a class="reference internal" href="http://python.usyiyi.cn/django/faq/admin.html"><em>FAQ: The admin</em></a>.</font></p>
</div>
</div>
</div>
<div class="section" id="s-modeladmin-objects">
<span id="modeladmin-objects"></span><h2><font id="629">ModelAdmin</font> objects</h2>
<dl class="class">
<dt id="django.contrib.admin.ModelAdmin">
<em class="property">class </em><tt class="descname">ModelAdmin</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="11"><tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 类是admin接口中的一个代表模块，</font><font id="12">通常, 在应用中被存放在<tt class="docutils literal"><span class="pre">admin.py</span></tt>的文件中，</font><font id="13">让我们来看一个非常简单的<tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>例子:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">myproject.myapp.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">AuthorAdmin</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-do-you-need-a-modeladmin-object-at-all admonition">
<p class="first admonition-title"><font id="14">你还需要一个<tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 对象吗?</font></p>
<p><font id="15">在上面的例子中, <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>还没有定义一些自定义的值. </font><font id="16">因此, 系统将使用默认的管理接口实现. </font><font id="17">如果你非常喜欢使用默认的admin接口, 你就不需要定义 <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 对象了– 你可以注册模块类不用提供 <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 描述。</font><font id="18">上面的例子可以简写成:</font></p>
<div class="last highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">myproject.myapp.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<div class="section" id="s-the-register-decorator">
<span id="the-register-decorator"></span><h3><font id="635">注册装饰</font><a class="headerlink" href="index.html#the-register-decorator" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="django.contrib.admin.register">
<tt class="descname">register</tt>(<em>*models</em><span class="optional">[</span>, <em>site=django.admin.sites.site</em><span class="optional">]</span>)<a class="headerlink" href="index.html#django.contrib.admin.register" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="19">还有一个装饰注册您的<tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>类:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="nd">@admin.register</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><font id="20">可以提供一个或多个模块类来注册<tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 并且一个选择性关键参数 <tt class="docutils literal"><span class="pre">site</span></tt> 如果不使用默认的<tt class="docutils literal"><span class="pre">AdminSite</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Author</span><span class="p">,</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Editor</span>
<span class="kn">from</span> <span class="nn">myproject.admin_site</span> <span class="kn">import</span> <span class="n">custom_admin_site</span>

<span class="nd">@admin.register</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Editor</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="n">custom_admin_site</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>
</div>
<div class="section" id="s-discovery-of-admin-files">
<span id="discovery-of-admin-files"></span><h3><font id="636">Discovery of admin files</font><a class="headerlink" href="index.html#discovery-of-admin-files" title="Permalink to this headline">¶</a></h3>
<p><font id="21">当你将 <tt class="docutils literal"><span class="pre">'django.contrib.admin'</span></tt>加入到<a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> 设置中, Django会自动在每一个应用中搜索<tt class="docutils literal"><span class="pre">admin</span></tt>模块并导入。</font></p>
<dl class="class">
<dt id="django.contrib.admin.apps.AdminConfig">
<em class="property">class </em><tt class="descclassname">apps.</tt><tt class="descname">AdminConfig</tt><a class="headerlink" href="index.html#django.contrib.admin.apps.AdminConfig" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="22">这是默认的<a class="reference internal" href="../../applications.html#django.apps.AppConfig" title="django.apps.AppConfig"><tt class="xref py py-class docutils literal"><span class="pre">AppConfig</span></tt></a> 类对于 admin. </font><font id="23">它调用<a class="reference internal" href="index.html#django.contrib.admin.autodiscover" title="django.contrib.admin.autodiscover"><tt class="xref py py-func docutils literal"><span class="pre">autodiscover()</span></tt></a> 当 Django 开始时.</font></p>
</dd></dl>
<dl class="class">
<dt id="django.contrib.admin.apps.SimpleAdminConfig">
<em class="property">class </em><tt class="descclassname">apps.</tt><tt class="descname">SimpleAdminConfig</tt><a class="headerlink" href="index.html#django.contrib.admin.apps.SimpleAdminConfig" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="24">这个类和 <a class="reference internal" href="index.html#django.contrib.admin.apps.AdminConfig" title="django.contrib.admin.apps.AdminConfig"><tt class="xref py py-class docutils literal"><span class="pre">AdminConfig</span></tt></a>作用一样,但是它不调用<a class="reference internal" href="index.html#django.contrib.admin.autodiscover" title="django.contrib.admin.autodiscover"><tt class="xref py py-func docutils literal"><span class="pre">autodiscover()</span></tt></a>.</font></p>
</dd></dl>
<dl class="function">
<dt id="django.contrib.admin.autodiscover">
<tt class="descname">autodiscover</tt>()<a class="reference internal" href="http://python.usyiyi.cn/django/_modules/django/contrib/admin.html#autodiscover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="index.html#django.contrib.admin.autodiscover" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="25">这个函数试图导入 <tt class="docutils literal"><span class="pre">admin</span></tt>模块在每一个已经安装的应用中. </font><font id="26">那些希望被注册使用admin的模块.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><font id="27">以前的Django版本推荐直接在URLconf中调用这个函数. </font><font id="28">Django 1.7不再需要这样. </font><font id="29"><a class="reference internal" href="index.html#django.contrib.admin.apps.AdminConfig" title="django.contrib.admin.apps.AdminConfig"><tt class="xref py py-class docutils literal"><span class="pre">AdminConfig</span></tt></a> 能够自动的运行 auto-discovery.</font></p>
</div>
</dd></dl>
<p><font id="30">如果你使用自定义的<tt class="docutils literal"><span class="pre">AdminSite</span></tt>, 一般是导入所有的<tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 子类在你的代码中并且注册他们到自定义的<tt class="docutils literal"><span class="pre">AdminSite</span></tt>. </font><font id="31">在这个例子中, 为了使auto-discovery失效,你应该把 <tt class="docutils literal"><span class="pre">'django.contrib.admin.apps.SimpleAdminConfig'</span></tt>代替<tt class="docutils literal"><span class="pre">'django.contrib.admin'</span></tt> 放入到 <a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> 设置中.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><font id="32">在以前的版本中,admin需要被指示寻找 <tt class="docutils literal"><span class="pre">admin.py</span></tt> 文件通过 <a class="reference internal" href="index.html#django.contrib.admin.autodiscover" title="django.contrib.admin.autodiscover"><tt class="xref py py-func docutils literal"><span class="pre">autodiscover()</span></tt></a>. </font><font id="33">在Django 1.7, auto-discovery默认可用的，必须明确的使它失效当不需要时.</font></p>
</div>
</div>
<div class="section" id="s-modeladmin-options">
<span id="modeladmin-options"></span><h3><font id="637">ModelAdmin</font> options</h3>
<p><font id="34"><tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>是非常灵活的. </font><font id="35">它有几个选项来处理自定义接口. </font><font id="36">所有的选项都在 <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> 子类中定义:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">date_hierarchy</span> <span class="o">=</span> <span class="s">'pub_date'</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.actions">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">actions</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.actions" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="37">行为列表可使用在改变列表的页面中. </font><font id="38">详细信息请查看<a class="reference internal" href="actions.html"><em>Admin actions</em></a> .</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.actions_on_top">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">actions_on_top</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.actions_on_top" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.actions_on_bottom">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">actions_on_bottom</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.actions_on_bottom" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="39">控制在页面上的行为栏的显示. </font><font id="40">默认admin的更改列表显示行为在页面的顶部 (<tt class="docutils literal"><span class="pre">actions_on_top</span> <span class="pre">=</span> <span class="pre">True;</span> </tt></font><font id="41"><span class="pre">actions_on_bottom</span> </font><font id="42"><span class="pre">=</span> </font><font id="43"><span class="pre">False</span>).</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.actions_selection_counter">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">actions_selection_counter</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.actions_selection_counter" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="44">控制选择计数器是否显示旁边的动作下拉. </font><font id="45">默认的admin 更改列表将会显示它 (<tt class="docutils literal"><span class="pre">actions_selection_counter</span> <span class="pre">=</span> <span class="pre">True</span></tt>).</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.date_hierarchy">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">date_hierarchy</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.date_hierarchy" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="46">设置 <tt class="docutils literal"><span class="pre">date_hierarchy</span></tt> 为 <tt class="docutils literal"><span class="pre">DateField</span></tt>或<tt class="docutils literal"><span class="pre">DateTimeField</span></tt>的名称在你的模块，并且更改列表将包含一个基于时间的明细导航通过这个域.</font></p>
<p><font id="47">例如:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">date_hierarchy</span> <span class="o">=</span> <span class="s">'pub_date'</span>
</pre></div>
</div>
<p><font id="48">这将智能地填充自己根据现有数据，例如，如果所有的数据在一个月内, 它将只显示天级别的数据.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="49">Note</font></p>
<p class="last"><font id="50"><tt class="docutils literal"><span class="pre">date_hierarchy</span></tt> 在内部使用<a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet.datetimes" title="django.db.models.query.QuerySet.datetimes"><tt class="xref py py-meth docutils literal"><span class="pre">QuerySet.datetimes()</span></tt></a>. </font><font id="51">请参考它的一些警告的文档当时区支持是可用的时(<a class="reference internal" href="../../settings.html#std:setting-USE_TZ"><tt class="xref std std-setting docutils literal"><span class="pre">USE_TZ</span> <span class="pre">=</span> <span class="pre">True</span></tt></a>).</font></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.exclude">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">exclude</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.exclude" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="52">这个属性, 如果使用, 应该是一个字段的列表没有包含在表单中。</font></p>
<p><font id="53">例如, 让我们来考虑下面的model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">birth_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="54">如果你想要个关于<tt class="docutils literal"><span class="pre">Author</span></tt> 模块的表单只包含 <tt class="docutils literal"><span class="pre">name</span></tt> and <tt class="docutils literal"><span class="pre">title</span></tt> 字段, 你应该具体说明<tt class="docutils literal"><span class="pre">fields</span></tt> 或 <tt class="docutils literal"><span class="pre">exclude</span></tt> 像这样:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'title'</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">exclude</span> <span class="o">=</span> <span class="p">(</span><span class="s">'birth_date'</span><span class="p">,)</span>
</pre></div>
</div>
<p><font id="55">由于Author模块只有三个字段, <tt class="docutils literal"><span class="pre">name</span></tt>, <tt class="docutils literal"><span class="pre">title</span></tt>, 和 <tt class="docutils literal"><span class="pre">birth_date</span></tt>, 上面声明的表单结果将明确的包含相同的字段.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">fields</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="56">如果需要实现字段的布局中的“添加” 和 “更改”，“更改”网页形式的简单改变像只显示可用字段的一个子集，你可以使用&nbsp;<tt class="docutils literal"><span class="pre">fields</span></tt>选项修改他们的顺序或者行内分组(需要复杂布局的请参阅<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><tt class="xref py py-attr docutils literal"><span class="pre">fieldsets</span></tt></a> 选项将在下一段讲到). </font><font id="57">例如,可以定义一个简单的管理表单的版本使用<a class="reference internal" href="../flatpages.html#django.contrib.flatpages.models.FlatPage" title="django.contrib.flatpages.models.FlatPage"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.flatpages.models.FlatPage</span></tt></a> 模块像下面这样:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">FlatPageAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'url'</span><span class="p">,</span> <span class="s">'title'</span><span class="p">,</span> <span class="s">'content'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="58">在上面的例子中, 只有字段<tt class="docutils literal"><span class="pre">url</span></tt>, <tt class="docutils literal"><span class="pre">title</span></tt> 和 <tt class="docutils literal"><span class="pre">content</span></tt> 将会在表单中顺序的显示. </font><font id="59"><tt class="docutils literal"><span class="pre">fields</span></tt>能够包含定义在 <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.readonly_fields</span></tt></a> 中显示的值作为只读.</font></p>
<p><font id="60"><tt class="docutils literal"><span class="pre">fields</span></tt> 选项, 不像 <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><tt class="xref py py-attr docutils literal"><span class="pre">list_display</span></tt></a>, 只包含字段的名称在模块中或者通过<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.form" title="django.contrib.admin.ModelAdmin.form"><tt class="xref py py-attr docutils literal"><span class="pre">form</span></tt></a>的具体说明. </font><font id="61">它可能包含可调用的只有当它们列在<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><tt class="xref py py-attr docutils literal"><span class="pre">readonly_fields</span></tt></a>中.</font></p>
<p><font id="62">要显示多个字段在同一行, 包裹这些字段在同一个元组. </font><font id="63">例如, <tt class="docutils literal"><span class="pre">url</span></tt> and <tt class="docutils literal"><span class="pre">title</span></tt> 字段 将会显示在同一行并且 <tt class="docutils literal"><span class="pre">content</span></tt> 字段将会显示在他们的下一行:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">FlatPageAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">((</span><span class="s">'url'</span><span class="p">,</span> <span class="s">'title'</span><span class="p">),</span> <span class="s">'content'</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title"><font id="64">Note</font></p>
<p class="last"><font id="65">这个 <tt class="docutils literal"><span class="pre">fields</span></tt> 选项不应该与&nbsp;<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><tt class="xref py py-attr docutils literal"><span class="pre">fieldsets</span></tt></a> 选项中的 <tt class="docutils literal"><span class="pre">fields</span></tt> 字典关键字含糊不清, 就像下一段要讲的。</font></p>
</div>
<p><font id="66">如果<tt class="docutils literal"><span class="pre">fields</span></tt>和<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><tt class="xref py py-attr docutils literal"><span class="pre">fieldsets</span></tt></a> 选项都不存在, Django将会默认显示每一个不是 <tt class="docutils literal"><span class="pre">AutoField</span></tt> 并且 <tt class="docutils literal"><span class="pre">editable=True</span></tt>的字段, 在单一的字段集，和在模块中定义的字段有相同的顺序</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.fieldsets">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">fieldsets</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.fieldsets" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="67">设置<tt class="docutils literal"><span class="pre">fieldsets</span></tt> 控制管理“添加”和 “更改” 页面的布局.</font></p>
<p><font id="68"><tt class="docutils literal"><span class="pre">fieldsets</span></tt> 是一个二元元组, 每一个二元元组代表一个 <tt class="docutils literal"><span class="pre">&lt;fieldset&gt;</span></tt>在管理表单页面. </font><font id="69">( <tt class="docutils literal"><span class="pre">&lt;fieldset&gt;</span></tt> 是表单的一部分.)</font></p>
<p><font id="70">二元元组的格式是 <tt class="docutils literal"><span class="pre">(name,</span> <span class="pre">field_options)</span></tt>, 其中 <tt class="docutils literal"><span class="pre">name</span></tt> 是一个字符串相当于 fieldset的标题， <tt class="docutils literal"><span class="pre">field_options</span></tt> 是一个关于 fieldset的字典信息,一个字段列表包含在里面。</font></p>
<p><font id="71">一个完整的例子, 来自于<a class="reference internal" href="../flatpages.html#django.contrib.flatpages.models.FlatPage" title="django.contrib.flatpages.models.FlatPage"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.flatpages.models.FlatPage</span></tt></a> 模块:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">FlatPageAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">{</span>
            <span class="s">'fields'</span><span class="p">:</span> <span class="p">(</span><span class="s">'url'</span><span class="p">,</span> <span class="s">'title'</span><span class="p">,</span> <span class="s">'content'</span><span class="p">,</span> <span class="s">'sites'</span><span class="p">)</span>
        <span class="p">}),</span>
        <span class="p">(</span><span class="s">'Advanced options'</span><span class="p">,</span> <span class="p">{</span>
            <span class="s">'classes'</span><span class="p">:</span> <span class="p">(</span><span class="s">'collapse'</span><span class="p">,),</span>
            <span class="s">'fields'</span><span class="p">:</span> <span class="p">(</span><span class="s">'enable_comments'</span><span class="p">,</span> <span class="s">'registration_required'</span><span class="p">,</span> <span class="s">'template_name'</span><span class="p">)</span>
        <span class="p">}),</span>
    <span class="p">)</span>
</pre></div>
</div>
<p><font id="72">在管理界面的结果看起来像这样:</font></p>
<img alt="../../../_images/flatfiles_admin.png" src="../../../_images/flatfiles_admin.png"/>
<p><font id="73">如果<tt class="docutils literal"><span class="pre">fields</span></tt>和<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><tt class="xref py py-attr docutils literal"><span class="pre">fieldsets</span></tt></a> 选项都不存在, Django将会默认显示每一个不是 <tt class="docutils literal"><span class="pre">AutoField</span></tt> 并且 <tt class="docutils literal"><span class="pre">editable=True</span></tt>的字段, 在单一的字段集，和在模块中定义的字段有相同的顺序。</font></p>
<p><font id="74"><tt class="docutils literal"><span class="pre">field_options</span></tt> 字典有以下关键字:</font></p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">fields</span></tt></dt>
<dd><p class="first"><font id="75">字段名元组显示在 fieldset. </font><font id="76">这个关键字是需要的.</font></p>
<p><font id="77">例如:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
<span class="s">'fields'</span><span class="p">:</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">,</span> <span class="s">'address'</span><span class="p">,</span> <span class="s">'city'</span><span class="p">,</span> <span class="s">'state'</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
<p><font id="78">就像<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><tt class="xref py py-attr docutils literal"><span class="pre">fields</span></tt></a> 选项, 显示多个字段在同一行, 包裹这些字段在一个元组. </font><font id="79">在这个例子中, &nbsp;<tt class="docutils literal"><span class="pre">first_name</span></tt> 和 <tt class="docutils literal"><span class="pre">last_name</span></tt> 字段将显示在同一行:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
<span class="s">'fields'</span><span class="p">:</span> <span class="p">((</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">),</span> <span class="s">'address'</span><span class="p">,</span> <span class="s">'city'</span><span class="p">,</span> <span class="s">'state'</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
<p><font id="80"><tt class="docutils literal"><span class="pre">fields</span></tt> 能够包含定义在<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><tt class="xref py py-attr docutils literal"><span class="pre">readonly_fields</span></tt></a> 中显示的值作为只读.</font></p>
<p class="last"><font id="81">如果添加可调用的名称到<tt class="docutils literal"><span class="pre">fields</span></tt>中,相同的规则适用于<a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><tt class="xref py py-attr docutils literal"><span class="pre">fields</span></tt></a>选项: 可调用的必须在 <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><tt class="xref py py-attr docutils literal"><span class="pre">readonly_fields</span></tt></a>列表中.</font></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">classes</span></tt></dt>
<dd><p class="first"><font id="82">一个列表包含额外的CSS classes 应用到 fieldset.</font></p>
<p><font id="83">例如:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
<span class="s">'classes'</span><span class="p">:</span> <span class="p">(</span><span class="s">'wide'</span><span class="p">,</span> <span class="s">'extrapretty'</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="last"><font id="84">通过默认的管理站点样式表定义的两个有用的classes 是 <tt class="docutils literal"><span class="pre">collapse</span></tt> 和 <tt class="docutils literal"><span class="pre">wide</span></tt>. </font><font id="85">Fieldsets 使用 <tt class="docutils literal"><span class="pre">collapse</span></tt> 样式将会在初始化时展开并且替换掉一个 “click to expand” 链接. </font><font id="86">Fieldsets 使用 <tt class="docutils literal"><span class="pre">wide</span></tt> 样式将会有额外的水平空格.</font></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">description</span></tt></dt>
<dd><p class="first"><font id="87">一个可选择额外文本的字符串显示在每一个fieldset的顶部,在fieldset头部的底下. </font><font id="88">字符串没有被<a class="reference internal" href="index.html#django.contrib.admin.TabularInline" title="django.contrib.admin.TabularInline"><tt class="xref py py-class docutils literal"><span class="pre">TabularInline</span></tt></a> 渲染由于它的布局.</font></p>
<p class="last"><font id="89">记住这个值<em>不是</em> HTML-escaped 当它显示在管理接口中时. </font><font id="90">这可以包含HTML如果你非常渴望. </font><font id="91">另外，你可以使用纯文本和 <tt class="docutils literal"><span class="pre">django.utils.html.escape()</span></tt> 避免任何HTML特殊字符。</font></p>
</dd>
</dl>
</li>
</ul>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.filter_horizontal">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">filter_horizontal</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.filter_horizontal" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="92">默认的, <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> 会在管理站点上显示一个<tt class="docutils literal"><span class="pre">&lt;select</span> <span class="pre">multiple&gt;</span></tt>. </font><font id="93">但是，当选择多个时多选框非常难用. </font><font id="94">Adding a <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> to this list will instead use a nifty unobtrusive JavaScript “filter” interface that allows searching within the options. </font><font id="95">The unselected and selected options appear in two boxes side by side. </font><font id="96">See <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.filter_vertical" title="django.contrib.admin.ModelAdmin.filter_vertical"><tt class="xref py py-attr docutils literal"><span class="pre">filter_vertical</span></tt></a> to use a vertical interface.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.filter_vertical">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">filter_vertical</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.filter_vertical" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="97">Same as <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.filter_horizontal" title="django.contrib.admin.ModelAdmin.filter_horizontal"><tt class="xref py py-attr docutils literal"><span class="pre">filter_horizontal</span></tt></a>, but uses a vertical display of the filter interface with the box of unselected options appearing above the box of selected options.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.form">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">form</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.form" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="98">By default a <tt class="docutils literal"><span class="pre">ModelForm</span></tt> is dynamically created for your model. </font><font id="99">It is used to create the form presented on both the add/change pages. </font><font id="100">You can easily provide your own <tt class="docutils literal"><span class="pre">ModelForm</span></tt> to override any default form behavior on the add/change pages. </font><font id="101">Alternatively, you can customize the default form rather than specifying an entirely new one by using the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_form" title="django.contrib.admin.ModelAdmin.get_form"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.get_form()</span></tt></a> method.</font></p>
<p><font id="102">For an example see the section <a class="reference internal" href="index.html#admin-custom-validation"><em>Adding custom validation to the admin</em></a>.</font></p>
<div class="admonition-note admonition">
<p class="first admonition-title"><font id="103">Note</font></p>
<p><font id="104">If you define the <tt class="docutils literal"><span class="pre">Meta.model</span></tt> attribute on a <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a>, you must also define the <tt class="docutils literal"><span class="pre">Meta.fields</span></tt> attribute (or the <tt class="docutils literal"><span class="pre">Meta.exclude</span></tt> attribute). </font><font id="105">However, since the admin has its own way of defining fields, the <tt class="docutils literal"><span class="pre">Meta.fields</span></tt> attribute will be ignored.</font></p>
<p class="last"><font id="106">If the <tt class="docutils literal"><span class="pre">ModelForm</span></tt> is only going to be used for the admin, the easiest solution is to omit the <tt class="docutils literal"><span class="pre">Meta.model</span></tt> attribute, since <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> will provide the correct model to use. </font><font id="107">Alternatively, you can set <tt class="docutils literal"><span class="pre">fields</span> <span class="pre">=</span> <span class="pre">[]</span></tt> in the <tt class="docutils literal"><span class="pre">Meta</span></tt> class to satisfy the validation on the <tt class="docutils literal"><span class="pre">ModelForm</span></tt>.</font></p>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title"><font id="108">Note</font></p>
<p><font id="109">If your <tt class="docutils literal"><span class="pre">ModelForm</span></tt> and <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> both define an <tt class="docutils literal"><span class="pre">exclude</span></tt> option then <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> takes precedence:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Person</span>

<span class="k">class</span> <span class="nc">PersonForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Person</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[</span><span class="s">'name'</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">exclude</span> <span class="o">=</span> <span class="p">[</span><span class="s">'age'</span><span class="p">]</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">PersonForm</span>
</pre></div>
</div>
<p class="last"><font id="110">In the above example, the “age” field will be excluded but the “name” field will be included in the generated form.</font></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.formfield_overrides">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">formfield_overrides</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.formfield_overrides" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="111">This provides a quick-and-dirty way to override some of the <a class="reference internal" href="../../forms/fields.html#django.forms.Field" title="django.forms.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> options for use in the admin. </font><font id="112"><tt class="docutils literal"><span class="pre">formfield_overrides</span></tt> is a dictionary mapping a field class to a dict of arguments to pass to the field at construction time.</font></p>
<p><font id="113">Since that’s a bit abstract, let’s look at a concrete example. </font><font id="114">The most common use of <tt class="docutils literal"><span class="pre">formfield_overrides</span></tt> is to add a custom widget for a certain type of field. </font><font id="115">So, imagine we’ve written a <tt class="docutils literal"><span class="pre">RichTextEditorWidget</span></tt> that we’d like to use for large text fields instead of the default <tt class="docutils literal"><span class="pre">&lt;textarea&gt;</span></tt>. </font><font id="116">Here’s how we’d do that:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="c"># Import our custom widget and our model from where they're defined</span>
<span class="kn">from</span> <span class="nn">myapp.widgets</span> <span class="kn">import</span> <span class="n">RichTextEditorWidget</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">MyModel</span>

<span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">formfield_overrides</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">:</span> <span class="p">{</span><span class="s">'widget'</span><span class="p">:</span> <span class="n">RichTextEditorWidget</span><span class="p">},</span>
    <span class="p">}</span>
</pre></div>
</div>
<p><font id="117">Note that the key in the dictionary is the actual field class, <em>not</em> a string. </font><font id="118">The value is another dictionary; </font><font id="119">these arguments will be passed to the form field’s <tt class="docutils literal"><span class="pre">__init__()</span></tt> method. </font><font id="120">See <a class="reference internal" href="../../forms/api.html"><em>The Forms API</em></a> for details.</font></p>
<div class="admonition warning">
<p class="first admonition-title"><font id="121">Warning</font></p>
<p><font id="122">If you want to use a custom widget with a relation field (i.e. <a class="reference internal" href="../../models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> or <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a>), make sure you haven’t included that field’s name in <tt class="docutils literal"><span class="pre">raw_id_fields</span></tt> or <tt class="docutils literal"><span class="pre">radio_fields</span></tt>.</font></p>
<p class="last"><font id="123"><tt class="docutils literal"><span class="pre">formfield_overrides</span></tt> won’t let you change the widget on relation fields that have <tt class="docutils literal"><span class="pre">raw_id_fields</span></tt> or <tt class="docutils literal"><span class="pre">radio_fields</span></tt> set. </font><font id="124">That’s because <tt class="docutils literal"><span class="pre">raw_id_fields</span></tt> and <tt class="docutils literal"><span class="pre">radio_fields</span></tt> imply custom widgets of their own.</font></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.inlines">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">inlines</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.inlines" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="125">See <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">InlineModelAdmin</span></tt></a> objects below as well as <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_formsets_with_inlines" title="django.contrib.admin.ModelAdmin.get_formsets_with_inlines"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.get_formsets_with_inlines()</span></tt></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_display">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">list_display</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.list_display" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="126">使用 <tt class="docutils literal"><span class="pre">list_display</span></tt>去控制哪些字段会显示在管理的列表页面中</font></p>
<p><font id="127">Example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="128">如果你没有设置&nbsp;<tt class="docutils literal"><span class="pre">list_display</span></tt>, 只会有一个列用于显示每个对象的&nbsp;<tt class="docutils literal"><span class="pre">__str__()</span></tt> (python2中是<tt class="docutils literal"><span class="pre">__unicode__()</span></tt>)内容.</font></p>
<p><font id="129">在<tt class="docutils literal"><span class="pre">list_display</span></tt>中，你有4种赋值方式可以使用：</font></p>
<ul>
<li><p class="first"><font id="130">A field of the model. </font><font id="131">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="132">一个可接受的对象实例的参数 </font><font id="133">例子：</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">upper_case_name</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="s">"</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">last_name</span><span class="p">))</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="n">upper_case_name</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s">'Name'</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="n">upper_case_name</span><span class="p">,)</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="134">A string representing an attribute on the <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>. </font><font id="135">This behaves same as the callable. </font><font id="136">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'upper_case_name'</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">upper_case_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s">"</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">last_name</span><span class="p">))</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="n">upper_case_name</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s">'Name'</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="137">A string representing an attribute on the model. </font><font id="138">This behaves almost the same as the callable, but <tt class="docutils literal"><span class="pre">self</span></tt> in this context is the model instance. </font><font id="139">Here’s a full model example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">decade_born_in</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">birthday</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%Y'</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s">"0's"</span>
    <span class="n">decade_born_in</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s">'Birth decade'</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'decade_born_in'</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p><font id="140">A few special cases to note about <tt class="docutils literal"><span class="pre">list_display</span></tt>:</font></p>
<ul>
<li><p class="first"><font id="141">If the field is a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>, Django will display the <tt class="docutils literal"><span class="pre">__str__()</span></tt> (<tt class="docutils literal"><span class="pre">__unicode__()</span></tt> on Python 2) of the related object.</font></p>
</li>
<li><p class="first"><font id="142"><tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> fields aren’t supported, because that would entail executing a separate SQL statement for each row in the table. </font><font id="143">If you want to do this nonetheless, give your model a custom method, and add that method’s name to <tt class="docutils literal"><span class="pre">list_display</span></tt>. </font><font id="144">(See below for more on custom methods in <tt class="docutils literal"><span class="pre">list_display</span></tt>.)</font></p>
</li>
<li><p class="first"><font id="145">If the field is a <tt class="docutils literal"><span class="pre">BooleanField</span></tt> or <tt class="docutils literal"><span class="pre">NullBooleanField</span></tt>, Django will display a pretty “on” or “off” icon instead of <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>.</font></p>
</li>
<li><p class="first"><font id="146">If the string given is a method of the model, <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> or a callable, Django will HTML-escape the output by default. </font><font id="147">If you’d rather not escape the output of the method, give the method an <tt class="docutils literal"><span class="pre">allow_tags</span></tt> attribute whose value is <tt class="docutils literal"><span class="pre">True</span></tt>. </font><font id="148">However, to avoid an XSS vulnerability, you should use <a class="reference internal" href="http://python.usyiyi.cn/django/ref/utils.html#django.utils.html.format_html" title="django.utils.html.format_html"><tt class="xref py py-func docutils literal"><span class="pre">format_html()</span></tt></a> to escape user-provided inputs.</font></p>
<p><font id="149">Here’s a full example model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="kn">import</span> <span class="n">format_html</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">color_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">colored_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">format_html</span><span class="p">(</span><span class="s">'&lt;span style="color: #{};"&gt;{} {}&lt;/span&gt;'</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>

    <span class="n">colored_name</span><span class="o">.</span><span class="n">allow_tags</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">,</span> <span class="s">'colored_name'</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="150">If the string given is a method of the model, <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> or a callable that returns True or False Django will display a pretty “on” or “off” icon if you give the method a <tt class="docutils literal"><span class="pre">boolean</span></tt> attribute whose value is <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
<p><font id="151">Here’s a full example model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">born_in_fifties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">birthday</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%Y'</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s">'195'</span>
    <span class="n">born_in_fifties</span><span class="o">.</span><span class="n">boolean</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'born_in_fifties'</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="152">The <tt class="docutils literal"><span class="pre">__str__()</span></tt> (<tt class="docutils literal"><span class="pre">__unicode__()</span></tt> on Python 2) method is just as valid in <tt class="docutils literal"><span class="pre">list_display</span></tt> as any other model method, so it’s perfectly OK to do this:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'__str__'</span><span class="p">,</span> <span class="s">'some_other_field'</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="153">Usually, elements of <tt class="docutils literal"><span class="pre">list_display</span></tt> that aren’t actual database fields can’t be used in sorting (because Django does all the sorting at the database level).</font></p>
<p><font id="154">However, if an element of <tt class="docutils literal"><span class="pre">list_display</span></tt> represents a certain database field, you can indicate this fact by setting the <tt class="docutils literal"><span class="pre">admin_order_field</span></tt> attribute of the item.</font></p>
<p><font id="155">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="kn">import</span> <span class="n">format_html</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">color_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">colored_first_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">format_html</span><span class="p">(</span><span class="s">'&lt;span style="color: #{};"&gt;{}&lt;/span&gt;'</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">color_code</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span><span class="p">)</span>

    <span class="n">colored_first_name</span><span class="o">.</span><span class="n">allow_tags</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">colored_first_name</span><span class="o">.</span><span class="n">admin_order_field</span> <span class="o">=</span> <span class="s">'first_name'</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'colored_first_name'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="156">The above will tell Django to order by the <tt class="docutils literal"><span class="pre">first_name</span></tt> field when trying to sort by <tt class="docutils literal"><span class="pre">colored_first_name</span></tt> in the admin.</font></p>
<div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="157">To indicate descending order with <tt class="docutils literal"><span class="pre">admin_order_field</span></tt> you can use a hyphen prefix on the field name. </font><font id="158">Using the above example, this would look like:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">colored_first_name</span><span class="o">.</span><span class="n">admin_order_field</span> <span class="o">=</span> <span class="s">'-first_name'</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="159">Elements of <tt class="docutils literal"><span class="pre">list_display</span></tt> can also be properties. </font><font id="160">Please note however, that due to the way properties work in Python, setting <tt class="docutils literal"><span class="pre">short_description</span></tt> on a property is only possible when using the <tt class="docutils literal"><span class="pre">property()</span></tt> function and <strong>not</strong> with the <tt class="docutils literal"><span class="pre">@property</span></tt> decorator.</font></p>
<p><font id="161">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">my_property</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span> <span class="o">+</span> <span class="s">' '</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span>
    <span class="n">my_property</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s">"Full name of the person"</span>

    <span class="n">full_name</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">my_property</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'full_name'</span><span class="p">,)</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="162">The field names in <tt class="docutils literal"><span class="pre">list_display</span></tt> will also appear as CSS classes in the HTML output, in the form of <tt class="docutils literal"><span class="pre">column-&lt;field_name&gt;</span></tt> on each <tt class="docutils literal"><span class="pre">&lt;th&gt;</span></tt> element. </font><font id="163">This can be used to set column widths in a CSS file for example.</font></p>
</li>
<li><p class="first"><font id="164">Django will try to interpret every element of <tt class="docutils literal"><span class="pre">list_display</span></tt> in this order:</font></p>
<ul class="simple">
<li><font id="677">A field of the model.</font></li>
<li><font id="678">A callable.</font></li>
<li><font id="679">A string representing a <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> attribute.</font></li>
<li><font id="680">A string representing a model attribute.</font></li>
</ul>
<p><font id="165">For example if you have <tt class="docutils literal"><span class="pre">first_name</span></tt> as a model field and as a <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> attribute, the model field will be used.</font></p>
</li>
</ul>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_display_links">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">list_display_links</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.list_display_links" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="166">Use <tt class="docutils literal"><span class="pre">list_display_links</span></tt> to control if and which fields in <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><tt class="xref py py-attr docutils literal"><span class="pre">list_display</span></tt></a> should be linked to the “change” page for an object.</font></p>
<p><font id="167">By default, the change list page will link the first column – the first field specified in <tt class="docutils literal"><span class="pre">list_display</span></tt> – to the change page for each item. </font><font id="168">But <tt class="docutils literal"><span class="pre">list_display_links</span></tt> lets you change this:</font></p>
<ul>
<li><p class="first"><font id="169">Set it to <tt class="docutils literal"><span class="pre">None</span></tt> to get no links at all.</font></p>
</li>
<li><p class="first"><font id="170">Set it to a list or tuple of fields (in the same format as <tt class="docutils literal"><span class="pre">list_display</span></tt>) whose columns you want converted to links.</font></p>
<p><font id="171">You can specify one or many fields. </font><font id="172">As long as the fields appear in <tt class="docutils literal"><span class="pre">list_display</span></tt>, Django doesn’t care how many (or how few) fields are linked. </font><font id="173">The only requirement is that if you want to use <tt class="docutils literal"><span class="pre">list_display_links</span></tt> in this fashion, you must define <tt class="docutils literal"><span class="pre">list_display</span></tt>.</font></p>
</li>
</ul>
<p><font id="174">In this example, the <tt class="docutils literal"><span class="pre">first_name</span></tt> and <tt class="docutils literal"><span class="pre">last_name</span></tt> fields will be linked on the change list page:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">,</span> <span class="s">'birthday'</span><span class="p">)</span>
    <span class="n">list_display_links</span> <span class="o">=</span> <span class="p">(</span><span class="s">'first_name'</span><span class="p">,</span> <span class="s">'last_name'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="175">In this example, the change list page grid will have no links:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">AuditEntryAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'timestamp'</span><span class="p">,</span> <span class="s">'message'</span><span class="p">)</span>
    <span class="n">list_display_links</span> <span class="o">=</span> <span class="bp">None</span>
</pre></div>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><font id="176"><tt class="docutils literal"><span class="pre">None</span></tt> was added as a valid <tt class="docutils literal"><span class="pre">list_display_links</span></tt> value.</font></p>
</div>
</dd></dl>
<span class="target" id="admin-list-editable"></span><dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_editable">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">list_editable</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.list_editable" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="177">Set <tt class="docutils literal"><span class="pre">list_editable</span></tt> to a list of field names on the model which will allow editing on the change list page. </font><font id="178">That is, fields listed in <tt class="docutils literal"><span class="pre">list_editable</span></tt> will be displayed as form widgets on the change list page, allowing users to edit and save multiple rows at once.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="179">Note</font></p>
<p><font id="180"><tt class="docutils literal"><span class="pre">list_editable</span></tt> interacts with a couple of other options in particular ways; </font><font id="181">you should note the following rules:</font></p>
<ul class="simple">
<li><font id="681">Any field in <tt class="docutils literal"><span class="pre">list_editable</span></tt> must also be in <tt class="docutils literal"><span class="pre">list_display</span></tt>. </font><font id="682">You can’t edit a field that’s not displayed!</font></li>
<li><font id="683">The same field can’t be listed in both <tt class="docutils literal"><span class="pre">list_editable</span></tt> and <tt class="docutils literal"><span class="pre">list_display_links</span></tt> – a field can’t be both a form and a link.</font></li>
</ul>
<p class="last"><font id="182">You’ll get a validation error if either of these rules are broken.</font></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_filter">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">list_filter</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.list_filter" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="183">Set <tt class="docutils literal"><span class="pre">list_filter</span></tt> to activate filters in the right sidebar of the change list page of the admin, as illustrated in the following screenshot:</font></p>
<img alt="../../../_images/users_changelist.png" src="../../../_images/users_changelist.png"/>
<p><font id="184"><tt class="docutils literal"><span class="pre">list_filter</span></tt> should be a list or tuple of elements, where each element should be of one of the following types:</font></p>
<ul>
<li><p class="first"><font id="185">a field name, where the specified field should be either a <tt class="docutils literal"><span class="pre">BooleanField</span></tt>, <tt class="docutils literal"><span class="pre">CharField</span></tt>, <tt class="docutils literal"><span class="pre">DateField</span></tt>, <tt class="docutils literal"><span class="pre">DateTimeField</span></tt>, <tt class="docutils literal"><span class="pre">IntegerField</span></tt>, <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>, for example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="s">'is_staff'</span><span class="p">,</span> <span class="s">'company'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="186">Field names in <tt class="docutils literal"><span class="pre">list_filter</span></tt> can also span relations using the <tt class="docutils literal"><span class="pre">__</span></tt> lookup, for example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">UserAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="s">'company__name'</span><span class="p">,)</span>
</pre></div>
</div>
</li>
<li><p class="first"><font id="187">a class inheriting from <tt class="docutils literal"><span class="pre">django.contrib.admin.SimpleListFilter</span></tt>, which you need to provide the <tt class="docutils literal"><span class="pre">title</span></tt> and <tt class="docutils literal"><span class="pre">parameter_name</span></tt> attributes to and override the <tt class="docutils literal"><span class="pre">lookups</span></tt> and <tt class="docutils literal"><span class="pre">queryset</span></tt> methods, e.g.:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>

<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">class</span> <span class="nc">DecadeBornListFilter</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">SimpleListFilter</span><span class="p">):</span>
    <span class="c"># Human-readable title which will be displayed in the</span>
    <span class="c"># right admin sidebar just above the filter options.</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">'decade born'</span><span class="p">)</span>

    <span class="c"># Parameter for the filter that will be used in the URL query.</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s">'decade'</span>

    <span class="k">def</span> <span class="nf">lookups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">model_admin</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns a list of tuples. The first element in each</span>
<span class="sd">        tuple is the coded value for the option that will</span>
<span class="sd">        appear in the URL query. The second element is the</span>
<span class="sd">        human-readable name for the option that will appear</span>
<span class="sd">        in the right sidebar.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">'80s'</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">'in the eighties'</span><span class="p">)),</span>
            <span class="p">(</span><span class="s">'90s'</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">'in the nineties'</span><span class="p">)),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the filtered queryset based on the value</span>
<span class="sd">        provided in the query string and retrievable via</span>
<span class="sd">        `self.value()`.</span>
<span class="sd">        """</span>
        <span class="c"># Compare the requested value (either '80s' or '90s')</span>
        <span class="c"># to decide how to filter the queryset.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="s">'80s'</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">birthday__gte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                    <span class="n">birthday__lte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1989</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="s">'90s'</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">birthday__gte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                                    <span class="n">birthday__lte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1999</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="n">DecadeBornListFilter</span><span class="p">,)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title"><font id="188">Note</font></p>
<p><font id="189">As a convenience, the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> object is passed to the <tt class="docutils literal"><span class="pre">lookups</span></tt> and <tt class="docutils literal"><span class="pre">queryset</span></tt> methods, for example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">AuthDecadeBornListFilter</span><span class="p">(</span><span class="n">DecadeBornListFilter</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">lookups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">model_admin</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">AuthDecadeBornListFilter</span><span class="p">,</span>
                <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">lookups</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">model_admin</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">AuthDecadeBornListFilter</span><span class="p">,</span>
                <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">queryset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="190">Also as a convenience, the <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> object is passed to the <tt class="docutils literal"><span class="pre">lookups</span></tt> method, for example if you want to base the lookups on the available data:</font></p>
<div class="last highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">AdvancedDecadeBornListFilter</span><span class="p">(</span><span class="n">DecadeBornListFilter</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">lookups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">model_admin</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Only show the lookups if there actually is</span>
<span class="sd">        anyone born in the corresponding decades.</span>
<span class="sd">        """</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="n">model_admin</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">birthday__gte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                      <span class="n">birthday__lte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1989</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">yield</span> <span class="p">(</span><span class="s">'80s'</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">'in the eighties'</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">birthday__gte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                      <span class="n">birthday__lte</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">1999</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">yield</span> <span class="p">(</span><span class="s">'90s'</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">'in the nineties'</span><span class="p">))</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first"><font id="191">a tuple, where the first element is a field name and the second element is a class inheriting from <tt class="docutils literal"><span class="pre">django.contrib.admin.FieldListFilter</span></tt>, for example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">'is_staff'</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">BooleanFieldListFilter</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="192">You can now limit the choices of a related model to the objects involved in that relation using <tt class="docutils literal"><span class="pre">RelatedOnlyFieldListFilter</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">BookAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">'author'</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">RelatedOnlyFieldListFilter</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
<p><font id="193">Assuming <tt class="docutils literal"><span class="pre">author</span></tt> is a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> to a <tt class="docutils literal"><span class="pre">User</span></tt> model, this will limit the <tt class="docutils literal"><span class="pre">list_filter</span></tt> choices to the users who have written a book instead of listing all users.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="194">Note</font></p>
<p class="last"><font id="195">The <tt class="docutils literal"><span class="pre">FieldListFilter</span></tt> API is considered internal and might be changed.</font></p>
</div>
</li>
</ul>
<p><font id="196">It is possible to specify a custom template for rendering a list filter:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">FilterWithCustomTemplate</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">SimpleListFilter</span><span class="p">):</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s">"custom_template.html"</span>
</pre></div>
</div>
<p><font id="197">See the default template provided by django (<tt class="docutils literal"><span class="pre">admin/filter.html</span></tt>) for a concrete example.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_max_show_all">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">list_max_show_all</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.list_max_show_all" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="198">Set <tt class="docutils literal"><span class="pre">list_max_show_all</span></tt> to control how many items can appear on a “Show all” admin change list page. </font><font id="199">The admin will display a “Show all” link on the change list only if the total result count is less than or equal to this setting. </font><font id="200">By default, this is set to <tt class="docutils literal"><span class="pre">200</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_per_page">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">list_per_page</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.list_per_page" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="201">Set <tt class="docutils literal"><span class="pre">list_per_page</span></tt> to control how many items appear on each paginated admin change list page. </font><font id="202">By default, this is set to <tt class="docutils literal"><span class="pre">100</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.list_select_related">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">list_select_related</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.list_select_related" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="203">Set <tt class="docutils literal"><span class="pre">list_select_related</span></tt> to tell Django to use <a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet.select_related" title="django.db.models.query.QuerySet.select_related"><tt class="xref py py-meth docutils literal"><span class="pre">select_related()</span></tt></a> in retrieving the list of objects on the admin change list page. </font><font id="204">This can save you a bunch of database queries.</font></p>
<p><font id="205">The value should be either a boolean, a list or a tuple. </font><font id="206">Default is <tt class="docutils literal"><span class="pre">False</span></tt>.</font></p>
<p><font id="207">When value is <tt class="docutils literal"><span class="pre">True</span></tt>, <tt class="docutils literal"><span class="pre">select_related()</span></tt> will always be called. </font><font id="208">When value is set to <tt class="docutils literal"><span class="pre">False</span></tt>, Django will look at <tt class="docutils literal"><span class="pre">list_display</span></tt> and call <tt class="docutils literal"><span class="pre">select_related()</span></tt> if any <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> is present.</font></p>
<p><font id="209">If you need more fine-grained control, use a tuple (or list) as value for <tt class="docutils literal"><span class="pre">list_select_related</span></tt>. </font><font id="210">Empty tuple will prevent Django from calling <tt class="docutils literal"><span class="pre">select_related</span></tt> at all. </font><font id="211">Any other tuple will be passed directly to <tt class="docutils literal"><span class="pre">select_related</span></tt> as parameters. </font><font id="212">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_select_related</span> <span class="o">=</span> <span class="p">(</span><span class="s">'author'</span><span class="p">,</span> <span class="s">'category'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="213">will call <tt class="docutils literal"><span class="pre">select_related('author',</span> <span class="pre">'category')</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.ordering">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">ordering</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.ordering" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="214">Set <tt class="docutils literal"><span class="pre">ordering</span></tt> to specify how lists of objects should be ordered in the Django admin views. </font><font id="215">This should be a list or tuple in the same format as a model’s <a class="reference internal" href="../../models/options.html#django.db.models.Options.ordering" title="django.db.models.Options.ordering"><tt class="xref py py-attr docutils literal"><span class="pre">ordering</span></tt></a> parameter.</font></p>
<p><font id="216">If this isn’t provided, the Django admin will use the model’s default ordering.</font></p>
<p><font id="217">If you need to specify a dynamic order (for example depending on user or language) you can implement a <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_ordering" title="django.contrib.admin.ModelAdmin.get_ordering"><tt class="xref py py-meth docutils literal"><span class="pre">get_ordering()</span></tt></a> method.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.paginator">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">paginator</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.paginator" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="218">The paginator class to be used for pagination. </font><font id="219">By default, <a class="reference internal" href="../../../topics/pagination.html#django.core.paginator.Paginator" title="django.core.paginator.Paginator"><tt class="xref py py-class docutils literal"><span class="pre">django.core.paginator.Paginator</span></tt></a> is used. </font><font id="220">If the custom paginator class doesn’t have the same constructor interface as <a class="reference internal" href="../../../topics/pagination.html#django.core.paginator.Paginator" title="django.core.paginator.Paginator"><tt class="xref py py-class docutils literal"><span class="pre">django.core.paginator.Paginator</span></tt></a>, you will also need to provide an implementation for <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_paginator" title="django.contrib.admin.ModelAdmin.get_paginator"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.get_paginator()</span></tt></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.prepopulated_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">prepopulated_fields</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.prepopulated_fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="221">Set <tt class="docutils literal"><span class="pre">prepopulated_fields</span></tt> to a dictionary mapping field names to the fields it should prepopulate from:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">prepopulated_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s">"slug"</span><span class="p">:</span> <span class="p">(</span><span class="s">"title"</span><span class="p">,)}</span>
</pre></div>
</div>
<p><font id="222">When set, the given fields will use a bit of JavaScript to populate from the fields assigned. </font><font id="223">The main use for this functionality is to automatically generate the value for <tt class="docutils literal"><span class="pre">SlugField</span></tt> fields from one or more other fields. </font><font id="224">The generated value is produced by concatenating the values of the source fields, and then by transforming that result into a valid slug (e.g. substituting dashes for spaces).</font></p>
<p><font id="225"><tt class="docutils literal"><span class="pre">prepopulated_fields</span></tt> doesn’t accept <tt class="docutils literal"><span class="pre">DateTimeField</span></tt>, <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>, nor <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> fields.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.preserve_filters">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">preserve_filters</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.preserve_filters" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="226">The admin now preserves filters on the list view after creating, editing or deleting an object. </font><font id="227">You can restore the previous behavior of clearing filters by setting this attribute to <tt class="docutils literal"><span class="pre">False</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.radio_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">radio_fields</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.radio_fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="228">By default, Django’s admin uses a select-box interface (&lt;select&gt;) for fields that are <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> or have <tt class="docutils literal"><span class="pre">choices</span></tt> set. </font><font id="229">If a field is present in <tt class="docutils literal"><span class="pre">radio_fields</span></tt>, Django will use a radio-button interface instead. </font><font id="230">Assuming <tt class="docutils literal"><span class="pre">group</span></tt> is a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> on the <tt class="docutils literal"><span class="pre">Person</span></tt> model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">radio_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s">"group"</span><span class="p">:</span> <span class="n">admin</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">}</span>
</pre></div>
</div>
<p><font id="231">You have the choice of using <tt class="docutils literal"><span class="pre">HORIZONTAL</span></tt> or <tt class="docutils literal"><span class="pre">VERTICAL</span></tt> from the <tt class="docutils literal"><span class="pre">django.contrib.admin</span></tt> module.</font></p>
<p><font id="232">Don’t include a field in <tt class="docutils literal"><span class="pre">radio_fields</span></tt> unless it’s a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> or has <tt class="docutils literal"><span class="pre">choices</span></tt> set.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.raw_id_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">raw_id_fields</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.raw_id_fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="233">By default, Django’s admin uses a select-box interface (&lt;select&gt;) for fields that are <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>. </font><font id="234">Sometimes you don’t want to incur the overhead of having to select all the related instances to display in the drop-down.</font></p>
<p><font id="235"><tt class="docutils literal"><span class="pre">raw_id_fields</span></tt> is a list of fields you would like to change into an <tt class="docutils literal"><span class="pre">Input</span></tt> widget for either a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">"newspaper"</span><span class="p">,)</span>
</pre></div>
</div>
<p><font id="236">The <tt class="docutils literal"><span class="pre">raw_id_fields</span></tt> <tt class="docutils literal"><span class="pre">Input</span></tt> widget should contain a primary key if the field is a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> or a comma separated list of values if the field is a <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>. </font><font id="237">The <tt class="docutils literal"><span class="pre">raw_id_fields</span></tt> widget shows a magnifying glass button next to the field which allows users to search for and select a value:</font></p>
<img alt="../../../_images/raw_id_fields.png" src="../../../_images/raw_id_fields.png"/>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.readonly_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">readonly_fields</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.readonly_fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="238">By default the admin shows all fields as editable. </font><font id="239">Any fields in this option (which should be a <tt class="docutils literal"><span class="pre">list</span></tt> or <tt class="docutils literal"><span class="pre">tuple</span></tt>) will display its data as-is and non-editable; </font><font id="240">they are also excluded from the <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a> used for creating and editing. </font><font id="241">Note that when specifying <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.fields</span></tt></a> or <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.fieldsets</span></tt></a> the read-only fields must be present to be shown (they are ignored otherwise).</font></p>
<p><font id="242">If <tt class="docutils literal"><span class="pre">readonly_fields</span></tt> is used without defining explicit ordering through <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.fields</span></tt></a> or <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.fieldsets</span></tt></a> they will be added last after all editable fields.</font></p>
<p><font id="243">A read-only field can not only display data from a model’s field, it can also display the output of a model’s method or a method of the <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> class itself. </font><font id="244">This is very similar to the way <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.list_display</span></tt></a> behaves. </font><font id="245">This provides an easy way to use the admin interface to provide feedback on the status of the objects being edited, for example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.utils.html</span> <span class="kn">import</span> <span class="n">format_html_join</span>
<span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="kn">import</span> <span class="n">mark_safe</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">readonly_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'address_report'</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">address_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
        <span class="c"># assuming get_full_address() returns a list of strings</span>
        <span class="c"># for each line of the address and you want to separate each</span>
        <span class="c"># line by a linebreak</span>
        <span class="k">return</span> <span class="n">format_html_join</span><span class="p">(</span>
            <span class="n">mark_safe</span><span class="p">(</span><span class="s">'&lt;br/&gt;'</span><span class="p">),</span>
            <span class="s">'{}'</span><span class="p">,</span>
            <span class="p">((</span><span class="n">line</span><span class="p">,)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">instance</span><span class="o">.</span><span class="n">get_full_address</span><span class="p">()),</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="s">"&lt;span class='errors'&gt;I can't determine this address.&lt;/span&gt;"</span>

    <span class="c"># short_description functions like a model field's verbose_name</span>
    <span class="n">address_report</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s">"Address"</span>
    <span class="c"># in this example, we have used HTML tags in the output</span>
    <span class="n">address_report</span><span class="o">.</span><span class="n">allow_tags</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.save_as">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">save_as</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.save_as" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="246">Set <tt class="docutils literal"><span class="pre">save_as</span></tt> to enable a “save as” feature on admin change forms.</font></p>
<p><font id="247">Normally, objects have three save options: “Save”, “Save and continue editing” and “Save and add another”. </font><font id="248">If <tt class="docutils literal"><span class="pre">save_as</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt>, “Save and add another” will be replaced by a “Save as” button.</font></p>
<p><font id="249">“Save as” means the object will be saved as a new object (with a new ID), rather than the old object.</font></p>
<p><font id="250">By default, <tt class="docutils literal"><span class="pre">save_as</span></tt> is set to <tt class="docutils literal"><span class="pre">False</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.save_on_top">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">save_on_top</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.save_on_top" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="251">Set <tt class="docutils literal"><span class="pre">save_on_top</span></tt> to add save buttons across the top of your admin change forms.</font></p>
<p><font id="252">Normally, the save buttons appear only at the bottom of the forms. </font><font id="253">If you set <tt class="docutils literal"><span class="pre">save_on_top</span></tt>, the buttons will appear both on the top and the bottom.</font></p>
<p><font id="254">By default, <tt class="docutils literal"><span class="pre">save_on_top</span></tt> is set to <tt class="docutils literal"><span class="pre">False</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.search_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">search_fields</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.search_fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="255">Set <tt class="docutils literal"><span class="pre">search_fields</span></tt> to enable a search box on the admin change list page. </font><font id="256">This should be set to a list of field names that will be searched whenever somebody submits a search query in that text box.</font></p>
<p><font id="257">These fields should be some kind of text field, such as <tt class="docutils literal"><span class="pre">CharField</span></tt> or <tt class="docutils literal"><span class="pre">TextField</span></tt>. </font><font id="258">You can also perform a related lookup on a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> with the lookup API “follow” notation:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'foreign_key__related_fieldname'</span><span class="p">]</span>
</pre></div>
</div>
<p><font id="259">For example, if you have a blog entry with an author, the following definition would enable search blog entries by the email address of the author:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'user__email'</span><span class="p">]</span>
</pre></div>
</div>
<p><font id="260">When somebody does a search in the admin search box, Django splits the search query into words and returns all objects that contain each of the words, case insensitive, where each word must be in at least one of <tt class="docutils literal"><span class="pre">search_fields</span></tt>. </font><font id="261">For example, if <tt class="docutils literal"><span class="pre">search_fields</span></tt> is set to <tt class="docutils literal"><span class="pre">['first_name',</span> <span class="pre">'last_name']</span></tt> and a user searches for <tt class="docutils literal"><span class="pre">john</span> <span class="pre">lennon</span></tt>, Django will do the equivalent of this SQL <tt class="docutils literal"><span class="pre">WHERE</span></tt> clause:</font></p>
<div class="highlight-python"><div class="highlight"><pre>WHERE (first_name ILIKE '%john%' OR last_name ILIKE '%john%')
AND (first_name ILIKE '%lennon%' OR last_name ILIKE '%lennon%')
</pre></div>
</div>
<p><font id="262">For faster and/or more restrictive searches, prefix the field name with an operator:</font></p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">^</span></tt></dt>
<dd><p class="first"><font id="263">Matches the beginning of the field. </font><font id="264">For example, if <tt class="docutils literal"><span class="pre">search_fields</span></tt> is set to <tt class="docutils literal"><span class="pre">['^first_name',</span> <span class="pre">'^last_name']</span></tt> and a user searches for <tt class="docutils literal"><span class="pre">john</span> <span class="pre">lennon</span></tt>, Django will do the equivalent of this SQL <tt class="docutils literal"><span class="pre">WHERE</span></tt> clause:</font></p>
<div class="highlight-python"><div class="highlight"><pre>WHERE (first_name ILIKE 'john%' OR last_name ILIKE 'john%')
AND (first_name ILIKE 'lennon%' OR last_name ILIKE 'lennon%')
</pre></div>
</div>
<p class="last"><font id="265">This query is more efficient than the normal <tt class="docutils literal"><span class="pre">'%john%'</span></tt> query, because the database only needs to check the beginning of a column’s data, rather than seeking through the entire column’s data. </font><font id="266">Plus, if the column has an index on it, some databases may be able to use the index for this query, even though it’s a <tt class="docutils literal"><span class="pre">LIKE</span></tt> query.</font></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">=</span></tt></dt>
<dd><p class="first"><font id="267">Matches exactly, case-insensitive. </font><font id="268">For example, if <tt class="docutils literal"><span class="pre">search_fields</span></tt> is set to <tt class="docutils literal"><span class="pre">['=first_name',</span> <span class="pre">'=last_name']</span></tt> and a user searches for <tt class="docutils literal"><span class="pre">john</span> <span class="pre">lennon</span></tt>, Django will do the equivalent of this SQL <tt class="docutils literal"><span class="pre">WHERE</span></tt> clause:</font></p>
<div class="highlight-python"><div class="highlight"><pre>WHERE (first_name ILIKE 'john' OR last_name ILIKE 'john')
AND (first_name ILIKE 'lennon' OR last_name ILIKE 'lennon')
</pre></div>
</div>
<p class="last"><font id="269">Note that the query input is split by spaces, so, following this example, it’s currently not possible to search for all records in which <tt class="docutils literal"><span class="pre">first_name</span></tt> is exactly <tt class="docutils literal"><span class="pre">'john</span> <span class="pre">winston'</span></tt> (containing a space).</font></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">@</span></tt></dt>
<dd>Performs a full-text match. This is like the default search method but
uses an index. Currently this is only available for MySQL.</dd>
</dl>
<p><font id="270">If you need to customize search you can use <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_search_results" title="django.contrib.admin.ModelAdmin.get_search_results"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.get_search_results()</span></tt></a> to provide additional or alternate search behavior.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.show_full_result_count">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">show_full_result_count</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.show_full_result_count" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="271">Set <tt class="docutils literal"><span class="pre">show_full_result_count</span></tt> to control whether the full count of objects should be displayed on a filtered admin page (e.g. <tt class="docutils literal"><span class="pre">99</span> <span class="pre">results</span> <span class="pre">(103</span> <span class="pre">total)</span></tt>). </font><font id="272">If this option is set to <tt class="docutils literal"><span class="pre">False</span></tt>, a text like <tt class="docutils literal"><span class="pre">99</span> <span class="pre">results</span> <span class="pre">(Show</span> <span class="pre">all)</span></tt> is displayed instead.</font></p>
<p><font id="273">The default of <tt class="docutils literal"><span class="pre">show_full_result_count=True</span></tt> generates a query to perform a full count on the table which can be expensive if the table contains a large number of rows.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.view_on_site">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">view_on_site</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.view_on_site" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="274">Set <tt class="docutils literal"><span class="pre">view_on_site</span></tt> to control whether or not to display the “View on site” link. </font><font id="275">This link should bring you to a URL where you can display the saved object.</font></p>
<p><font id="276">This value can be either a boolean flag or a callable. </font><font id="277">If <tt class="docutils literal"><span class="pre">True</span></tt> (the default), the object’s <a class="reference internal" href="../../models/instances.html#django.db.models.Model.get_absolute_url" title="django.db.models.Model.get_absolute_url"><tt class="xref py py-meth docutils literal"><span class="pre">get_absolute_url()</span></tt></a> method will be used to generate the url.</font></p>
<p><font id="278">If your model has a <a class="reference internal" href="../../models/instances.html#django.db.models.Model.get_absolute_url" title="django.db.models.Model.get_absolute_url"><tt class="xref py py-meth docutils literal"><span class="pre">get_absolute_url()</span></tt></a> method but you don’t want the “View on site” button to appear, you only need to set <tt class="docutils literal"><span class="pre">view_on_site</span></tt> to <tt class="docutils literal"><span class="pre">False</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">view_on_site</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
<p><font id="279">In case it is a callable, it accepts the model instance as a parameter. </font><font id="280">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">view_on_site</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'http://example.com'</span> <span class="o">+</span> <span class="n">reverse</span><span class="p">(</span><span class="s">'person-detail'</span><span class="p">,</span>
                                              <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'slug'</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">slug</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>
<div class="section" id="s-custom-template-options">
<span id="custom-template-options"></span><h4><font id="663">Custom template options</font><a class="headerlink" href="index.html#custom-template-options" title="Permalink to this headline">¶</a></h4>
<p><font id="281">The <a class="reference internal" href="index.html#admin-overriding-templates"><em>Overriding admin templates</em></a> section describes how to override or extend the default admin templates. </font><font id="282">Use the following options to override the default templates used by the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin</span></tt></a> views:</font></p>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.add_form_template">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">add_form_template</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.add_form_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="283">Path to a custom template, used by <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.add_view" title="django.contrib.admin.ModelAdmin.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">add_view()</span></tt></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.change_form_template">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">change_form_template</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.change_form_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="284">Path to a custom template, used by <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.change_view" title="django.contrib.admin.ModelAdmin.change_view"><tt class="xref py py-meth docutils literal"><span class="pre">change_view()</span></tt></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.change_list_template">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">change_list_template</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.change_list_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="285">Path to a custom template, used by <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.changelist_view" title="django.contrib.admin.ModelAdmin.changelist_view"><tt class="xref py py-meth docutils literal"><span class="pre">changelist_view()</span></tt></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.delete_confirmation_template">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">delete_confirmation_template</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.delete_confirmation_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="286">Path to a custom template, used by <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.delete_view" title="django.contrib.admin.ModelAdmin.delete_view"><tt class="xref py py-meth docutils literal"><span class="pre">delete_view()</span></tt></a> for displaying a confirmation page when deleting one or more objects.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.delete_selected_confirmation_template">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">delete_selected_confirmation_template</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.delete_selected_confirmation_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="287">Path to a custom template, used by the <tt class="docutils literal"><span class="pre">delete_selected</span></tt> action method for displaying a confirmation page when deleting one or more objects. </font><font id="288">See the <a class="reference internal" href="actions.html"><em>actions documentation</em></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.ModelAdmin.object_history_template">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">object_history_template</tt><a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.object_history_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="289">Path to a custom template, used by <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.history_view" title="django.contrib.admin.ModelAdmin.history_view"><tt class="xref py py-meth docutils literal"><span class="pre">history_view()</span></tt></a>.</font></p>
</dd></dl>
</div>
</div>
<div class="section" id="s-modeladmin-methods">
<span id="s-model-admin-methods"></span><span id="modeladmin-methods"></span><span id="model-admin-methods"></span><h3><font id="638">ModelAdmin</font> methods</h3>
<div class="admonition warning">
<p class="first admonition-title"><font id="290">Warning</font></p>
<p class="last"><font id="291"><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.save_model" title="django.contrib.admin.ModelAdmin.save_model"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.save_model()</span></tt></a> and <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.delete_model" title="django.contrib.admin.ModelAdmin.delete_model"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.delete_model()</span></tt></a> must save/delete the object, they are not for veto purposes, rather they allow you to perform extra operations.</font></p>
</div>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.save_model">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">save_model</tt>(<em>request</em>, <em>obj</em>, <em>form</em>, <em>change</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.save_model" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="292">The <tt class="docutils literal"><span class="pre">save_model</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt>, a model instance, a <tt class="docutils literal"><span class="pre">ModelForm</span></tt> instance and a boolean value based on whether it is adding or changing the object. </font><font id="293">Here you can do any pre- or post-save operations.</font></p>
<p><font id="294">For example to attach <tt class="docutils literal"><span class="pre">request.user</span></tt> to the object prior to saving:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">save_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">change</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.delete_model">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">delete_model</tt>(<em>request</em>, <em>obj</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.delete_model" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="295">The <tt class="docutils literal"><span class="pre">delete_model</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and a model instance. </font><font id="296">Use this method to do pre- or post-delete operations.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.save_formset">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">save_formset</tt>(<em>request</em>, <em>form</em>, <em>formset</em>, <em>change</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.save_formset" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="297">The <tt class="docutils literal"><span class="pre">save_formset</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt>, the parent <tt class="docutils literal"><span class="pre">ModelForm</span></tt> instance and a boolean value based on whether it is adding or changing the parent object.</font></p>
<p><font id="298">For example, to attach <tt class="docutils literal"><span class="pre">request.user</span></tt> to each changed formset model instance:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">save_formset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">formset</span><span class="p">,</span> <span class="n">change</span><span class="p">):</span>
        <span class="n">instances</span> <span class="o">=</span> <span class="n">formset</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">formset</span><span class="o">.</span><span class="n">deleted_objects</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">formset</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">()</span>
</pre></div>
</div>
<p><font id="299">See also <a class="reference internal" href="../../../topics/forms/modelforms.html#saving-objects-in-the-formset"><em>Saving objects in the formset</em></a>.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_ordering">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_ordering</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_ordering" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="300">The <tt class="docutils literal"><span class="pre">get_ordering</span></tt> method takes a``request`` as parameter and is expected to return a <tt class="docutils literal"><span class="pre">list</span></tt> or <tt class="docutils literal"><span class="pre">tuple</span></tt> for ordering similar to the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.ordering" title="django.contrib.admin.ModelAdmin.ordering"><tt class="xref py py-attr docutils literal"><span class="pre">ordering</span></tt></a> attribute. </font><font id="301">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get_ordering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'rank'</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s">'name'</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_search_results">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_search_results</tt>(<em>request</em>, <em>queryset</em>, <em>search_term</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_search_results" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="302">The <tt class="docutils literal"><span class="pre">get_search_results</span></tt> method modifies the list of objects displayed in to those that match the provided search term. </font><font id="303">It accepts the request, a queryset that applies the current filters, and the user-provided search term. </font><font id="304">It returns a tuple containing a queryset modified to implement the search, and a boolean indicating if the results may contain duplicates.</font></p>
<p><font id="305">The default implementation searches the fields named in <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.search_fields" title="django.contrib.admin.ModelAdmin.search_fields"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.search_fields</span></tt></a>.</font></p>
<p><font id="306">This method may be overridden with your own custom search method. </font><font id="307">For example, you might wish to search by an integer field, or use an external tool such as Solr or Haystack. </font><font id="308">You must establish if the queryset changes implemented by your search method may introduce duplicates into the results, and return <tt class="docutils literal"><span class="pre">True</span></tt> in the second element of the return value.</font></p>
<p><font id="309">For example, to enable search by integer field, you could use:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'age'</span><span class="p">)</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'name'</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">get_search_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">search_term</span><span class="p">):</span>
        <span class="n">queryset</span><span class="p">,</span> <span class="n">use_distinct</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PersonAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_search_results</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">search_term</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">search_term_as_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">search_term</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">queryset</span> <span class="o">|=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">age</span><span class="o">=</span><span class="n">search_term_as_int</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">queryset</span><span class="p">,</span> <span class="n">use_distinct</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.save_related">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">save_related</tt>(<em>request</em>, <em>form</em>, <em>formsets</em>, <em>change</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.save_related" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="310">The <tt class="docutils literal"><span class="pre">save_related</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt>, the parent <tt class="docutils literal"><span class="pre">ModelForm</span></tt> instance, the list of inline formsets and a boolean value based on whether the parent is being added or changed. </font><font id="311">Here you can do any pre- or post-save operations for objects related to the parent. </font><font id="312">Note that at this point the parent object and its form have already been saved.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_readonly_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_readonly_fields</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_readonly_fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="313">The <tt class="docutils literal"><span class="pre">get_readonly_fields</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and the <tt class="docutils literal"><span class="pre">obj</span></tt> being edited (or <tt class="docutils literal"><span class="pre">None</span></tt> on an add form) and is expected to return a <tt class="docutils literal"><span class="pre">list</span></tt> or <tt class="docutils literal"><span class="pre">tuple</span></tt> of field names that will be displayed as read-only, as described above in the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.readonly_fields</span></tt></a> section.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_prepopulated_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_prepopulated_fields</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_prepopulated_fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="314">The <tt class="docutils literal"><span class="pre">get_prepopulated_fields</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and the <tt class="docutils literal"><span class="pre">obj</span></tt> being edited (or <tt class="docutils literal"><span class="pre">None</span></tt> on an add form) and is expected to return a <tt class="docutils literal"><span class="pre">dictionary</span></tt>, as described above in the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.prepopulated_fields" title="django.contrib.admin.ModelAdmin.prepopulated_fields"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.prepopulated_fields</span></tt></a> section.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_list_display">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_list_display</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_list_display" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="315">The <tt class="docutils literal"><span class="pre">get_list_display</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and is expected to return a <tt class="docutils literal"><span class="pre">list</span></tt> or <tt class="docutils literal"><span class="pre">tuple</span></tt> of field names that will be displayed on the changelist view as described above in the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.list_display" title="django.contrib.admin.ModelAdmin.list_display"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.list_display</span></tt></a> section.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_list_display_links">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_list_display_links</tt>(<em>request</em>, <em>list_display</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_list_display_links" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="316">The <tt class="docutils literal"><span class="pre">get_list_display_links</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and the <tt class="docutils literal"><span class="pre">list</span></tt> or <tt class="docutils literal"><span class="pre">tuple</span></tt> returned by <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_list_display" title="django.contrib.admin.ModelAdmin.get_list_display"><tt class="xref py py-meth docutils literal"><span class="pre">ModelAdmin.get_list_display()</span></tt></a>. </font><font id="317">It is expected to return either <tt class="docutils literal"><span class="pre">None</span></tt> or a <tt class="docutils literal"><span class="pre">list</span></tt> or <tt class="docutils literal"><span class="pre">tuple</span></tt> of field names on the changelist that will be linked to the change view, as described in the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.list_display_links" title="django.contrib.admin.ModelAdmin.list_display_links"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.list_display_links</span></tt></a> section.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><font id="318"><tt class="docutils literal"><span class="pre">None</span></tt> was added as a valid <tt class="docutils literal"><span class="pre">get_list_display_links()</span></tt> return value.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_fields</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_fields" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="319">The <tt class="docutils literal"><span class="pre">get_fields</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and the <tt class="docutils literal"><span class="pre">obj</span></tt> being edited (or <tt class="docutils literal"><span class="pre">None</span></tt> on an add form) and is expected to return a list of fields, as described above in the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.fields</span></tt></a> section.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_fieldsets">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_fieldsets</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_fieldsets" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="320">The <tt class="docutils literal"><span class="pre">get_fieldsets</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and the <tt class="docutils literal"><span class="pre">obj</span></tt> being edited (or <tt class="docutils literal"><span class="pre">None</span></tt> on an add form) and is expected to return a list of two-tuples, in which each two-tuple represents a <tt class="docutils literal"><span class="pre">&lt;fieldset&gt;</span></tt> on the admin form page, as described above in the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.fieldsets</span></tt></a> section.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_list_filter">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_list_filter</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_list_filter" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="321">The <tt class="docutils literal"><span class="pre">get_list_filter</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and is expected to return the same kind of sequence type as for the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.list_filter" title="django.contrib.admin.ModelAdmin.list_filter"><tt class="xref py py-attr docutils literal"><span class="pre">list_filter</span></tt></a> attribute.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_search_fields">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_search_fields</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_search_fields" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="322">The <tt class="docutils literal"><span class="pre">get_search_fields</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and is expected to return the same kind of sequence type as for the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.search_fields" title="django.contrib.admin.ModelAdmin.search_fields"><tt class="xref py py-attr docutils literal"><span class="pre">search_fields</span></tt></a> attribute.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_inline_instances">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_inline_instances</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_inline_instances" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="323">The <tt class="docutils literal"><span class="pre">get_inline_instances</span></tt> method is given the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> and the <tt class="docutils literal"><span class="pre">obj</span></tt> being edited (or <tt class="docutils literal"><span class="pre">None</span></tt> on an add form) and is expected to return a <tt class="docutils literal"><span class="pre">list</span></tt> or <tt class="docutils literal"><span class="pre">tuple</span></tt> of <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">InlineModelAdmin</span></tt></a> objects, as described below in the <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">InlineModelAdmin</span></tt></a> section. </font><font id="324">For example, the following would return inlines without the default filtering based on add, change, and delete permissions:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">(</span><span class="n">MyInline</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">get_inline_instances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">inline</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="p">)</span> <span class="k">for</span> <span class="n">inline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inlines</span><span class="p">]</span>
</pre></div>
</div>
<p><font id="325">If you override this method, make sure that the returned inlines are instances of the classes defined in <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.inlines" title="django.contrib.admin.ModelAdmin.inlines"><tt class="xref py py-attr docutils literal"><span class="pre">inlines</span></tt></a> or you might encounter a “Bad Request” error when adding related objects.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_urls">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_urls</tt>()<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_urls" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="326">The <tt class="docutils literal"><span class="pre">get_urls</span></tt> method on a <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> returns the URLs to be used for that ModelAdmin in the same way as a URLconf. </font><font id="327">Therefore you can extend them as documented in <a class="reference internal" href="../../../topics/http/urls.html"><em>URL dispatcher</em></a>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_urls</span><span class="p">()</span>
        <span class="n">my_urls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">url</span><span class="p">(</span><span class="s">r'^my_view/$'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">my_view</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">my_urls</span> <span class="o">+</span> <span class="n">urls</span>

    <span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="c"># ...</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
           <span class="c"># Include common variables for rendering the admin template.</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="o">.</span><span class="n">each_context</span><span class="p">(</span><span class="n">request</span><span class="p">),</span>
           <span class="c"># Anything else you want in the context...</span>
           <span class="n">key</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">TemplateResponse</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">"sometemplate.html"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="328">If you want to use the admin layout, extend from <tt class="docutils literal"><span class="pre">admin/base_site.html</span></tt>:</font></p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"admin/base_site.html"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
...
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title"><font id="329">Note</font></p>
<p><font id="330">Notice that the custom patterns are included <em>before</em> the regular admin URLs: the admin URL patterns are very permissive and will match nearly anything, so you’ll usually want to prepend your custom URLs to the built-in ones.</font></p>
<p class="last"><font id="331">In this example, <tt class="docutils literal"><span class="pre">my_view</span></tt> will be accessed at <tt class="docutils literal"><span class="pre">/admin/myapp/mymodel/my_view/</span></tt> (assuming the admin URLs are included at <tt class="docutils literal"><span class="pre">/admin/</span></tt>.)</font></p>
</div>
<p><font id="332">但是, &nbsp;上述定义的函数<tt class="docutils literal"><span class="pre">self.my_view</span></tt> &nbsp;将遇到两个问题：</font></p>
<ul class="simple">
<li><font id="684">It will <em>not</em> perform any permission checks, so it will be accessible to the general public.</font></li>
<li><font id="685">It will <em>not</em> provide any header details to prevent caching. </font><font id="686">This means if the page retrieves data from the database, and caching middleware is active, the page could show outdated information.</font></li>
</ul>
<p><font id="333">Since this is usually not what you want, Django provides a convenience wrapper to check permissions and mark the view as non-cacheable. </font><font id="334">This wrapper is <tt class="docutils literal"><span class="pre">AdminSite.admin_view()</span></tt> (i.e. <tt class="docutils literal"><span class="pre">self.admin_site.admin_view</span></tt> inside a <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> instance); </font><font id="335">use it like so:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">urls</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_urls</span><span class="p">()</span>
        <span class="n">my_urls</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">url</span><span class="p">(</span><span class="s">r'^my_view/$'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="o">.</span><span class="n">admin_view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_view</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">my_urls</span> <span class="o">+</span> <span class="n">urls</span>
</pre></div>
</div>
<p><font id="336">Notice the wrapped view in the fifth line above:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r'^my_view/$'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="o">.</span><span class="n">admin_view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_view</span><span class="p">))</span>
</pre></div>
</div>
<p><font id="337">This wrapping will protect <tt class="docutils literal"><span class="pre">self.my_view</span></tt> from unauthorized access and will apply the <tt class="docutils literal"><span class="pre">django.views.decorators.cache.never_cache</span></tt> decorator to make sure it is not cached if the cache middleware is active.</font></p>
<p><font id="338">If the page is cacheable, but you still want the permission check to be performed, you can pass a <tt class="docutils literal"><span class="pre">cacheable=True</span></tt> argument to <tt class="docutils literal"><span class="pre">AdminSite.admin_view()</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r'^my_view/$'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">admin_site</span><span class="o">.</span><span class="n">admin_view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_view</span><span class="p">,</span> <span class="n">cacheable</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_form">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_form</tt>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_form" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="339">Returns a <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a> class for use in the admin add and change views, see <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.add_view" title="django.contrib.admin.ModelAdmin.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">add_view()</span></tt></a> and <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.change_view" title="django.contrib.admin.ModelAdmin.change_view"><tt class="xref py py-meth docutils literal"><span class="pre">change_view()</span></tt></a>.</font></p>
<p><font id="340">The base implementation uses <a class="reference internal" href="../../forms/models.html#django.forms.models.modelform_factory" title="django.forms.models.modelform_factory"><tt class="xref py py-func docutils literal"><span class="pre">modelform_factory()</span></tt></a> to subclass <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.form" title="django.contrib.admin.ModelAdmin.form"><tt class="xref py py-attr docutils literal"><span class="pre">form</span></tt></a>, modified by attributes such as <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><tt class="xref py py-attr docutils literal"><span class="pre">fields</span></tt></a> and <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.exclude" title="django.contrib.admin.ModelAdmin.exclude"><tt class="xref py py-attr docutils literal"><span class="pre">exclude</span></tt></a>. </font><font id="341">So, for example, if you wanted to offer additional fields to superusers, you could swap in a different base form like so:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">'form'</span><span class="p">]</span> <span class="o">=</span> <span class="n">MySuperuserForm</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="342">You may also simply return a custom <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a> class directly.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_formsets">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_formsets</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_formsets" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><font id="343"><span class="versionmodified">Deprecated since version 1.7: </span></font><font id="344">Use <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_formsets_with_inlines" title="django.contrib.admin.ModelAdmin.get_formsets_with_inlines"><tt class="xref py py-meth docutils literal"><span class="pre">get_formsets_with_inlines()</span></tt></a> instead.</font></p>
</div>
<p><font id="345">Yields <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">InlineModelAdmin</span></tt></a>s for use in admin add and change views.</font></p>
<p><font id="346">For example if you wanted to display a particular inline only in the change view, you could override <tt class="docutils literal"><span class="pre">get_formsets</span></tt> as follows:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">MyInline</span><span class="p">,</span> <span class="n">SomeOtherInline</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_formsets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">inline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_inline_instances</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
            <span class="c"># hide MyInline in the add view</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inline</span><span class="p">,</span> <span class="n">MyInline</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">yield</span> <span class="n">inline</span><span class="o">.</span><span class="n">get_formset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_formsets_with_inlines">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_formsets_with_inlines</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_formsets_with_inlines" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="347">Yields (<tt class="docutils literal"><span class="pre">FormSet</span></tt>, <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">InlineModelAdmin</span></tt></a>) pairs for use in admin add and change views.</font></p>
<p><font id="348">For example if you wanted to display a particular inline only in the change view, you could override <tt class="docutils literal"><span class="pre">get_formsets_with_inlines</span></tt> as follows:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">MyInline</span><span class="p">,</span> <span class="n">SomeOtherInline</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_formsets_with_inlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">inline</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_inline_instances</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
            <span class="c"># hide MyInline in the add view</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inline</span><span class="p">,</span> <span class="n">MyInline</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">yield</span> <span class="n">inline</span><span class="o">.</span><span class="n">get_formset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">),</span> <span class="n">inline</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.formfield_for_foreignkey">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">formfield_for_foreignkey</tt>(<em>db_field</em>, <em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.formfield_for_foreignkey" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="349">The <tt class="docutils literal"><span class="pre">formfield_for_foreignkey</span></tt> method on a <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> allows you to override the default formfield for a foreign keys field. </font><font id="350">For example, to return a subset of objects for this foreign key field based on the user:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">formfield_for_foreignkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">db_field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">"car"</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">"queryset"</span><span class="p">]</span> <span class="o">=</span> <span class="n">Car</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">formfield_for_foreignkey</span><span class="p">(</span><span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="351">This uses the <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> instance to filter the <tt class="docutils literal"><span class="pre">Car</span></tt> foreign key field to only display the cars owned by the <tt class="docutils literal"><span class="pre">User</span></tt> instance.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.formfield_for_manytomany">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">formfield_for_manytomany</tt>(<em>db_field</em>, <em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.formfield_for_manytomany" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="352">Like the <tt class="docutils literal"><span class="pre">formfield_for_foreignkey</span></tt> method, the <tt class="docutils literal"><span class="pre">formfield_for_manytomany</span></tt> method can be overridden to change the default formfield for a many to many field. </font><font id="353">For example, if an owner can own multiple cars and cars can belong to multiple owners – a many to many relationship – you could filter the <tt class="docutils literal"><span class="pre">Car</span></tt> foreign key field to only display the cars owned by the <tt class="docutils literal"><span class="pre">User</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">formfield_for_manytomany</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">db_field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">"cars"</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">"queryset"</span><span class="p">]</span> <span class="o">=</span> <span class="n">Car</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">formfield_for_manytomany</span><span class="p">(</span><span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.formfield_for_choice_field">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">formfield_for_choice_field</tt>(<em>db_field</em>, <em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.formfield_for_choice_field" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="354">Like the <tt class="docutils literal"><span class="pre">formfield_for_foreignkey</span></tt> and <tt class="docutils literal"><span class="pre">formfield_for_manytomany</span></tt> methods, the <tt class="docutils literal"><span class="pre">formfield_for_choice_field</span></tt> method can be overridden to change the default formfield for a field that has declared choices. </font><font id="355">For example, if the choices available to a superuser should be different than those available to regular staff, you could proceed as follows:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">formfield_for_choice_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">db_field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">"status"</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">'choices'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="s">'accepted'</span><span class="p">,</span> <span class="s">'Accepted'</span><span class="p">),</span>
                <span class="p">(</span><span class="s">'denied'</span><span class="p">,</span> <span class="s">'Denied'</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s">'choices'</span><span class="p">]</span> <span class="o">+=</span> <span class="p">((</span><span class="s">'ready'</span><span class="p">,</span> <span class="s">'Ready for deployment'</span><span class="p">),)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">formfield_for_choice_field</span><span class="p">(</span><span class="n">db_field</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title"><font id="356">Note</font></p>
<p class="last"><font id="357">Any <tt class="docutils literal"><span class="pre">choices</span></tt> attribute set on the formfield will limited to the form field only. </font><font id="358">If the corresponding field on the model has choices set, the choices provided to the form must be a valid subset of those choices, otherwise the form submission will fail with a <a class="reference internal" href="../../exceptions.html#django.core.exceptions.ValidationError" title="django.core.exceptions.ValidationError"><tt class="xref py py-exc docutils literal"><span class="pre">ValidationError</span></tt></a> when the model itself is validated before saving.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_changelist">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_changelist</tt>(<em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_changelist" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="359">Returns the <tt class="docutils literal"><span class="pre">Changelist</span></tt> class to be used for listing. </font><font id="360">By default, <tt class="docutils literal"><span class="pre">django.contrib.admin.views.main.ChangeList</span></tt> is used. </font><font id="361">By inheriting this class you can change the behavior of the listing.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_changelist_form">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_changelist_form</tt>(<em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_changelist_form" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="362">Returns a <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a> class for use in the <tt class="docutils literal"><span class="pre">Formset</span></tt> on the changelist page. </font><font id="363">To use a custom form, for example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_changelist_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MyForm</span>
</pre></div>
</div>
<div class="admonition-note admonition">
<p class="first admonition-title"><font id="364">Note</font></p>
<p class="last"><font id="365">If you define the <tt class="docutils literal"><span class="pre">Meta.model</span></tt> attribute on a <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a>, you must also define the <tt class="docutils literal"><span class="pre">Meta.fields</span></tt> attribute (or the <tt class="docutils literal"><span class="pre">Meta.exclude</span></tt> attribute). </font><font id="366">However, <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> ignores this value, overriding it with the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.list_editable" title="django.contrib.admin.ModelAdmin.list_editable"><tt class="xref py py-attr docutils literal"><span class="pre">ModelAdmin.list_editable</span></tt></a> attribute. </font><font id="367">The easiest solution is to omit the <tt class="docutils literal"><span class="pre">Meta.model</span></tt> attribute, since <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> will provide the correct model to use.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_changelist_formset">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_changelist_formset</tt>(<em>request</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_changelist_formset" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="368">Returns a <a class="reference internal" href="../../../topics/forms/modelforms.html#model-formsets"><em>ModelFormSet</em></a> class for use on the changelist page if <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.list_editable" title="django.contrib.admin.ModelAdmin.list_editable"><tt class="xref py py-attr docutils literal"><span class="pre">list_editable</span></tt></a> is used. </font><font id="369">To use a custom formset, for example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.forms.models</span> <span class="kn">import</span> <span class="n">BaseModelFormSet</span>

<span class="k">class</span> <span class="nc">MyAdminFormSet</span><span class="p">(</span><span class="n">BaseModelFormSet</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_changelist_formset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">'formset'</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyAdminFormSet</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_changelist_formset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_add_permission">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">has_add_permission</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.has_add_permission" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="370">Should return <tt class="docutils literal"><span class="pre">True</span></tt> if adding an object is permitted, <tt class="docutils literal"><span class="pre">False</span></tt> otherwise.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_change_permission">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">has_change_permission</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.has_change_permission" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="371">Should return <tt class="docutils literal"><span class="pre">True</span></tt> if editing obj is permitted, <tt class="docutils literal"><span class="pre">False</span></tt> otherwise. </font><font id="372">If obj is <tt class="docutils literal"><span class="pre">None</span></tt>, should return <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt> to indicate whether editing of objects of this type is permitted in general (e.g., <tt class="docutils literal"><span class="pre">False</span></tt> will be interpreted as meaning that the current user is not permitted to edit any object of this type).</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_delete_permission">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">has_delete_permission</tt>(<em>request</em>, <em>obj=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.has_delete_permission" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="373">Should return <tt class="docutils literal"><span class="pre">True</span></tt> if deleting obj is permitted, <tt class="docutils literal"><span class="pre">False</span></tt> otherwise. </font><font id="374">If obj is <tt class="docutils literal"><span class="pre">None</span></tt>, should return <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt> to indicate whether deleting objects of this type is permitted in general (e.g., <tt class="docutils literal"><span class="pre">False</span></tt> will be interpreted as meaning that the current user is not permitted to delete any object of this type).</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.has_module_permission">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">has_module_permission</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.has_module_permission" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="375">Should return <tt class="docutils literal"><span class="pre">True</span></tt> if displaying the module on the admin index page and accessing the module’s index page is permitted, <tt class="docutils literal"><span class="pre">False</span></tt> otherwise. </font><font id="376">Uses <a class="reference internal" href="../auth.html#django.contrib.auth.models.User.has_module_perms" title="django.contrib.auth.models.User.has_module_perms"><tt class="xref py py-meth docutils literal"><span class="pre">User.has_module_perms()</span></tt></a> by default. </font><font id="377">Overriding it does not restrict access to the add, change or delete views, <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.has_add_permission" title="django.contrib.admin.ModelAdmin.has_add_permission"><tt class="xref py py-meth docutils literal"><span class="pre">has_add_permission()</span></tt></a>, <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.has_change_permission" title="django.contrib.admin.ModelAdmin.has_change_permission"><tt class="xref py py-meth docutils literal"><span class="pre">has_change_permission()</span></tt></a>, and <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.has_delete_permission" title="django.contrib.admin.ModelAdmin.has_delete_permission"><tt class="xref py py-meth docutils literal"><span class="pre">has_delete_permission()</span></tt></a> should be used for that.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_queryset">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_queryset</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_queryset" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="378">The <tt class="docutils literal"><span class="pre">get_queryset</span></tt> method on a <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> returns a <a class="reference internal" href="../../models/querysets.html#django.db.models.query.QuerySet" title="django.db.models.query.QuerySet"><tt class="xref py py-class docutils literal"><span class="pre">QuerySet</span></tt></a> of all model instances that can be edited by the admin site. </font><font id="379">One use case for overriding this method is to show objects owned by the logged-in user:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">qs</span>
        <span class="k">return</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">author</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.message_user">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">message_user</tt>(<em>request</em>, <em>message</em>, <em>level=messages.INFO</em>, <em>extra_tags=''</em>, <em>fail_silently=False</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.message_user" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="380">Sends a message to the user using the <a class="reference internal" href="../messages.html#module-django.contrib.messages" title="django.contrib.messages: Provides cookie- and session-based temporary message storage."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.messages</span></tt></a> backend. </font><font id="381">See the <a class="reference internal" href="actions.html#custom-admin-action"><em>custom ModelAdmin example</em></a>.</font></p>
<p><font id="382">Keyword arguments allow you to change the message level, add extra CSS tags, or fail silently if the <tt class="docutils literal"><span class="pre">contrib.messages</span></tt> framework is not installed. </font><font id="383">These keyword arguments match those for <a class="reference internal" href="../messages.html#django.contrib.messages.add_message" title="django.contrib.messages.add_message"><tt class="xref py py-func docutils literal"><span class="pre">django.contrib.messages.add_message()</span></tt></a>, see that function’s documentation for more details. </font><font id="384">One difference is that the level may be passed as a string label in addition to integer/constant.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_paginator">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_paginator</tt>(<em>queryset</em>, <em>per_page</em>, <em>orphans=0</em>, <em>allow_empty_first_page=True</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_paginator" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="385">Returns an instance of the paginator to use for this view. </font><font id="386">By default, instantiates an instance of <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.paginator" title="django.contrib.admin.ModelAdmin.paginator"><tt class="xref py py-attr docutils literal"><span class="pre">paginator</span></tt></a>.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.response_add">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">response_add</tt>(<em>request</em>, <em>obj</em>, <em>post_url_continue=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.response_add" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="387">Determines the <a class="reference internal" href="../../request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> for the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.add_view" title="django.contrib.admin.ModelAdmin.add_view"><tt class="xref py py-meth docutils literal"><span class="pre">add_view()</span></tt></a> stage.</font></p>
<p><font id="388"><tt class="docutils literal"><span class="pre">response_add</span></tt> is called after the admin form is submitted and just after the object and all the related instances have been created and saved. </font><font id="389">You can override it to change the default behavior after the object has been created.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.response_change">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">response_change</tt>(<em>request</em>, <em>obj</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.response_change" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="390">Determines the <a class="reference internal" href="../../request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> for the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.change_view" title="django.contrib.admin.ModelAdmin.change_view"><tt class="xref py py-meth docutils literal"><span class="pre">change_view()</span></tt></a> stage.</font></p>
<p><font id="391"><tt class="docutils literal"><span class="pre">response_change</span></tt> is called after the admin form is submitted and just after the object and all the related instances have been saved. </font><font id="392">You can override it to change the default behavior after the object has been changed.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.response_delete">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">response_delete</tt>(<em>request</em>, <em>obj_display</em>, <em>obj_id</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.response_delete" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="393">Determines the <a class="reference internal" href="../../request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> for the <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.delete_view" title="django.contrib.admin.ModelAdmin.delete_view"><tt class="xref py py-meth docutils literal"><span class="pre">delete_view()</span></tt></a> stage.</font></p>
<p><font id="394"><tt class="docutils literal"><span class="pre">response_delete</span></tt> is called after the object has been deleted. </font><font id="395">You can override it to change the default behavior after the object has been deleted.</font></p>
<p><font id="396"><tt class="docutils literal"><span class="pre">obj_display</span></tt> is a string with the name of the deleted object.</font></p>
<p><font id="397"><tt class="docutils literal"><span class="pre">obj_id</span></tt> is the serialized identifier used to retrieve the object to be deleted.</font></p>
<div class="versionadded">
<span class="title">New in Django 1.8:</span> <p><font id="398">The <tt class="docutils literal"><span class="pre">obj_id</span></tt> parameter was added.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.get_changeform_initial_data">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">get_changeform_initial_data</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.get_changeform_initial_data" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="399">A hook for the initial data on admin change forms. </font><font id="400">By default, fields are given initial values from <tt class="docutils literal"><span class="pre">GET</span></tt> parameters. </font><font id="401">For instance, <tt class="docutils literal"><span class="pre">?name=initial_value</span></tt> will set the <tt class="docutils literal"><span class="pre">name</span></tt> field’s initial value to be <tt class="docutils literal"><span class="pre">initial_value</span></tt>.</font></p>
<p><font id="402">This method should return a dictionary in the form <tt class="docutils literal"><span class="pre">{'fieldname':</span> <span class="pre">'fieldval'}</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">get_changeform_initial_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'custom_initial_value'</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>
<div class="section" id="s-other-methods">
<span id="other-methods"></span><h4><font id="664">Other methods</font><a class="headerlink" href="index.html#other-methods" title="Permalink to this headline">¶</a></h4>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.add_view">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">add_view</tt>(<em>request</em>, <em>form_url=''</em>, <em>extra_context=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.add_view" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="403">Django view for the model instance addition page. </font><font id="404">See note below.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.change_view">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">change_view</tt>(<em>request</em>, <em>object_id</em>, <em>form_url=''</em>, <em>extra_context=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.change_view" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="405">Django view for the model instance edition page. </font><font id="406">See note below.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.changelist_view">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">changelist_view</tt>(<em>request</em>, <em>extra_context=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.changelist_view" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="407">Django view for the model instances change list/actions page. </font><font id="408">See note below.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.delete_view">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">delete_view</tt>(<em>request</em>, <em>object_id</em>, <em>extra_context=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.delete_view" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="409">Django view for the model instance(s) deletion confirmation page. </font><font id="410">See note below.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.ModelAdmin.history_view">
<tt class="descclassname">ModelAdmin.</tt><tt class="descname">history_view</tt>(<em>request</em>, <em>object_id</em>, <em>extra_context=None</em>)<a class="headerlink" href="index.html#django.contrib.admin.ModelAdmin.history_view" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="411">Django view for the page that shows the modification history for a given model instance.</font></p>
</dd></dl>
<p><font id="412">Unlike the hook-type <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> methods detailed in the previous section, these five methods are in reality designed to be invoked as Django views from the admin application URL dispatching handler to render the pages that deal with model instances CRUD operations. </font><font id="413">As a result, completely overriding these methods will significantly change the behavior of the admin application.</font></p>
<p><font id="414">One common reason for overriding these methods is to augment the context data that is provided to the template that renders the view. </font><font id="415">In the following example, the change view is overridden so that the rendered template is provided some extra mapping data that would not otherwise be available:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModelAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>

    <span class="c"># A template for a very customized change view:</span>
    <span class="n">change_form_template</span> <span class="o">=</span> <span class="s">'admin/myapp/extras/openstreetmap_change_form.html'</span>

    <span class="k">def</span> <span class="nf">get_osm_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># ...</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">change_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_id</span><span class="p">,</span> <span class="n">form_url</span><span class="o">=</span><span class="s">''</span><span class="p">,</span> <span class="n">extra_context</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">extra_context</span> <span class="o">=</span> <span class="n">extra_context</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="n">extra_context</span><span class="p">[</span><span class="s">'osm_data'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_osm_info</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyModelAdmin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">change_view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_id</span><span class="p">,</span>
            <span class="n">form_url</span><span class="p">,</span> <span class="n">extra_context</span><span class="o">=</span><span class="n">extra_context</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="416">These views return <a class="reference internal" href="../../template-response.html#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><tt class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></tt></a> instances which allow you to easily customize the response data before rendering. </font><font id="417">For more details, see the <a class="reference internal" href="../../template-response.html"><em>TemplateResponse documentation</em></a>.</font></p>
</div>
</div>
<div class="section" id="s-modeladmin-asset-definitions">
<span id="s-id1"></span><span id="modeladmin-asset-definitions"></span><span id="id1"></span><h3><font id="639">ModelAdmin</font> asset definitions</h3>
<p><font id="418">There are times where you would like add a bit of CSS and/or JavaScript to the add/change views. </font><font id="419">This can be accomplished by using a <tt class="docutils literal"><span class="pre">Media</span></tt> inner class on your <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
        <span class="n">css</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">"all"</span><span class="p">:</span> <span class="p">(</span><span class="s">"my_styles.css"</span><span class="p">,)</span>
        <span class="p">}</span>
        <span class="n">js</span> <span class="o">=</span> <span class="p">(</span><span class="s">"my_code.js"</span><span class="p">,)</span>
</pre></div>
</div>
<p><font id="420">The <a class="reference internal" href="../staticfiles.html"><em>staticfiles app</em></a> prepends <a class="reference internal" href="../../settings.html#std:setting-STATIC_URL"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_URL</span></tt></a> (or <a class="reference internal" href="../../settings.html#std:setting-MEDIA_URL"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_URL</span></tt></a> if <a class="reference internal" href="../../settings.html#std:setting-STATIC_URL"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_URL</span></tt></a> is <tt class="docutils literal"><span class="pre">None</span></tt>) to any asset paths. </font><font id="421">The same rules apply as <a class="reference internal" href="../../../topics/forms/media.html#form-asset-paths"><em>regular asset definitions on forms</em></a>.</font></p>
<div class="section" id="s-jquery">
<span id="jquery"></span><h4><font id="665">jQuery</font><a class="headerlink" href="index.html#jquery" title="Permalink to this headline">¶</a></h4>
<p><font id="422">Django admin JavaScript makes use of the <a class="reference external" href="http://jquery.com">jQuery</a> library.</font></p>
<p><font id="423">To avoid conflicts with user-supplied scripts or libraries, Django’s jQuery (version 1.11.2) is namespaced as <tt class="docutils literal"><span class="pre">django.jQuery</span></tt>. </font><font id="424">If you want to use jQuery in your own admin JavaScript without including a second copy, you can use the <tt class="docutils literal"><span class="pre">django.jQuery</span></tt> object on changelist and add/edit views.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><font id="425">The embedded jQuery has been upgraded from 1.9.1 to 1.11.2.</font></p>
</div>
<p><font id="426">The <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin</span></tt></a> class requires jQuery by default, so there is no need to add jQuery to your <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>’s list of media resources unless you have a specific need. </font><font id="427">For example, if you require the jQuery library to be in the global namespace (for example when using third-party jQuery plugins) or if you need a newer version of jQuery, you will have to include your own copy.</font></p>
<p><font id="428">Django provides both uncompressed and ‘minified’ versions of jQuery, as <tt class="docutils literal"><span class="pre">jquery.js</span></tt> and <tt class="docutils literal"><span class="pre">jquery.min.js</span></tt> respectively.</font></p>
<p><font id="429"><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin</span></tt></a> and <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin" title="django.contrib.admin.InlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">InlineModelAdmin</span></tt></a> have a <tt class="docutils literal"><span class="pre">media</span></tt> property that returns a list of <tt class="docutils literal"><span class="pre">Media</span></tt> objects which store paths to the JavaScript files for the forms and/or formsets. </font><font id="430">If <a class="reference internal" href="../../settings.html#std:setting-DEBUG"><tt class="xref std std-setting docutils literal"><span class="pre">DEBUG</span></tt></a> is <tt class="docutils literal"><span class="pre">True</span></tt> it will return the uncompressed versions of the various JavaScript files, including <tt class="docutils literal"><span class="pre">jquery.js</span></tt>; </font><font id="431">if not, it will return the ‘minified’ versions.</font></p>
</div>
</div>
<div class="section" id="s-adding-custom-validation-to-the-admin">
<span id="s-admin-custom-validation"></span><span id="adding-custom-validation-to-the-admin"></span><span id="admin-custom-validation"></span><h3><font id="640">Adding custom validation to the admin</font><a class="headerlink" href="index.html#adding-custom-validation-to-the-admin" title="Permalink to this headline">¶</a></h3>
<p><font id="432">Adding custom validation of data in the admin is quite easy. </font><font id="433">The automatic admin interface reuses <a class="reference internal" href="../../forms/api.html#module-django.forms" title="django.forms"><tt class="xref py py-mod docutils literal"><span class="pre">django.forms</span></tt></a>, and the <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> class gives you the ability define your own form:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ArticleAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">MyArticleAdminForm</span>
</pre></div>
</div>
<p><font id="434"><tt class="docutils literal"><span class="pre">MyArticleAdminForm</span></tt> can be defined anywhere as long as you import where needed. </font><font id="435">Now within your form you can add your own custom validation for any field:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyArticleAdminForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">clean_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># do something that validates your data</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span>
</pre></div>
</div>
<p><font id="436">It is important you use a <tt class="docutils literal"><span class="pre">ModelForm</span></tt> here otherwise things can break. </font><font id="437">See the <a class="reference internal" href="../../forms/index.html"><em>forms</em></a> documentation on <a class="reference internal" href="../../forms/validation.html"><em>custom validation</em></a> and, more specifically, the <a class="reference internal" href="../../../topics/forms/modelforms.html#overriding-modelform-clean-method"><em>model form validation notes</em></a> for more information.</font></p>
</div>
</div>
<div class="section" id="s-inlinemodeladmin-objects">
<span id="s-admin-inlines"></span><span id="inlinemodeladmin-objects"></span><span id="admin-inlines"></span><h2><font id="630">InlineModelAdmin</font> objects</h2>
<dl class="class">
<dt id="django.contrib.admin.InlineModelAdmin">
<em class="property">class </em><tt class="descname">InlineModelAdmin</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="class">
<dt id="django.contrib.admin.TabularInline">
<em class="property">class </em><tt class="descname">TabularInline</tt><a class="headerlink" href="index.html#django.contrib.admin.TabularInline" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="class">
<dt id="django.contrib.admin.StackedInline">
<em class="property">class </em><tt class="descname">StackedInline</tt><a class="headerlink" href="index.html#django.contrib.admin.StackedInline" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="438">The admin interface has the ability to edit models on the same page as a parent model. </font><font id="439">These are called inlines. </font><font id="440">Suppose you have these two models:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
   <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
   <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
   <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="441">You can edit the books authored by an author on the author page. </font><font id="442">You add inlines to a model by specifying them in a <tt class="docutils literal"><span class="pre">ModelAdmin.inlines</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">BookInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>

<span class="k">class</span> <span class="nc">AuthorAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">BookInline</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
<p><font id="443">Django provides two subclasses of <tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> and they are:</font></p>
<ul class="simple">
<li><a class="reference internal" href="index.html#django.contrib.admin.TabularInline" title="django.contrib.admin.TabularInline"><font id="687">TabularInline</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.StackedInline" title="django.contrib.admin.StackedInline"><font id="688">StackedInline</font></a></li>
</ul>
<p><font id="444">The difference between these two is merely the template used to render them.</font></p>
</dd></dl>
<div class="section" id="s-inlinemodeladmin-options">
<span id="inlinemodeladmin-options"></span><h3><font id="641">InlineModelAdmin</font> options</h3>
<p><font id="445"><tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> shares many of the same features as <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>, and adds some of its own (the shared features are actually defined in the <tt class="docutils literal"><span class="pre">BaseModelAdmin</span></tt> superclass). </font><font id="446">The shared features are:</font></p>
<ul class="simple">
<li><a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin.form" title="django.contrib.admin.InlineModelAdmin.form"><font id="689">form</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fieldsets" title="django.contrib.admin.ModelAdmin.fieldsets"><font id="690">fieldsets</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.fields" title="django.contrib.admin.ModelAdmin.fields"><font id="691">fields</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.formfield_overrides" title="django.contrib.admin.ModelAdmin.formfield_overrides"><font id="692">formfield_overrides</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.exclude" title="django.contrib.admin.ModelAdmin.exclude"><font id="693">exclude</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.filter_horizontal" title="django.contrib.admin.ModelAdmin.filter_horizontal"><font id="694">filter_horizontal</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.filter_vertical" title="django.contrib.admin.ModelAdmin.filter_vertical"><font id="695">filter_vertical</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.ordering" title="django.contrib.admin.ModelAdmin.ordering"><font id="696">ordering</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.prepopulated_fields" title="django.contrib.admin.ModelAdmin.prepopulated_fields"><font id="697">prepopulated_fields</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_queryset" title="django.contrib.admin.ModelAdmin.get_queryset"><font id="698">get_queryset()</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.radio_fields" title="django.contrib.admin.ModelAdmin.radio_fields"><font id="699">radio_fields</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.readonly_fields" title="django.contrib.admin.ModelAdmin.readonly_fields"><font id="700">readonly_fields</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin.raw_id_fields" title="django.contrib.admin.InlineModelAdmin.raw_id_fields"><font id="701">raw_id_fields</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.formfield_for_choice_field" title="django.contrib.admin.ModelAdmin.formfield_for_choice_field"><font id="702">formfield_for_choice_field()</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.formfield_for_foreignkey" title="django.contrib.admin.ModelAdmin.formfield_for_foreignkey"><font id="703">formfield_for_foreignkey()</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.formfield_for_manytomany" title="django.contrib.admin.ModelAdmin.formfield_for_manytomany"><font id="704">formfield_for_manytomany()</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.has_add_permission" title="django.contrib.admin.ModelAdmin.has_add_permission"><font id="705">has_add_permission()</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.has_change_permission" title="django.contrib.admin.ModelAdmin.has_change_permission"><font id="706">has_change_permission()</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.has_delete_permission" title="django.contrib.admin.ModelAdmin.has_delete_permission"><font id="707">has_delete_permission()</font></a></li>
<li><a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.has_module_permission" title="django.contrib.admin.ModelAdmin.has_module_permission"><font id="708">has_module_permission()</font></a></li>
</ul>
<p><font id="447">The <tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> class adds:</font></p>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.model">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">model</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.model" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="448">The model which the inline is using. </font><font id="449">This is required.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.fk_name">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">fk_name</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.fk_name" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="450">The name of the foreign key on the model. </font><font id="451">In most cases this will be dealt with automatically, but <tt class="docutils literal"><span class="pre">fk_name</span></tt> must be specified explicitly if there are more than one foreign key to the same parent model.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.formset">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">formset</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.formset" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="452">This defaults to <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.models.BaseInlineFormSet" title="django.forms.models.BaseInlineFormSet"><tt class="xref py py-class docutils literal"><span class="pre">BaseInlineFormSet</span></tt></a>. </font><font id="453">Using your own formset can give you many possibilities of customization. </font><font id="454">Inlines are built around <a class="reference internal" href="../../../topics/forms/modelforms.html#model-formsets"><em>model formsets</em></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.form">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">form</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.form" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="455">The value for <tt class="docutils literal"><span class="pre">form</span></tt> defaults to <tt class="docutils literal"><span class="pre">ModelForm</span></tt>. </font><font id="456">This is what is passed through to <a class="reference internal" href="../../forms/models.html#django.forms.models.inlineformset_factory" title="django.forms.models.inlineformset_factory"><tt class="xref py py-func docutils literal"><span class="pre">inlineformset_factory()</span></tt></a> when creating the formset for this inline.</font></p>
</dd></dl>
<div class="admonition warning">
<p class="first admonition-title"><font id="457">Warning</font></p>
<p class="last"><font id="458">When writing custom validation for <tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> forms, be cautious of writing validation that relies on features of the parent model. </font><font id="459">If the parent model fails to validate, it may be left in an inconsistent state as described in the warning in <a class="reference internal" href="../../../topics/forms/modelforms.html#validation-on-modelform"><em>Validation on a ModelForm</em></a>.</font></p>
</div>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.extra">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">extra</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.extra" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="460">This controls the number of extra forms the formset will display in addition to the initial forms. </font><font id="461">See the <a class="reference internal" href="../../../topics/forms/formsets.html"><em>formsets documentation</em></a> for more information.</font></p>
<p><font id="462">For users with JavaScript-enabled browsers, an “Add another” link is provided to enable any number of additional inlines to be added in addition to those provided as a result of the <tt class="docutils literal"><span class="pre">extra</span></tt> argument.</font></p>
<p><font id="463">The dynamic link will not appear if the number of currently displayed forms exceeds <tt class="docutils literal"><span class="pre">max_num</span></tt>, or if the user does not have JavaScript enabled.</font></p>
<p><font id="464"><a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin.get_extra" title="django.contrib.admin.InlineModelAdmin.get_extra"><tt class="xref py py-meth docutils literal"><span class="pre">InlineModelAdmin.get_extra()</span></tt></a> also allows you to customize the number of extra forms.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.max_num">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">max_num</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.max_num" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="465">This controls the maximum number of forms to show in the inline. </font><font id="466">This doesn’t directly correlate to the number of objects, but can if the value is small enough. </font><font id="467">See <a class="reference internal" href="../../../topics/forms/modelforms.html#model-formsets-max-num"><em>Limiting the number of editable objects</em></a> for more information.</font></p>
<p><font id="468"><a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin.get_max_num" title="django.contrib.admin.InlineModelAdmin.get_max_num"><tt class="xref py py-meth docutils literal"><span class="pre">InlineModelAdmin.get_max_num()</span></tt></a> also allows you to customize the maximum number of extra forms.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.min_num">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">min_num</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.min_num" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="469">This controls the minimum number of forms to show in the inline. </font><font id="470">See <a class="reference internal" href="../../forms/models.html#django.forms.models.modelformset_factory" title="django.forms.models.modelformset_factory"><tt class="xref py py-func docutils literal"><span class="pre">modelformset_factory()</span></tt></a> for more information.</font></p>
<p><font id="471"><a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin.get_min_num" title="django.contrib.admin.InlineModelAdmin.get_min_num"><tt class="xref py py-meth docutils literal"><span class="pre">InlineModelAdmin.get_min_num()</span></tt></a> also allows you to customize the minimum number of displayed forms.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.raw_id_fields">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">raw_id_fields</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.raw_id_fields" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="472">By default, Django’s admin uses a select-box interface (&lt;select&gt;) for fields that are <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>. </font><font id="473">Sometimes you don’t want to incur the overhead of having to select all the related instances to display in the drop-down.</font></p>
<p><font id="474"><tt class="docutils literal"><span class="pre">raw_id_fields</span></tt> is a list of fields you would like to change into a <tt class="docutils literal"><span class="pre">Input</span></tt> widget for either a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> or <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">BookInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Book</span>
    <span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">"pages"</span><span class="p">,)</span>
</pre></div>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.template">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">template</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="475">The template used to render the inline on the page.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.verbose_name">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">verbose_name</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.verbose_name" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="476">An override to the <tt class="docutils literal"><span class="pre">verbose_name</span></tt> found in the model’s inner <tt class="docutils literal"><span class="pre">Meta</span></tt> class.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.verbose_name_plural">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">verbose_name_plural</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.verbose_name_plural" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="477">An override to the <tt class="docutils literal"><span class="pre">verbose_name_plural</span></tt> found in the model’s inner <tt class="docutils literal"><span class="pre">Meta</span></tt> class.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.can_delete">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">can_delete</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.can_delete" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="478">Specifies whether or not inline objects can be deleted in the inline. </font><font id="479">Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.InlineModelAdmin.show_change_link">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">show_change_link</tt><a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.show_change_link" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="480">Specifies whether or not inline objects that can be changed in the admin have a link to the change form. </font><font id="481">Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.get_formset">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">get_formset</tt>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.get_formset" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="482">Returns a <a class="reference internal" href="../../../topics/forms/modelforms.html#django.forms.models.BaseInlineFormSet" title="django.forms.models.BaseInlineFormSet"><tt class="xref py py-class docutils literal"><span class="pre">BaseInlineFormSet</span></tt></a> class for use in admin add/change views. </font><font id="483">See the example for <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_formsets_with_inlines" title="django.contrib.admin.ModelAdmin.get_formsets_with_inlines"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin.get_formsets_with_inlines</span></tt></a>.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.get_extra">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">get_extra</tt>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.get_extra" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="484">Returns the number of extra inline forms to use. </font><font id="485">By default, returns the <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin.extra" title="django.contrib.admin.InlineModelAdmin.extra"><tt class="xref py py-attr docutils literal"><span class="pre">InlineModelAdmin.extra</span></tt></a> attribute.</font></p>
<p><font id="486">Override this method to programmatically determine the number of extra inline forms. </font><font id="487">For example, this may be based on the model instance (passed as the keyword argument <tt class="docutils literal"><span class="pre">obj</span></tt>):</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">BinaryTreeAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">BinaryTree</span>

    <span class="k">def</span> <span class="nf">get_extra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">obj</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">extra</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">binarytree_set</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">extra</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.get_max_num">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">get_max_num</tt>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.get_max_num" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="488">Returns the maximum number of extra inline forms to use. </font><font id="489">By default, returns the <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin.max_num" title="django.contrib.admin.InlineModelAdmin.max_num"><tt class="xref py py-attr docutils literal"><span class="pre">InlineModelAdmin.max_num</span></tt></a> attribute.</font></p>
<p><font id="490">Override this method to programmatically determine the maximum number of inline forms. </font><font id="491">For example, this may be based on the model instance (passed as the keyword argument <tt class="docutils literal"><span class="pre">obj</span></tt>):</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">BinaryTreeAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">BinaryTree</span>

    <span class="k">def</span> <span class="nf">get_max_num</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">max_num</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">parent</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">max_num</span> <span class="o">-</span> <span class="mi">5</span>
        <span class="k">return</span> <span class="n">max_num</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.InlineModelAdmin.get_min_num">
<tt class="descclassname">InlineModelAdmin.</tt><tt class="descname">get_min_num</tt>(<em>request</em>, <em>obj=None</em>, <em>**kwargs</em>)<a class="headerlink" href="index.html#django.contrib.admin.InlineModelAdmin.get_min_num" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="492">Returns the minimum number of inline forms to use. </font><font id="493">By default, returns the <a class="reference internal" href="index.html#django.contrib.admin.InlineModelAdmin.min_num" title="django.contrib.admin.InlineModelAdmin.min_num"><tt class="xref py py-attr docutils literal"><span class="pre">InlineModelAdmin.min_num</span></tt></a> attribute.</font></p>
<p><font id="494">Override this method to programmatically determine the minimum number of inline forms. </font><font id="495">For example, this may be based on the model instance (passed as the keyword argument <tt class="docutils literal"><span class="pre">obj</span></tt>).</font></p>
</dd></dl>
</div>
<div class="section" id="s-working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model">
<span id="working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model"></span><h3><font id="642">Working with a model with two or more foreign keys to the same parent model</font><a class="headerlink" href="index.html#working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model" title="Permalink to this headline">¶</a></h3>
<p><font id="496">It is sometimes possible to have more than one foreign key to the same model. </font><font id="497">Take this model for instance:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Friendship</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">to_person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">"friends"</span><span class="p">)</span>
    <span class="n">from_person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">"from_friends"</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="498">If you wanted to display an inline on the <tt class="docutils literal"><span class="pre">Person</span></tt> admin add/change pages you need to explicitly define the foreign key since it is unable to do so automatically:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Friendship</span>

<span class="k">class</span> <span class="nc">FriendshipInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Friendship</span>
    <span class="n">fk_name</span> <span class="o">=</span> <span class="s">"to_person"</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">FriendshipInline</span><span class="p">,</span>
    <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="s-working-with-many-to-many-models">
<span id="working-with-many-to-many-models"></span><h3><font id="643">Working with many-to-many models</font><a class="headerlink" href="index.html#working-with-many-to-many-models" title="Permalink to this headline">¶</a></h3>
<p><font id="499">By default, admin widgets for many-to-many relations will be displayed on whichever model contains the actual reference to the <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a>. </font><font id="500">Depending on your <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> definition, each many-to-many field in your model will be represented by a standard HTML <tt class="docutils literal"><span class="pre">&lt;select</span> <span class="pre">multiple&gt;</span></tt>, a horizontal or vertical filter, or a <tt class="docutils literal"><span class="pre">raw_id_admin</span></tt> widget. </font><font id="501">However, it is also possible to replace these widgets with inlines.</font></p>
<p><font id="502">Suppose we have the following models:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">'groups'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="503">If you want to display many-to-many relations using an inline, you can do so by defining an <tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> object for the relationship:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="k">class</span> <span class="nc">MembershipInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Group</span><span class="o">.</span><span class="n">members</span><span class="o">.</span><span class="n">through</span>

<span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">MembershipInline</span><span class="p">,</span>
    <span class="p">]</span>

<span class="k">class</span> <span class="nc">GroupAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">MembershipInline</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">exclude</span> <span class="o">=</span> <span class="p">(</span><span class="s">'members'</span><span class="p">,)</span>
</pre></div>
</div>
<p><font id="504">There are two features worth noting in this example.</font></p>
<p><font id="505">Firstly - the <tt class="docutils literal"><span class="pre">MembershipInline</span></tt> class references <tt class="docutils literal"><span class="pre">Group.members.through</span></tt>. </font><font id="506">The <tt class="docutils literal"><span class="pre">through</span></tt> attribute is a reference to the model that manages the many-to-many relation. </font><font id="507">This model is automatically created by Django when you define a many-to-many field.</font></p>
<p><font id="508">Secondly, the <tt class="docutils literal"><span class="pre">GroupAdmin</span></tt> must manually exclude the <tt class="docutils literal"><span class="pre">members</span></tt> field. </font><font id="509">Django displays an admin widget for a many-to-many field on the model that defines the relation (in this case, <tt class="docutils literal"><span class="pre">Group</span></tt>). </font><font id="510">If you want to use an inline model to represent the many-to-many relationship, you must tell Django’s admin to <em>not</em> display this widget - otherwise you will end up with two widgets on your admin page for managing the relation.</font></p>
<p><font id="511">In all other respects, the <tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> is exactly the same as any other. </font><font id="512">You can customize the appearance using any of the normal <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> properties.</font></p>
</div>
<div class="section" id="s-working-with-many-to-many-intermediary-models">
<span id="working-with-many-to-many-intermediary-models"></span><h3><font id="644">Working with many-to-many intermediary models</font><a class="headerlink" href="index.html#working-with-many-to-many-intermediary-models" title="Permalink to this headline">¶</a></h3>
<p><font id="513">When you specify an intermediary model using the <tt class="docutils literal"><span class="pre">through</span></tt> argument to a <a class="reference internal" href="../../models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a>, the admin will not display a widget by default. </font><font id="514">This is because each instance of that intermediary model requires more information than could be displayed in a single widget, and the layout required for multiple widgets will vary depending on the intermediate model.</font></p>
<p><font id="515">However, we still want to be able to edit that information inline. </font><font id="516">Fortunately, this is easy to do with inline admin models. </font><font id="517">Suppose we have the following models:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="s">'Membership'</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Membership</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span>
    <span class="n">date_joined</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>
    <span class="n">invite_reason</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="518">The first step in displaying this intermediate model in the admin is to define an inline class for the <tt class="docutils literal"><span class="pre">Membership</span></tt> model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MembershipInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">TabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Membership</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p><font id="519">This simple example uses the default <tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> values for the <tt class="docutils literal"><span class="pre">Membership</span></tt> model, and limits the extra add forms to one. </font><font id="520">This could be customized using any of the options available to <tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> classes.</font></p>
<p><font id="521">Now create admin views for the <tt class="docutils literal"><span class="pre">Person</span></tt> and <tt class="docutils literal"><span class="pre">Group</span></tt> models:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PersonAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">(</span><span class="n">MembershipInline</span><span class="p">,)</span>

<span class="k">class</span> <span class="nc">GroupAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">(</span><span class="n">MembershipInline</span><span class="p">,)</span>
</pre></div>
</div>
<p><font id="522">Finally, register your <tt class="docutils literal"><span class="pre">Person</span></tt> and <tt class="docutils literal"><span class="pre">Group</span></tt> models with the admin site:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">PersonAdmin</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">GroupAdmin</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="523">Now your admin site is set up to edit <tt class="docutils literal"><span class="pre">Membership</span></tt> objects inline from either the <tt class="docutils literal"><span class="pre">Person</span></tt> or the <tt class="docutils literal"><span class="pre">Group</span></tt> detail pages.</font></p>
</div>
<div class="section" id="s-using-generic-relations-as-an-inline">
<span id="s-id3"></span><span id="using-generic-relations-as-an-inline"></span><span id="id3"></span><h3><font id="645">Using generic relations as an inline</font><a class="headerlink" href="index.html#using-generic-relations-as-an-inline" title="Permalink to this headline">¶</a></h3>
<p><font id="524">It is possible to use an inline with generically related objects. </font><font id="525">Let’s say you have the following models:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.contrib.contenttypes.fields</span> <span class="kn">import</span> <span class="n">GenericForeignKey</span>

<span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ImageField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s">"images"</span><span class="p">)</span>
    <span class="n">content_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ContentType</span><span class="p">)</span>
    <span class="n">object_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">()</span>
    <span class="n">content_object</span> <span class="o">=</span> <span class="n">GenericForeignKey</span><span class="p">(</span><span class="s">"content_type"</span><span class="p">,</span> <span class="s">"object_id"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Product</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="526">If you want to allow editing and creating <tt class="docutils literal"><span class="pre">Image</span></tt> instance on the <tt class="docutils literal"><span class="pre">Product</span></tt> add/change views you can use <a class="reference internal" href="../contenttypes.html#django.contrib.contenttypes.admin.GenericTabularInline" title="django.contrib.contenttypes.admin.GenericTabularInline"><tt class="xref py py-class docutils literal"><span class="pre">GenericTabularInline</span></tt></a> or <a class="reference internal" href="../contenttypes.html#django.contrib.contenttypes.admin.GenericStackedInline" title="django.contrib.contenttypes.admin.GenericStackedInline"><tt class="xref py py-class docutils literal"><span class="pre">GenericStackedInline</span></tt></a> (both subclasses of <a class="reference internal" href="../contenttypes.html#django.contrib.contenttypes.admin.GenericInlineModelAdmin" title="django.contrib.contenttypes.admin.GenericInlineModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">GenericInlineModelAdmin</span></tt></a>) provided by <a class="reference internal" href="../contenttypes.html#module-django.contrib.contenttypes.admin" title="django.contrib.contenttypes.admin"><tt class="xref py py-mod docutils literal"><span class="pre">admin</span></tt></a>, they implement tabular and stacked visual layouts for the forms representing the inline objects respectively just like their non-generic counterparts and behave just like any other inline. </font><font id="527">In your <tt class="docutils literal"><span class="pre">admin.py</span></tt> for this example app:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.contrib.contenttypes.admin</span> <span class="kn">import</span> <span class="n">GenericTabularInline</span>

<span class="kn">from</span> <span class="nn">myproject.myapp.models</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">Product</span>

<span class="k">class</span> <span class="nc">ImageInline</span><span class="p">(</span><span class="n">GenericTabularInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Image</span>

<span class="k">class</span> <span class="nc">ProductAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ImageInline</span><span class="p">,</span>
    <span class="p">]</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Product</span><span class="p">,</span> <span class="n">ProductAdmin</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="528">See the <a class="reference internal" href="../contenttypes.html"><em>contenttypes documentation</em></a> for more specific information.</font></p>
</div>
</div>
<div class="section" id="s-overriding-admin-templates">
<span id="s-admin-overriding-templates"></span><span id="overriding-admin-templates"></span><span id="admin-overriding-templates"></span><h2><font id="631">Overriding admin templates</font><a class="headerlink" href="index.html#overriding-admin-templates" title="Permalink to this headline">¶</a></h2>
<p><font id="529">It is relatively easy to override many of the templates which the admin module uses to generate the various pages of an admin site. </font><font id="530">You can even override a few of these templates for a specific app, or a specific model.</font></p>
<div class="section" id="s-set-up-your-projects-admin-template-directories">
<span id="set-up-your-projects-admin-template-directories"></span><h3><font id="646">Set up your projects admin template directories</font><a class="headerlink" href="index.html#set-up-your-projects-admin-template-directories" title="Permalink to this headline">¶</a></h3>
<p><font id="531">The admin template files are located in the <tt class="docutils literal"><span class="pre">contrib/admin/templates/admin</span></tt> directory.</font></p>
<p><font id="532">In order to override one or more of them, first create an <tt class="docutils literal"><span class="pre">admin</span></tt> directory in your project’s <tt class="docutils literal"><span class="pre">templates</span></tt> directory. </font><font id="533">This can be any of the directories you specified in the <a class="reference internal" href="../../settings.html#std:setting-TEMPLATES-DIRS"><tt class="xref std std-setting docutils literal"><span class="pre">DIRS</span></tt></a> option of the <tt class="docutils literal"><span class="pre">DjangoTemplates</span></tt> backend in the <a class="reference internal" href="../../settings.html#std:setting-TEMPLATES"><tt class="xref std std-setting docutils literal"><span class="pre">TEMPLATES</span></tt></a> setting. </font><font id="534">If you have customized the <tt class="docutils literal"><span class="pre">'loaders'</span></tt> option, be sure <tt class="docutils literal"><span class="pre">'django.template.loaders.filesystem.Loader'</span></tt> appears before <tt class="docutils literal"><span class="pre">'django.template.loaders.app_directories.</span></tt></font><font id="535">Loader' so that your custom templates will be found by the template loading system before those that are included with <a class="reference internal" href="index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admin</span></tt></a>.</font></p>
<p><font id="536">Within this <tt class="docutils literal"><span class="pre">admin</span></tt> directory, create sub-directories named after your app. </font><font id="537">Within these app subdirectories create sub-directories named after your models. </font><font id="538">Note, that the admin app will lowercase the model name when looking for the directory, so make sure you name the directory in all lowercase if you are going to run your app on a case-sensitive filesystem.</font></p>
<p><font id="539">To override an admin template for a specific app, copy and edit the template from the <tt class="docutils literal"><span class="pre">django/contrib/admin/templates/admin</span></tt> directory, and save it to one of the directories you just created.</font></p>
<p><font id="540">For example, if we wanted to add a tool to the change list view for all the models in an app named <tt class="docutils literal"><span class="pre">my_app</span></tt>, we would copy <tt class="docutils literal"><span class="pre">contrib/admin/templates/admin/change_list.html</span></tt> to the <tt class="docutils literal"><span class="pre">templates/admin/my_app/</span></tt> directory of our project, and make any necessary changes.</font></p>
<p><font id="541">If we wanted to add a tool to the change list view for only a specific model named ‘Page’, we would copy that same file to the <tt class="docutils literal"><span class="pre">templates/admin/my_app/page</span></tt> directory of our project.</font></p>
</div>
<div class="section" id="s-overriding-vs-replacing-an-admin-template">
<span id="overriding-vs-replacing-an-admin-template"></span><h3><font id="647">Overriding vs. replacing an admin template</font><a class="headerlink" href="index.html#overriding-vs-replacing-an-admin-template" title="Permalink to this headline">¶</a></h3>
<p><font id="542">Because of the modular design of the admin templates, it is usually neither necessary nor advisable to replace an entire template. </font><font id="543">It is almost always better to override only the section of the template which you need to change.</font></p>
<p><font id="544">To continue the example above, we want to add a new link next to the <tt class="docutils literal"><span class="pre">History</span></tt> tool for the <tt class="docutils literal"><span class="pre">Page</span></tt> model. </font><font id="545">After looking at <tt class="docutils literal"><span class="pre">change_form.html</span></tt> we determine that we only need to override the <tt class="docutils literal"><span class="pre">object-tools-items</span></tt> block. </font><font id="546">Therefore here is our new <tt class="docutils literal"><span class="pre">change_form.html</span></tt> :</font></p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"admin/change_form.html"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">load</span> <span class="nv">i18n</span> <span class="nv">admin_urls</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">object-tools-items</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="k">url</span> <span class="nv">opts</span><span class="o">|</span><span class="nf">admin_urlname</span><span class="s1">:'history'</span> <span class="nv">original.pk</span><span class="o">|</span><span class="nf">admin_urlquote</span> <span class="cp">%}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"historylink"</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">trans</span> <span class="s2">"History"</span> <span class="cp">%}</span><span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"mylink/"</span> <span class="na">class=</span><span class="s">"historylink"</span><span class="nt">&gt;</span>My Link<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">has_absolute_url</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">'admin:view_on_site'</span> <span class="nv">content_type_id</span> <span class="nv">original.pk</span> <span class="cp">%}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"viewsitelink"</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">trans</span> <span class="s2">"View on site"</span> <span class="cp">%}</span><span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p><font id="547">And that’s it! </font><font id="548">If we placed this file in the <tt class="docutils literal"><span class="pre">templates/admin/my_app</span></tt> directory, our link would appear on the change form for all models within my_app.</font></p>
</div>
<div class="section" id="s-templates-which-may-be-overridden-per-app-or-model">
<span id="templates-which-may-be-overridden-per-app-or-model"></span><h3><font id="648">Templates which may be overridden per app or model</font><a class="headerlink" href="index.html#templates-which-may-be-overridden-per-app-or-model" title="Permalink to this headline">¶</a></h3>
<p><font id="549">Not every template in <tt class="docutils literal"><span class="pre">contrib/admin/templates/admin</span></tt> may be overridden per app or per model. </font><font id="550">The following can:</font></p>
<ul class="simple">
<li><font id="709"><tt class="docutils literal"><span class="pre">app_index.html</span></tt></font></li>
<li><font id="710"><tt class="docutils literal"><span class="pre">change_form.html</span></tt></font></li>
<li><font id="711"><tt class="docutils literal"><span class="pre">change_list.html</span></tt></font></li>
<li><font id="712"><tt class="docutils literal"><span class="pre">delete_confirmation.html</span></tt></font></li>
<li><font id="713"><tt class="docutils literal"><span class="pre">object_history.html</span></tt></font></li>
</ul>
<p><font id="551">For those templates that cannot be overridden in this way, you may still override them for your entire project. </font><font id="552">Just place the new version in your <tt class="docutils literal"><span class="pre">templates/admin</span></tt> directory. </font><font id="553">This is particularly useful to create custom 404 and 500 pages.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="554">Note</font></p>
<p class="last"><font id="555">Some of the admin templates, such as <tt class="docutils literal"><span class="pre">change_list_results.html</span></tt> are used to render custom inclusion tags. </font><font id="556">These may be overridden, but in such cases you are probably better off creating your own version of the tag in question and giving it a different name. </font><font id="557">That way you can use it selectively.</font></p>
</div>
</div>
<div class="section" id="s-root-and-login-templates">
<span id="root-and-login-templates"></span><h3><font id="649">Root and login templates</font><a class="headerlink" href="index.html#root-and-login-templates" title="Permalink to this headline">¶</a></h3>
<p><font id="558">If you wish to change the index, login or logout templates, you are better off creating your own <tt class="docutils literal"><span class="pre">AdminSite</span></tt> instance (see below), and changing the <a class="reference internal" href="index.html#django.contrib.admin.AdminSite.index_template" title="django.contrib.admin.AdminSite.index_template"><tt class="xref py py-attr docutils literal"><span class="pre">AdminSite.index_template</span></tt></a> , <a class="reference internal" href="index.html#django.contrib.admin.AdminSite.login_template" title="django.contrib.admin.AdminSite.login_template"><tt class="xref py py-attr docutils literal"><span class="pre">AdminSite.login_template</span></tt></a> or <a class="reference internal" href="index.html#django.contrib.admin.AdminSite.logout_template" title="django.contrib.admin.AdminSite.logout_template"><tt class="xref py py-attr docutils literal"><span class="pre">AdminSite.logout_template</span></tt></a> properties.</font></p>
</div>
</div>
<div class="section" id="s-adminsite-objects">
<span id="adminsite-objects"></span><h2><font id="632">AdminSite</font> objects</h2>
<dl class="class">
<dt id="django.contrib.admin.AdminSite">
<em class="property">class </em><tt class="descname">AdminSite</tt>(<em>name='admin'</em>)<a class="headerlink" href="index.html#django.contrib.admin.AdminSite" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="559">A Django administrative site is represented by an instance of <tt class="docutils literal"><span class="pre">django.contrib.admin.sites.AdminSite</span></tt>; </font><font id="560">by default, an instance of this class is created as <tt class="docutils literal"><span class="pre">django.contrib.admin.site</span></tt> and you can register your models and <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> instances with it.</font></p>
<p><font id="561">When constructing an instance of an <tt class="docutils literal"><span class="pre">AdminSite</span></tt>, you can provide a unique instance name using the <tt class="docutils literal"><span class="pre">name</span></tt> argument to the constructor. </font><font id="562">This instance name is used to identify the instance, especially when <a class="reference internal" href="index.html#admin-reverse-urls"><em>reversing admin URLs</em></a>. </font><font id="563">If no instance name is provided, a default instance name of <tt class="docutils literal"><span class="pre">admin</span></tt> will be used. </font><font id="564">See <a class="reference internal" href="index.html#customizing-adminsite"><em>Customizing the AdminSite class</em></a> for an example of customizing the <a class="reference internal" href="index.html#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><tt class="xref py py-class docutils literal"><span class="pre">AdminSite</span></tt></a> class.</font></p>
</dd></dl>
<div class="section" id="s-adminsite-attributes">
<span id="adminsite-attributes"></span><h3><font id="650">AdminSite</font> attributes</h3>
<p><font id="565">Templates can override or extend base admin templates as described in <a class="reference internal" href="index.html#admin-overriding-templates"><em>Overriding admin templates</em></a>.</font></p>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.site_header">
<tt class="descclassname">AdminSite.</tt><tt class="descname">site_header</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.site_header" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="566">The text to put at the top of each admin page, as an <tt class="docutils literal"><span class="pre">&lt;h1&gt;</span></tt> (a string). </font><font id="567">By default, this is “Django administration”.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.site_title">
<tt class="descclassname">AdminSite.</tt><tt class="descname">site_title</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.site_title" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="568">The text to put at the end of each admin page’s <tt class="docutils literal"><span class="pre">&lt;title&gt;</span></tt> (a string). </font><font id="569">By default, this is “Django site admin”.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.site_url">
<tt class="descclassname">AdminSite.</tt><tt class="descname">site_url</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.site_url" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="570">The URL for the “View site” link at the top of each admin page. </font><font id="571">By default, <tt class="docutils literal"><span class="pre">site_url</span></tt> is <tt class="docutils literal"><span class="pre">/</span></tt>. </font><font id="572">Set it to <tt class="docutils literal"><span class="pre">None</span></tt> to remove the link.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.index_title">
<tt class="descclassname">AdminSite.</tt><tt class="descname">index_title</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.index_title" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="573">The text to put at the top of the admin index page (a string). </font><font id="574">By default, this is “Site administration”.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.index_template">
<tt class="descclassname">AdminSite.</tt><tt class="descname">index_template</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.index_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="575">Path to a custom template that will be used by the admin site main index view.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.app_index_template">
<tt class="descclassname">AdminSite.</tt><tt class="descname">app_index_template</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.app_index_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="576">Path to a custom template that will be used by the admin site app index view.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.login_template">
<tt class="descclassname">AdminSite.</tt><tt class="descname">login_template</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.login_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="577">Path to a custom template that will be used by the admin site login view.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.login_form">
<tt class="descclassname">AdminSite.</tt><tt class="descname">login_form</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.login_form" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="578">Subclass of <a class="reference internal" href="../../../topics/auth/default.html#django.contrib.auth.forms.AuthenticationForm" title="django.contrib.auth.forms.AuthenticationForm"><tt class="xref py py-class docutils literal"><span class="pre">AuthenticationForm</span></tt></a> that will be used by the admin site login view.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.logout_template">
<tt class="descclassname">AdminSite.</tt><tt class="descname">logout_template</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.logout_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="579">Path to a custom template that will be used by the admin site logout view.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.password_change_template">
<tt class="descclassname">AdminSite.</tt><tt class="descname">password_change_template</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.password_change_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="580">Path to a custom template that will be used by the admin site password change view.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.contrib.admin.AdminSite.password_change_done_template">
<tt class="descclassname">AdminSite.</tt><tt class="descname">password_change_done_template</tt><a class="headerlink" href="index.html#django.contrib.admin.AdminSite.password_change_done_template" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="581">Path to a custom template that will be used by the admin site password change done view.</font></p>
</dd></dl>
</div>
<div class="section" id="s-adminsite-methods">
<span id="adminsite-methods"></span><h3><font id="651">AdminSite</font> methods</h3>
<dl class="method">
<dt id="django.contrib.admin.AdminSite.each_context">
<tt class="descclassname">AdminSite.</tt><tt class="descname">each_context</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.AdminSite.each_context" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="582">Returns a dictionary of variables to put in the template context for every page in the admin site.</font></p>
<p><font id="583">Includes the following variables and values by default:</font></p>
<ul class="simple">
<li><font id="714"><tt class="docutils literal"><span class="pre">site_header</span></tt>: <a class="reference internal" href="index.html#django.contrib.admin.AdminSite.site_header" title="django.contrib.admin.AdminSite.site_header"><tt class="xref py py-attr docutils literal"><span class="pre">AdminSite.site_header</span></tt></a></font></li>
<li><font id="715"><tt class="docutils literal"><span class="pre">site_title</span></tt>: <a class="reference internal" href="index.html#django.contrib.admin.AdminSite.site_title" title="django.contrib.admin.AdminSite.site_title"><tt class="xref py py-attr docutils literal"><span class="pre">AdminSite.site_title</span></tt></a></font></li>
<li><font id="716"><tt class="docutils literal"><span class="pre">site_url</span></tt>: <a class="reference internal" href="index.html#django.contrib.admin.AdminSite.site_url" title="django.contrib.admin.AdminSite.site_url"><tt class="xref py py-attr docutils literal"><span class="pre">AdminSite.site_url</span></tt></a></font></li>
<li><font id="717"><tt class="docutils literal"><span class="pre">has_permission</span></tt>: <a class="reference internal" href="index.html#django.contrib.admin.AdminSite.has_permission" title="django.contrib.admin.AdminSite.has_permission"><tt class="xref py py-meth docutils literal"><span class="pre">AdminSite.has_permission()</span></tt></a></font></li>
</ul>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><font id="584">The <tt class="docutils literal"><span class="pre">request</span></tt> argument and the <tt class="docutils literal"><span class="pre">has_permission</span></tt> variable were added.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.contrib.admin.AdminSite.has_permission">
<tt class="descclassname">AdminSite.</tt><tt class="descname">has_permission</tt>(<em>request</em>)<a class="headerlink" href="index.html#django.contrib.admin.AdminSite.has_permission" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="585">Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the user for the given <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> has permission to view at least one page in the admin site. </font><font id="586">Defaults to requiring both <a class="reference internal" href="../auth.html#django.contrib.auth.models.User.is_active" title="django.contrib.auth.models.User.is_active"><tt class="xref py py-attr docutils literal"><span class="pre">User.is_active</span></tt></a> and <a class="reference internal" href="../auth.html#django.contrib.auth.models.User.is_staff" title="django.contrib.auth.models.User.is_staff"><tt class="xref py py-attr docutils literal"><span class="pre">User.is_staff</span></tt></a> to be <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</dd></dl>
</div>
<div class="section" id="s-hooking-adminsite-instances-into-your-urlconf">
<span id="hooking-adminsite-instances-into-your-urlconf"></span><h3><font id="652">Hooking </font><tt class="docutils literal"><span class="pre">AdminSite</span></tt></h3>
<p><font id="587">The last step in setting up the Django admin is to hook your <tt class="docutils literal"><span class="pre">AdminSite</span></tt> instance into your URLconf. </font><font id="588">Do this by pointing a given URL at the <tt class="docutils literal"><span class="pre">AdminSite.urls</span></tt> method.</font></p>
<p><font id="589">In this example, we register the default <tt class="docutils literal"><span class="pre">AdminSite</span></tt> instance <tt class="docutils literal"><span class="pre">django.contrib.admin.site</span></tt> at the URL <tt class="docutils literal"><span class="pre">/admin/</span></tt></font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="s-customizing-the-adminsite-class">
<span id="s-customizing-adminsite"></span><span id="customizing-the-adminsite-class"></span><span id="customizing-adminsite"></span><h3><font id="653">Customizing the </font><a class="reference internal" href="index.html#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><tt class="xref py py-class docutils literal"><span class="pre">AdminSite</span></tt></a></h3>
<p><font id="590">If you’d like to set up your own admin site with custom behavior, you’re free to subclass <tt class="docutils literal"><span class="pre">AdminSite</span></tt> and override or add anything you like. </font><font id="591">Then, simply create an instance of your <tt class="docutils literal"><span class="pre">AdminSite</span></tt> subclass (the same way you’d instantiate any other Python class) and register your models and <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> subclasses with it instead of with the default site. </font><font id="592">Finally, update <tt class="file docutils literal"><span class="pre">myproject/urls.py</span></tt> to reference your <a class="reference internal" href="index.html#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><tt class="xref py py-class docutils literal"><span class="pre">AdminSite</span></tt></a> subclass.</font></p>
<div class="highlight-python"><div class="snippet-filename">myapp/admin.py</div>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.admin</span> <span class="kn">import</span> <span class="n">AdminSite</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">MyModel</span>

<span class="k">class</span> <span class="nc">MyAdminSite</span><span class="p">(</span><span class="n">AdminSite</span><span class="p">):</span>
    <span class="n">site_header</span> <span class="o">=</span> <span class="s">'Monty Python administration'</span>

<span class="n">admin_site</span> <span class="o">=</span> <span class="n">MyAdminSite</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'myadmin'</span><span class="p">)</span>
<span class="n">admin_site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="snippet-filename">myproject/urls.py</div>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">myapp.admin</span> <span class="kn">import</span> <span class="n">admin_site</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^myadmin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin_site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><font id="593">Note that you may not want autodiscovery of <tt class="docutils literal"><span class="pre">admin</span></tt> modules when using your own <tt class="docutils literal"><span class="pre">AdminSite</span></tt> instance since you will likely be importing all the per-app <tt class="docutils literal"><span class="pre">admin</span></tt> modules in your <tt class="docutils literal"><span class="pre">myproject.admin</span></tt> module. </font><font id="594">This means you need to put <tt class="docutils literal"><span class="pre">'django.contrib.admin.apps.SimpleAdminConfig'</span></tt> instead of <tt class="docutils literal"><span class="pre">'django.contrib.admin'</span></tt> in your <a class="reference internal" href="../../settings.html#std:setting-INSTALLED_APPS"><tt class="xref std std-setting docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a> setting.</font></p>
</div>
<div class="section" id="s-multiple-admin-sites-in-the-same-urlconf">
<span id="s-multiple-admin-sites"></span><span id="multiple-admin-sites-in-the-same-urlconf"></span><span id="multiple-admin-sites"></span><h3><font id="654">Multiple admin sites in the same URLconf</font><a class="headerlink" href="index.html#multiple-admin-sites-in-the-same-urlconf" title="Permalink to this headline">¶</a></h3>
<p><font id="595">It’s easy to create multiple instances of the admin site on the same Django-powered Web site. </font><font id="596">Just create multiple instances of <tt class="docutils literal"><span class="pre">AdminSite</span></tt> and root each one at a different URL.</font></p>
<p><font id="597">In this example, the URLs <tt class="docutils literal"><span class="pre">/basic-admin/</span></tt> and <tt class="docutils literal"><span class="pre">/advanced-admin/</span></tt> feature separate versions of the admin site – using the <tt class="docutils literal"><span class="pre">AdminSite</span></tt> instances <tt class="docutils literal"><span class="pre">myproject.admin.basic_site</span></tt> and <tt class="docutils literal"><span class="pre">myproject.admin.advanced_site</span></tt>, respectively:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># urls.py</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">myproject.admin</span> <span class="kn">import</span> <span class="n">basic_site</span><span class="p">,</span> <span class="n">advanced_site</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^basic-admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">basic_site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r'^advanced-admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">advanced_site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><font id="598"><tt class="docutils literal"><span class="pre">AdminSite</span></tt> instances take a single argument to their constructor, their name, which can be anything you like. </font><font id="599">This argument becomes the prefix to the URL names for the purposes of <a class="reference internal" href="index.html#admin-reverse-urls"><em>reversing them</em></a>. </font><font id="600">This is only necessary if you are using more than one <tt class="docutils literal"><span class="pre">AdminSite</span></tt>.</font></p>
</div>
<div class="section" id="s-adding-views-to-admin-sites">
<span id="adding-views-to-admin-sites"></span><h3><font id="655">Adding views to admin sites</font><a class="headerlink" href="index.html#adding-views-to-admin-sites" title="Permalink to this headline">¶</a></h3>
<p><font id="601">Just like <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin</span></tt></a>, <a class="reference internal" href="index.html#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><tt class="xref py py-class docutils literal"><span class="pre">AdminSite</span></tt></a> provides a <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_urls" title="django.contrib.admin.ModelAdmin.get_urls"><tt class="xref py py-meth docutils literal"><span class="pre">get_urls()</span></tt></a> method that can be overridden to define additional views for the site. </font><font id="602">To add a new view to your admin site, extend the base <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin.get_urls" title="django.contrib.admin.ModelAdmin.get_urls"><tt class="xref py py-meth docutils literal"><span class="pre">get_urls()</span></tt></a> method to include a pattern for your new view.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="603">Note</font></p>
<p><font id="604">Any view you render that uses the admin templates, or extends the base admin template, should set <tt class="docutils literal"><span class="pre">request.current_app</span></tt> before rendering the template. </font><font id="605">It should be set to either <tt class="docutils literal"><span class="pre">self.name</span></tt> if your view is on an <tt class="docutils literal"><span class="pre">AdminSite</span></tt> or <tt class="docutils literal"><span class="pre">self.admin_site.name</span></tt> if your view is on a <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>.</font></p>
<div class="last versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><font id="606">In previous versions of Django, you had to provide the <tt class="docutils literal"><span class="pre">current_app</span></tt> argument to <a class="reference internal" href="../../templates/api.html#django.template.RequestContext" title="django.template.RequestContext"><tt class="xref py py-class docutils literal"><span class="pre">RequestContext</span></tt></a> or <a class="reference internal" href="../../templates/api.html#django.template.Context" title="django.template.Context"><tt class="xref py py-class docutils literal"><span class="pre">Context</span></tt></a> when rendering the template.</font></p>
</div>
</div>
</div>
<div class="section" id="s-adding-a-password-reset-feature">
<span id="s-auth-password-reset"></span><span id="adding-a-password-reset-feature"></span><span id="auth-password-reset"></span><h3><font id="656">Adding a password-reset feature</font><a class="headerlink" href="index.html#adding-a-password-reset-feature" title="Permalink to this headline">¶</a></h3>
<p><font id="607">You can add a password-reset feature to the admin site by adding a few lines to your URLconf. </font><font id="608">Specifically, add these four patterns:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">views</span> <span class="k">as</span> <span class="n">auth_views</span>

<span class="n">url</span><span class="p">(</span><span class="s">r'^admin/password_reset/$'</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">password_reset</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'admin_password_reset'</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r'^admin/password_reset/done/$'</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">password_reset_done</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'password_reset_done'</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r'^reset/(?P&lt;uidb64&gt;[0-9A-Za-z_\-]+)/(?P&lt;token&gt;.+)/$'</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">password_reset_confirm</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'password_reset_confirm'</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r'^reset/done/$'</span><span class="p">,</span> <span class="n">auth_views</span><span class="o">.</span><span class="n">password_reset_complete</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'password_reset_complete'</span><span class="p">),</span>
</pre></div>
</div>
<p><font id="609">(This assumes you’ve added the admin at <tt class="docutils literal"><span class="pre">admin/</span></tt> and requires that you put the URLs starting with <tt class="docutils literal"><span class="pre">^admin/</span></tt> before the line that includes the admin app itself).</font></p>
<p><font id="610">The presence of the <tt class="docutils literal"><span class="pre">admin_password_reset</span></tt> named URL will cause a “forgotten your password?” link to appear on the default admin log-in page under the password box.</font></p>
</div>
</div>
<div class="section" id="s-reversing-admin-urls">
<span id="s-admin-reverse-urls"></span><span id="reversing-admin-urls"></span><span id="admin-reverse-urls"></span><h2><font id="633">Reversing admin URLs</font><a class="headerlink" href="index.html#reversing-admin-urls" title="Permalink to this headline">¶</a></h2>
<p><font id="611">When an <a class="reference internal" href="index.html#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><tt class="xref py py-class docutils literal"><span class="pre">AdminSite</span></tt></a> is deployed, the views provided by that site are accessible using Django’s <a class="reference internal" href="../../../topics/http/urls.html#naming-url-patterns"><em>URL reversing system</em></a>.</font></p>
<p><font id="612">The <a class="reference internal" href="index.html#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><tt class="xref py py-class docutils literal"><span class="pre">AdminSite</span></tt></a> provides the following named URL patterns:</font></p>
<table class="docutils">
<colgroup>
<col width="30%"></col>
<col width="29%"></col>
<col width="41%"></col>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Page</th>
<th class="head">URL name</th>
<th class="head">Parameters</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Index</td>
<td><tt class="docutils literal"><span class="pre">index</span></tt></td>
<td> </td>
</tr>
<tr class="row-odd"><td>Logout</td>
<td><tt class="docutils literal"><span class="pre">logout</span></tt></td>
<td> </td>
</tr>
<tr class="row-even"><td>Password change</td>
<td><tt class="docutils literal"><span class="pre">password_change</span></tt></td>
<td> </td>
</tr>
<tr class="row-odd"><td>Password change done</td>
<td><tt class="docutils literal"><span class="pre">password_change_done</span></tt></td>
<td> </td>
</tr>
<tr class="row-even"><td>i18n JavaScript</td>
<td><tt class="docutils literal"><span class="pre">jsi18n</span></tt></td>
<td> </td>
</tr>
<tr class="row-odd"><td>Application index page</td>
<td><tt class="docutils literal"><span class="pre">app_list</span></tt></td>
<td><tt class="docutils literal"><span class="pre">app_label</span></tt></td>
</tr>
<tr class="row-even"><td>Redirect to object’s page</td>
<td><tt class="docutils literal"><span class="pre">view_on_site</span></tt></td>
<td><tt class="docutils literal"><span class="pre">content_type_id</span></tt>, <tt class="docutils literal"><span class="pre">object_id</span></tt></td>
</tr>
</tbody>
</table>
<p><font id="613">Each <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin</span></tt></a> instance provides an additional set of named URLs:</font></p>
<table class="docutils">
<colgroup>
<col width="27%"></col>
<col width="57%"></col>
<col width="16%"></col>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Page</th>
<th class="head">URL name</th>
<th class="head">Parameters</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Changelist</td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">app_label</span> <span class="pre">}}_{{</span> <span class="pre">model_name</span> <span class="pre">}}_changelist</span></tt></td>
<td> </td>
</tr>
<tr class="row-odd"><td>Add</td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">app_label</span> <span class="pre">}}_{{</span> <span class="pre">model_name</span> <span class="pre">}}_add</span></tt></td>
<td> </td>
</tr>
<tr class="row-even"><td>History</td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">app_label</span> <span class="pre">}}_{{</span> <span class="pre">model_name</span> <span class="pre">}}_history</span></tt></td>
<td><tt class="docutils literal"><span class="pre">object_id</span></tt></td>
</tr>
<tr class="row-odd"><td>Delete</td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">app_label</span> <span class="pre">}}_{{</span> <span class="pre">model_name</span> <span class="pre">}}_delete</span></tt></td>
<td><tt class="docutils literal"><span class="pre">object_id</span></tt></td>
</tr>
<tr class="row-even"><td>Change</td>
<td><tt class="docutils literal"><span class="pre">{{</span> <span class="pre">app_label</span> <span class="pre">}}_{{</span> <span class="pre">model_name</span> <span class="pre">}}_change</span></tt></td>
<td><tt class="docutils literal"><span class="pre">object_id</span></tt></td>
</tr>
</tbody>
</table>
<p><font id="614">These named URLs are registered with the application namespace <tt class="docutils literal"><span class="pre">admin</span></tt>, and with an instance namespace corresponding to the name of the Site instance.</font></p>
<p><font id="615">So - if you wanted to get a reference to the Change view for a particular <tt class="docutils literal"><span class="pre">Choice</span></tt> object (from the polls application) in the default admin, you would call:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.core</span> <span class="kn">import</span> <span class="n">urlresolvers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Choice</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change_url</span> <span class="o">=</span> <span class="n">urlresolvers</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="s">'admin:polls_choice_change'</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,))</span>
</pre></div>
</div>
<p><font id="616">This will find the first registered instance of the admin application (whatever the instance name), and resolve to the view for changing <tt class="docutils literal"><span class="pre">poll.</span></tt></font><font id="617">Choice instances in that instance.</font></p>
<p><font id="618">If you want to find a URL in a specific admin instance, provide the name of that instance as a <tt class="docutils literal"><span class="pre">current_app</span></tt> hint to the reverse call. </font><font id="619">For example, if you specifically wanted the admin view from the admin instance named <tt class="docutils literal"><span class="pre">custom</span></tt>, you would need to call:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">change_url</span> <span class="o">=</span> <span class="n">urlresolvers</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="s">'admin:polls_choice_change'</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,),</span> <span class="n">current_app</span><span class="o">=</span><span class="s">'custom'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="620">For more details, see the documentation on <a class="reference internal" href="../../../topics/http/urls.html#topics-http-reversing-url-namespaces"><em>reversing namespaced URLs</em></a>.</font></p>
<p><font id="621">To allow easier reversing of the admin urls in templates, Django provides an <tt class="docutils literal"><span class="pre">admin_urlname</span></tt> filter which takes an action as argument:</font></p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">load</span> <span class="nv">admin_urls</span> <span class="cp">%}</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="k">url</span> <span class="nv">opts</span><span class="o">|</span><span class="nf">admin_urlname</span><span class="s1">:'add'</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Add user<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{%</span> <span class="k">url</span> <span class="nv">opts</span><span class="o">|</span><span class="nf">admin_urlname</span><span class="s1">:'delete'</span> <span class="nv">user.pk</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>Delete this user<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
<p><font id="622">The action in the examples above match the last part of the URL names for <a class="reference internal" href="index.html#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><tt class="xref py py-class docutils literal"><span class="pre">ModelAdmin</span></tt></a> instances described above. </font><font id="623">The <tt class="docutils literal"><span class="pre">opts</span></tt> variable can be any object which has an <tt class="docutils literal"><span class="pre">app_label</span></tt> and <tt class="docutils literal"><span class="pre">model_name</span></tt> attributes and is usually supplied by the admin views for the current model.</font></p>
</div>
</div>
</div>
</div>
</div>
<div class="yui-b" id="sidebar">
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<h3><font id="657">Table Of Contents</font></h3>
<ul>
<li><a class="reference internal" href="index.html#"><font id="718">The Django admin site</font></a><ul>
<li><a class="reference internal" href="index.html#overview"><font id="719">Overview</font></a><ul>
<li><a class="reference internal" href="index.html#other-topics"><font id="720">Other topics</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#modeladmin-objects"><font id="721"><tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> objects</font></a><ul>
<li><a class="reference internal" href="index.html#the-register-decorator"><font id="722">The register decorator</font></a></li>
<li><a class="reference internal" href="index.html#discovery-of-admin-files"><font id="723">Discovery of admin files</font></a></li>
<li><a class="reference internal" href="index.html#modeladmin-options"><font id="724"><tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> options</font></a><ul>
<li><a class="reference internal" href="index.html#custom-template-options"><font id="725">Custom template options</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#modeladmin-methods"><font id="726"><tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> methods</font></a><ul>
<li><a class="reference internal" href="index.html#other-methods"><font id="727">Other methods</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#modeladmin-asset-definitions"><font id="728"><tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> asset definitions</font></a><ul>
<li><a class="reference internal" href="index.html#jquery"><font id="729">jQuery</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#adding-custom-validation-to-the-admin"><font id="730">Adding custom validation to the admin</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#inlinemodeladmin-objects"><font id="731"><tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> objects</font></a><ul>
<li><a class="reference internal" href="index.html#inlinemodeladmin-options"><font id="732"><tt class="docutils literal"><span class="pre">InlineModelAdmin</span></tt> options</font></a></li>
<li><a class="reference internal" href="index.html#working-with-a-model-with-two-or-more-foreign-keys-to-the-same-parent-model"><font id="733">Working with a model with two or more foreign keys to the same parent model</font></a></li>
<li><a class="reference internal" href="index.html#working-with-many-to-many-models"><font id="734">Working with many-to-many models</font></a></li>
<li><a class="reference internal" href="index.html#working-with-many-to-many-intermediary-models"><font id="735">Working with many-to-many intermediary models</font></a></li>
<li><a class="reference internal" href="index.html#using-generic-relations-as-an-inline"><font id="736">Using generic relations as an inline</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#overriding-admin-templates"><font id="737">Overriding admin templates</font></a><ul>
<li><a class="reference internal" href="index.html#set-up-your-projects-admin-template-directories"><font id="738">Set up your projects admin template directories</font></a></li>
<li><a class="reference internal" href="index.html#overriding-vs-replacing-an-admin-template"><font id="739">Overriding vs. replacing an admin template</font></a></li>
<li><a class="reference internal" href="index.html#templates-which-may-be-overridden-per-app-or-model"><font id="740">Templates which may be overridden per app or model</font></a></li>
<li><a class="reference internal" href="index.html#root-and-login-templates"><font id="741">Root and login templates</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#adminsite-objects"><font id="742"><tt class="docutils literal"><span class="pre">AdminSite</span></tt> objects</font></a><ul>
<li><a class="reference internal" href="index.html#adminsite-attributes"><font id="743"><tt class="docutils literal"><span class="pre">AdminSite</span></tt> attributes</font></a></li>
<li><a class="reference internal" href="index.html#adminsite-methods"><font id="744"><tt class="docutils literal"><span class="pre">AdminSite</span></tt> methods</font></a></li>
<li><a class="reference internal" href="index.html#hooking-adminsite-instances-into-your-urlconf"><font id="745">Hooking <tt class="docutils literal"><span class="pre">AdminSite</span></tt> instances into your URLconf</font></a></li>
<li><a class="reference internal" href="index.html#customizing-the-adminsite-class"><font id="746">Customizing the <tt class="docutils literal"><span class="pre">AdminSite</span></tt> class</font></a></li>
<li><a class="reference internal" href="index.html#multiple-admin-sites-in-the-same-urlconf"><font id="747">Multiple admin sites in the same URLconf</font></a></li>
<li><a class="reference internal" href="index.html#adding-views-to-admin-sites"><font id="748">Adding views to admin sites</font></a></li>
<li><a class="reference internal" href="index.html#adding-a-password-reset-feature"><font id="749">Adding a password-reset feature</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="index.html#reversing-admin-urls"><font id="750">Reversing admin URLs</font></a></li>
</ul>
</li>
</ul>
<h3><font id="658">Browse</font></h3>
<ul>
<li><font id="751">Prev: <a href="../index.html"><tt class="docutils literal"><span class="pre">contrib</span></tt> packages</a></font></li>
<li><font id="752">Next: <a href="actions.html">Admin actions</a></font></li>
</ul>
<h3><font id="659">You are here:</font></h3>
<ul>
<li>
<a href="../../../index.html"><font id="753">Django 1.8.2.dev20150513143415 documentation</font></a>
<ul><li><a href="../../index.html"><font id="754">API Reference</font></a>
<ul><li><a href="../index.html"><font id="755">None</font></a>
<ul><li><font id="756">The Django admin site</font></li></ul>
</li></ul></li></ul>
</li>
</ul>
<h3><font id="660">This Page</font></h3>
<ul class="this-page-menu">
<li><a href="http://python.usyiyi.cn/django/_sources/ref/contrib/admin/index.txt" rel="nofollow"><font id="757">Show Source</font></a></li>
</ul>
<div id="searchbox" style="display: none">
<h3><font id="661">Quick search</font></h3>
<form action="http://python.usyiyi.cn/django/search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
<p class="searchtip" style="font-size: 90%"><font id="624"> Enter search terms or a module, class or function name. </font></p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<h3><font id="662">Last update:</font></h3>
<p class="topless"><font id="625">May 13, 2015</font></p>
</div>
</div>
<div id="ft">
<div class="nav">
    « <a href="../index.html" title='&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;contrib&lt;/span&gt;&lt;/tt&gt; packages'>previous</a>
     |
    <a accesskey="U" href="../../index.html" title="API Reference">up</a>
   |
    <a href="actions.html" title="Admin actions">next</a> »</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div id="disqus_thread"></div><br>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'djangocn'; // required: replace example with your forum shortname
    var disqus_identifier = '/django/ref/contrib/admin/index.html';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<link href="http://python.usyiyi.cn/django/_static/ms_translator.css" rel="stylesheet" type="text/css"/>
<script src="http://python.usyiyi.cn/django/_static/ms_translator.js" type="text/javascript"></script>
<script src="http://python.usyiyi.cn/django/_static/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
<div id="MicrosoftTranslator" style="display:none; position: absolute; z-index: 2147483647; margin: 0px; border: 2px solid rgb(210, 210, 210); padding: 0px; color: rgb(0, 0, 0); background-color: rgb(230, 230, 230); font-family: Arial,Helvetica,Sans-Serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; direction: ltr; text-align: left; left: 274px; top: 2048.03px; min-width: 400px;">
    <div id="MSTCClose" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/tooltip_close.gif">
      </a>
    </div>
    
    <div id="MSTCPopDown" style="float: right;" style="display: none;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popdown.gif">
      </a>
    </div>
    <div id="MSTCPopUP" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popup.gif">
      </a>
    </div>
    
    <div id="MSTCTitle" style="margin: 4px 4px 8px; font-weight: bold;">原文
    </div>
    
    <div style="direction: ltr; text-align: left;">
      <span id="MSTCOrigion" style="display: inline-block; margin: 0px 4px 4px;"> </span>
    </div>
    
    <div id="MicrosoftTranslatorCommunity" class="MSTCltr">
      <div id="MSTCContent">
        <a id="MSTCExpandLink">
          <span id="MSTCImprove">改进翻译</span>
          <span id="MSTCSuggest">最小化</span>
          <img src="http://python.usyiyi.cn/django/_static/ctftoggledown.gif" id="MSTCToggleDown">
          <img src="http://python.usyiyi.cn/django/_static/ctftoggleup.gif" id="MSTCToggleUp">
        </a>
        <div id="MSTCRootPanel">
          <span id="MSTCLoading" style="display: none;">正在加载...</span>
          <div style="display: none;" id="MSTCTransPanelError">
            <div class="MSTCTableRow">
              <div class="MSTCTransPanelExc MSTCTableCell">
                <img style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_exclamation.gif" id="ExclamationImage">
              </div>
              <div class="MSTCTableCell">
                <span id="MSTCTransPanelErrorMsg"></span>
              </div>
            </div>
            <div class="MSTCTableRow">
              <div class="MSTCTableCell"></div>
              <div class="MSTCTableCell MSTCFlipHoriz">
                <input type="image" style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_OK.gif" class="MSTCErrorButtons" id="MSTCOKImgBtn" name="MSTCOKImgBtn">
              </div>
            </div>
          </div>
          
          <div id="MSTCTransPanel">
          </div>
          
          <div id="MSTCPrevNextPanel">
            <a id="MSTCPrevLink" style='border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>上一页</span>
            </a>
            <a style='color: black; border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>第</span>
              <span id="MSTCPage"></span>
              <span>页</span>
            </a>
            <a id="MSTCNextLink" style='padding-left: 5px;'>
              <span>下一页</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>