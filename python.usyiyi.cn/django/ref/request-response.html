<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>请求和响应对象 — Django 1.8.2 中文文档</title>
<link href="../_static/default.css" rel="stylesheet" type="text/css"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.2.dev20150513143415',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="../_static/jquery.js" type="text/javascript"></script>
<script src="../_static/underscore.js" type="text/javascript"></script>
<script src="../_static/doctools.js" type="text/javascript"></script>
<link href="../index.html" rel="top" title="Django 1.8.2.dev20150513143415 documentation"/>
<link href="index.html" rel="up" title="API Reference"/>
<link href="schema-editor.html" rel="next" title="SchemaEditor"/>
<link href="models/database-functions.html" rel="prev" title="Database Functions"/>
<script src="http://python.usyiyi.cn/django/templatebuiltins.js" type="text/javascript"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/ref/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/ref/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>
</head>
<body>
<div class="document">
<div class="yui-t6" id="custom-doc">
<div id="hd">
<h1><font id="290">Django 1.8.2 文档</font></h1>
<div id="global-nav">
<a href="../index.html" title="Home page">Home</a>  |
        <a href="../contents.html" title="Table of contents">Table of contents</a>  |
        <a href="../genindex.html" title="Global index">Index</a>  |
        <a href="../py-modindex.html" title="Module index">Modules</a>
</div>
<div class="nav">
    « <a href="models/database-functions.html" title="Database Functions">previous</a>
     |
    <a accesskey="U" href="index.html" title="API Reference">up</a>
   |
    <a href="schema-editor.html" title='&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;SchemaEditor&lt;/span&gt;&lt;/tt&gt;'>next</a> »</div>
</div>
<div id="bd">
<div id="yui-main">
<div class="yui-b">
<div class="yui-g" id="ref-request-response">
<div class="section" id="s-module-django.http">
<span id="s-request-and-response-objects"></span><span id="module-django.http"></span><span id="request-and-response-objects"></span><h1><font id="291">请求和响应对象</font><a class="headerlink" href="request-response.html#module-django.http" title="Permalink to this headline">¶</a></h1>
<div class="section" id="s-quick-overview">
<span id="quick-overview"></span><h2><font id="292">概述</font><a class="headerlink" href="request-response.html#quick-overview" title="Permalink to this headline">¶</a></h2>
<p><font id="1">Django使用请求和响应对象在系统间传递状态。</font></p>
<p><font id="2">当请求一个页面时，Django会建立一个包含请求元数据的 <a class="reference internal" href="request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><tt class="xref py py-class docutils literal"><span class="pre">HttpRequest</span></tt></a> 对象。 </font><font id="3">当Django加载适当的视图时，&nbsp;<a class="reference internal" href="request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><tt class="xref py py-class docutils literal"><span class="pre">HttpRequest</span></tt></a> 对象将作为视图函数的第一个参数。</font><font id="4">每个视图会返回一个 <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> 对象。</font></p>
<p><font id="5">本文档对 <a class="reference internal" href="request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><tt class="xref py py-class docutils literal"><span class="pre">HttpRequest</span></tt></a> 和 <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> 对象的API接口进行了说明, 这些API接口定义在 <a class="reference internal" href="request-response.html#module-django.http" title="django.http: Classes dealing with HTTP requests and responses."><tt class="xref py py-mod docutils literal"><span class="pre">django.http</span></tt></a>模块中。</font></p>
</div>
<div class="section" id="s-httprequest-objects">
<span id="httprequest-objects"></span><h2><font id="293">HttpRequest 对象</font><a class="headerlink" href="request-response.html#httprequest-objects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.http.HttpRequest">
<em class="property">class </em><tt class="descname">HttpRequest</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<div class="section" id="s-attributes">
<span id="s-httprequest-attributes"></span><span id="attributes"></span><span id="httprequest-attributes"></span><h3><font id="299">属性</font><a class="headerlink" href="request-response.html#attributes" title="Permalink to this headline">¶</a></h3>
<p><font id="6">除非特别说明，所有属性都只能是只读的。</font><font id="7"><tt class="docutils literal"><span class="pre">session</span></tt> 属性是个例外，需要注意。</font></p>
<dl class="attribute">
<dt id="django.http.HttpRequest.scheme">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">scheme</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.scheme" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="8">一个表示请求方案的字符串 (通常是<tt class="docutils literal"><span class="pre">http</span></tt> 或<tt class="docutils literal"><span class="pre">https</span></tt> ).</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.body">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">body</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.body" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="9">The raw HTTP request body as a byte string. </font><font id="10">This is useful for processing data in different ways than conventional HTML forms: binary images, XML payload etc. </font><font id="11">For processing conventional form data, use <tt class="docutils literal"><span class="pre">HttpRequest.POST</span></tt>.</font></p>
<p><font id="12">You can also read from an HttpRequest using a file-like interface. </font><font id="13">See <a class="reference internal" href="request-response.html#django.http.HttpRequest.read" title="django.http.HttpRequest.read"><tt class="xref py py-meth docutils literal"><span class="pre">HttpRequest.read()</span></tt></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.path">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">path</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.path" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="14">A string representing the full path to the requested page, not including the domain.</font></p>
<p><font id="15">Example: <tt class="docutils literal"><span class="pre">"/music/bands/the_beatles/"</span></tt></font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.path_info">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">path_info</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.path_info" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="16">Under some Web server configurations, the portion of the URL after the host name is split up into a script prefix portion and a path info portion. </font><font id="17">The <tt class="docutils literal"><span class="pre">path_info</span></tt> attribute always contains the path info portion of the path, no matter what Web server is being used. </font><font id="18">Using this instead of <a class="reference internal" href="request-response.html#django.http.HttpRequest.path" title="django.http.HttpRequest.path"><tt class="xref py py-attr docutils literal"><span class="pre">path</span></tt></a> can make your code easier to move between test and deployment servers.</font></p>
<p><font id="19">For example, if the <tt class="docutils literal"><span class="pre">WSGIScriptAlias</span></tt> for your application is set to <tt class="docutils literal"><span class="pre">"/minfo"</span></tt>, then <tt class="docutils literal"><span class="pre">path</span></tt> might be <tt class="docutils literal"><span class="pre">"/minfo/music/bands/the_beatles/"</span></tt> and <tt class="docutils literal"><span class="pre">path_info</span></tt> would be <tt class="docutils literal"><span class="pre">"/music/bands/the_beatles/"</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.method">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">method</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.method" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="20">一个表示在请求中使用HTTP方法的字符串.</font><font id="21">必须使用大写.</font><font id="22">例如:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
<span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
    <span class="n">do_something_else</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.encoding">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">encoding</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.encoding" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="23">A string representing the current encoding used to decode form submission data (or <tt class="docutils literal"><span class="pre">None</span></tt>, which means the <a class="reference internal" href="settings.html#std:setting-DEFAULT_CHARSET"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_CHARSET</span></tt></a> setting is used). </font><font id="24">You can write to this attribute to change the encoding used when accessing the form data. </font><font id="25">Any subsequent attribute accesses (such as reading from <tt class="docutils literal"><span class="pre">GET</span></tt> or <tt class="docutils literal"><span class="pre">POST</span></tt>) will use the new <tt class="docutils literal"><span class="pre">encoding</span></tt> value. </font><font id="26">Useful if you know the form data is not in the <a class="reference internal" href="settings.html#std:setting-DEFAULT_CHARSET"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_CHARSET</span></tt></a> encoding.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.GET">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">GET</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.GET" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="27">一个包含所有HTTP GET参数的字典式对象</font><font id="28">.详情请参考下面的<a class="reference internal" href="request-response.html#django.http.QueryDict" title="django.http.QueryDict"><tt class="xref py py-class docutils literal"><span class="pre">QueryDict</span></tt></a>文档.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.POST">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">POST</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.POST" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="29">一个包含所有HTTP POST参数的字典式对象,用于请求中包含格式化数据时.</font><font id="30">详情请参考下面的 <a class="reference internal" href="request-response.html#django.http.QueryDict" title="django.http.QueryDict"><tt class="xref py py-class docutils literal"><span class="pre">QueryDict</span></tt></a> 文档.</font><font id="31">如果你需要在请求中包含原始数据或非格式化数据,请使用<a class="reference internal" href="request-response.html#django.http.HttpRequest.body" title="django.http.HttpRequest.body"><tt class="xref py py-attr docutils literal"><span class="pre">HttpRequest.body</span></tt></a> 属性.</font></p>
<p><font id="32">It’s possible that a request can come in via POST with an empty <tt class="docutils literal"><span class="pre">POST</span></tt> dictionary – if, say, a form is requested via the POST HTTP method but does not include form data. </font><font id="371">Therefore, you shouldn’t use <tt class="docutils literal"><span class="pre">if</span> <span class="pre">request.POST</span></tt> to check for use of the POST method; </font><font id="372">instead, use <tt class="docutils literal"><span class="pre">if</span> <span class="pre">request.method</span> <span class="pre">==</span> <span class="pre">"POST"</span></tt> (see above).</font></p>
<p><font id="33">Note: <tt class="docutils literal"><span class="pre">POST</span></tt> does <em>not</em> include file-upload information. </font><font id="34">See <tt class="docutils literal"><span class="pre">FILES</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.REQUEST">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">REQUEST</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.REQUEST" title="Permalink to this definition">¶</a></dt>
<dd><div class="deprecated">
<p><font id="35"><span class="versionmodified">Deprecated since version 1.7: </span></font><font id="36">Use the more explicit <tt class="docutils literal"><span class="pre">GET</span></tt> and <tt class="docutils literal"><span class="pre">POST</span></tt> instead.</font></p>
</div>
<p><font id="37">For convenience, a dictionary-like object that searches <tt class="docutils literal"><span class="pre">POST</span></tt> first, then <tt class="docutils literal"><span class="pre">GET</span></tt>. </font><font id="38">Inspired by PHP’s <tt class="docutils literal"><span class="pre">$_REQUEST</span></tt>.</font></p>
<p><font id="39">For example, if <tt class="docutils literal"><span class="pre">GET</span> <span class="pre">=</span> <span class="pre">{"name":</span> <span class="pre">"john"}</span></tt> and <tt class="docutils literal"><span class="pre">POST</span> <span class="pre">=</span> <span class="pre">{"age":</span> <span class="pre">'34'}</span></tt>, <tt class="docutils literal"><span class="pre">REQUEST["name"]</span></tt> would be <tt class="docutils literal"><span class="pre">"john"</span></tt>, and <tt class="docutils literal"><span class="pre">REQUEST["age"]</span></tt> would be <tt class="docutils literal"><span class="pre">"34"</span></tt>.</font></p>
<p><font id="40">It’s strongly suggested that you use <tt class="docutils literal"><span class="pre">GET</span></tt> and <tt class="docutils literal"><span class="pre">POST</span></tt> instead of <tt class="docutils literal"><span class="pre">REQUEST</span></tt>, because the former are more explicit.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.COOKIES">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">COOKIES</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.COOKIES" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="41">一个包含所有cookies的标准Python字典.</font><font id="42">键和值都是字符串.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.FILES">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">FILES</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.FILES" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="43">一个类似于字典的对象，包含了所有的上传文件。</font><font id="373">Each key in <tt class="docutils literal"><span class="pre">FILES</span></tt> is the <tt class="docutils literal"><span class="pre">name</span></tt> from the <tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">type="file"</span> <span class="pre">name=""</span> <span class="pre">/&gt;</span></tt>. </font><font id="374"></font></p>
<p><font id="44">See <a class="reference internal" href="../topics/files.html"><em>Managing files</em></a> for more information.</font></p>
<p><font id="45">Note that <tt class="docutils literal"><span class="pre">FILES</span></tt> will only contain data if the request method was POST and the <tt class="docutils literal"><span class="pre">&lt;form&gt;</span></tt> that posted to the request had <tt class="docutils literal"><span class="pre">enctype="multipart/form-data"</span></tt>. </font><font id="375">Otherwise, <tt class="docutils literal"><span class="pre">FILES</span></tt> will be a blank dictionary-like object.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.META">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">META</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.META" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="46">A standard Python dictionary containing all available HTTP headers. </font><font id="47">Available headers depend on the client and server, but here are some examples:</font></p>
<ul class="simple">
<li><font id="320"><tt class="docutils literal"><span class="pre">CONTENT_LENGTH</span></tt> – The length of the request body (as a string).</font></li>
<li><font id="321"><tt class="docutils literal"><span class="pre">CONTENT_TYPE</span></tt> – The MIME type of the request body.</font></li>
<li><font id="322"><tt class="docutils literal"><span class="pre">HTTP_ACCEPT</span></tt> – Acceptable content types for the response.</font></li>
<li><font id="323"><tt class="docutils literal"><span class="pre">HTTP_ACCEPT_ENCODING</span></tt> – Acceptable encodings for the response.</font></li>
<li><font id="324"><tt class="docutils literal"><span class="pre">HTTP_ACCEPT_LANGUAGE</span></tt> – Acceptable languages for the response.</font></li>
<li><font id="325"><tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt> – The HTTP Host header sent by the client.</font></li>
<li><font id="326"><tt class="docutils literal"><span class="pre">HTTP_REFERER</span></tt> – The referring page, if any.</font></li>
<li><font id="327"><tt class="docutils literal"><span class="pre">HTTP_USER_AGENT</span></tt> – The client’s user-agent string.</font></li>
<li><font id="328"><tt class="docutils literal"><span class="pre">QUERY_STRING</span></tt> – The query string, as a single (unparsed) string.</font></li>
<li><font id="329"><tt class="docutils literal"><span class="pre">REMOTE_ADDR</span></tt> – The IP address of the client.</font></li>
<li><font id="330"><tt class="docutils literal"><span class="pre">REMOTE_HOST</span></tt> – The hostname of the client.</font></li>
<li><font id="331"><tt class="docutils literal"><span class="pre">REMOTE_USER</span></tt> – The user authenticated by the Web server, if any.</font></li>
<li><font id="332"><tt class="docutils literal"><span class="pre">REQUEST_METHOD</span></tt> – A string such as <tt class="docutils literal"><span class="pre">"GET"</span></tt> or <tt class="docutils literal"><span class="pre">"POST"</span></tt>.</font></li>
<li><font id="333"><tt class="docutils literal"><span class="pre">SERVER_NAME</span></tt> – The hostname of the server.</font></li>
<li><font id="334"><tt class="docutils literal"><span class="pre">SERVER_PORT</span></tt> – The port of the server (as a string).</font></li>
</ul>
<p><font id="48">With the exception of <tt class="docutils literal"><span class="pre">CONTENT_LENGTH</span></tt> and <tt class="docutils literal"><span class="pre">CONTENT_TYPE</span></tt>, as given above, any HTTP headers in the request are converted to <tt class="docutils literal"><span class="pre">META</span></tt> keys by converting all characters to uppercase, replacing any hyphens with underscores and adding an <tt class="docutils literal"><span class="pre">HTTP_</span></tt> prefix to the name. </font><font id="49">So, for example, a header called <tt class="docutils literal"><span class="pre">X-Bender</span></tt> would be mapped to the <tt class="docutils literal"><span class="pre">META</span></tt> key <tt class="docutils literal"><span class="pre">HTTP_X_BENDER</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.user">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">user</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.user" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="50">An object of type <a class="reference internal" href="settings.html#std:setting-AUTH_USER_MODEL"><tt class="xref std std-setting docutils literal"><span class="pre">AUTH_USER_MODEL</span></tt></a> representing the currently logged-in user. </font><font id="51">If the user isn’t currently logged in, <tt class="docutils literal"><span class="pre">user</span></tt> will be set to an instance of <a class="reference internal" href="contrib/auth.html#django.contrib.auth.models.AnonymousUser" title="django.contrib.auth.models.AnonymousUser"><tt class="xref py py-class docutils literal"><span class="pre">django.contrib.auth.models.AnonymousUser</span></tt></a>. </font><font id="52">You can tell them apart with <a class="reference internal" href="contrib/auth.html#django.contrib.auth.models.User.is_authenticated" title="django.contrib.auth.models.User.is_authenticated"><tt class="xref py py-meth docutils literal"><span class="pre">is_authenticated()</span></tt></a>, like so:</font></p>
<div class="highlight-python"><div class="highlight"><pre>if request.user.is_authenticated():
    # Do something for logged-in users.
else:
    # Do something for anonymous users.
</pre></div>
</div>
<p><font id="53"><tt class="docutils literal"><span class="pre">user</span></tt> is only available if your Django installation has the <a class="reference internal" href="middleware.html#django.contrib.auth.middleware.AuthenticationMiddleware" title="django.contrib.auth.middleware.AuthenticationMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">AuthenticationMiddleware</span></tt></a> activated. </font><font id="54">For more, see <a class="reference internal" href="../topics/auth/index.html"><em>User authentication in Django</em></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.session">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">session</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.session" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="55">A readable-and-writable, dictionary-like object that represents the current session. </font><font id="56">This is only available if your Django installation has session support activated. </font><font id="57">See the <a class="reference internal" href="../topics/http/sessions.html"><em>session documentation</em></a> for full details.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.urlconf">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">urlconf</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.urlconf" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="58">Not defined by Django itself, but will be read if other code (e.g., a custom middleware class) sets it. </font><font id="59">When present, this will be used as the root URLconf for the current request, overriding the <a class="reference internal" href="settings.html#std:setting-ROOT_URLCONF"><tt class="xref std std-setting docutils literal"><span class="pre">ROOT_URLCONF</span></tt></a> setting. </font><font id="60">See <a class="reference internal" href="../topics/http/urls.html#how-django-processes-a-request"><em>How Django processes a request</em></a> for details.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpRequest.resolver_match">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">resolver_match</tt><a class="headerlink" href="request-response.html#django.http.HttpRequest.resolver_match" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="61">An instance of <a class="reference internal" href="urlresolvers.html#django.core.urlresolvers.ResolverMatch" title="django.core.urlresolvers.ResolverMatch"><tt class="xref py py-class docutils literal"><span class="pre">ResolverMatch</span></tt></a> representing the resolved url. </font><font id="62">This attribute is only set after url resolving took place, which means it’s available in all views but not in middleware methods which are executed before url resolving takes place (like <tt class="docutils literal"><span class="pre">process_request</span></tt>, you can use <tt class="docutils literal"><span class="pre">process_view</span></tt> instead).</font></p>
</dd></dl>
</div>
<div class="section" id="s-methods">
<span id="methods"></span><h3><font id="300">Methods</font><a class="headerlink" href="request-response.html#methods" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="django.http.HttpRequest.get_host">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">get_host</tt>()<a class="headerlink" href="request-response.html#django.http.HttpRequest.get_host" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="63">Returns the originating host of the request using information from the <tt class="docutils literal"><span class="pre">HTTP_X_FORWARDED_HOST</span></tt> (if <a class="reference internal" href="settings.html#std:setting-USE_X_FORWARDED_HOST"><tt class="xref std std-setting docutils literal"><span class="pre">USE_X_FORWARDED_HOST</span></tt></a> is enabled) and <tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt> headers, in that order. </font><font id="64">If they don’t provide a value, the method uses a combination of <tt class="docutils literal"><span class="pre">SERVER_NAME</span></tt> and <tt class="docutils literal"><span class="pre">SERVER_PORT</span></tt> as detailed in <span class="target" id="index-0"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3333"><strong>PEP 3333</strong></a>.</font></p>
<p><font id="65">Example: <tt class="docutils literal"><span class="pre">"127.0.0.1:8000"</span></tt></font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="66">Note</font></p>
<p><font id="67">The <a class="reference internal" href="request-response.html#django.http.HttpRequest.get_host" title="django.http.HttpRequest.get_host"><tt class="xref py py-meth docutils literal"><span class="pre">get_host()</span></tt></a> method fails when the host is behind multiple proxies. </font><font id="68">One solution is to use middleware to rewrite the proxy headers, as in the following example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MultipleProxyMiddleware</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">FORWARDED_FOR_FIELDS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">'HTTP_X_FORWARDED_FOR'</span><span class="p">,</span>
        <span class="s">'HTTP_X_FORWARDED_HOST'</span><span class="p">,</span>
        <span class="s">'HTTP_X_FORWARDED_SERVER'</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Rewrites the proxy headers so that only the most</span>
<span class="sd">        recent proxy is used.</span>
<span class="sd">        """</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">FORWARDED_FOR_FIELDS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
                <span class="k">if</span> <span class="s">','</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="n">field</span><span class="p">]:</span>
                    <span class="n">parts</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="n">field</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">','</span><span class="p">)</span>
                    <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p class="last"><font id="69">This middleware should be positioned before any other middleware that relies on the value of <a class="reference internal" href="request-response.html#django.http.HttpRequest.get_host" title="django.http.HttpRequest.get_host"><tt class="xref py py-meth docutils literal"><span class="pre">get_host()</span></tt></a> – for instance, <a class="reference internal" href="middleware.html#django.middleware.common.CommonMiddleware" title="django.middleware.common.CommonMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">CommonMiddleware</span></tt></a> or <a class="reference internal" href="middleware.html#django.middleware.csrf.CsrfViewMiddleware" title="django.middleware.csrf.CsrfViewMiddleware"><tt class="xref py py-class docutils literal"><span class="pre">CsrfViewMiddleware</span></tt></a>.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.get_full_path">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">get_full_path</tt>()<a class="headerlink" href="request-response.html#django.http.HttpRequest.get_full_path" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="70">Returns the <tt class="docutils literal"><span class="pre">path</span></tt>, plus an appended query string, if applicable.</font></p>
<p><font id="71">Example: <tt class="docutils literal"><span class="pre">"/music/bands/the_beatles/?print=true"</span></tt></font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.build_absolute_uri">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">build_absolute_uri</tt>(<em>location</em>)<a class="headerlink" href="request-response.html#django.http.HttpRequest.build_absolute_uri" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="72">Returns the absolute URI form of <tt class="docutils literal"><span class="pre">location</span></tt>. </font><font id="73">If no location is provided, the location will be set to <tt class="docutils literal"><span class="pre">request.get_full_path()</span></tt>.</font></p>
<p><font id="74">If the location is already an absolute URI, it will not be altered. </font><font id="75">Otherwise the absolute URI is built using the server variables available in this request.</font></p>
<p><font id="76">Example: <tt class="docutils literal"><span class="pre">"http://example.com/music/bands/the_beatles/?print=true"</span></tt></font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.get_signed_cookie">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">get_signed_cookie</tt>(<em>key</em>, <em>default=RAISE_ERROR</em>, <em>salt=''</em>, <em>max_age=None</em>)<a class="headerlink" href="request-response.html#django.http.HttpRequest.get_signed_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="77">Returns a cookie value for a signed cookie, or raises a <tt class="docutils literal"><span class="pre">django.core.signing.BadSignature</span></tt> exception if the signature is no longer valid. </font><font id="78">If you provide the <tt class="docutils literal"><span class="pre">default</span></tt> argument the exception will be suppressed and that default value will be returned instead.</font></p>
<p><font id="79">The optional <tt class="docutils literal"><span class="pre">salt</span></tt> argument can be used to provide extra protection against brute force attacks on your secret key. </font><font id="80">If supplied, the <tt class="docutils literal"><span class="pre">max_age</span></tt> argument will be checked against the signed timestamp attached to the cookie value to ensure the cookie is not older than <tt class="docutils literal"><span class="pre">max_age</span></tt> seconds.</font></p>
<p><font id="81">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">get_signed_cookie</span><span class="p">(</span><span class="s">'name'</span><span class="p">)</span>
<span class="go">'Tony'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">get_signed_cookie</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="n">salt</span><span class="o">=</span><span class="s">'name-salt'</span><span class="p">)</span>
<span class="go">'Tony' # assuming cookie was set using the same salt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">get_signed_cookie</span><span class="p">(</span><span class="s">'non-existing-cookie'</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">KeyError: 'non-existing-cookie'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">get_signed_cookie</span><span class="p">(</span><span class="s">'non-existing-cookie'</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">get_signed_cookie</span><span class="p">(</span><span class="s">'cookie-that-was-tampered-with'</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">BadSignature: ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">get_signed_cookie</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="n">max_age</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">SignatureExpired: Signature age 1677.3839159 &gt; 60 seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">get_signed_cookie</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">max_age</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p><font id="82">See <a class="reference internal" href="../topics/signing.html"><em>cryptographic signing</em></a> for more information.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.is_secure">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">is_secure</tt>()<a class="headerlink" href="request-response.html#django.http.HttpRequest.is_secure" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="83">Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the request is secure; </font><font id="84">that is, if it was made with HTTPS.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.is_ajax">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">is_ajax</tt>()<a class="headerlink" href="request-response.html#django.http.HttpRequest.is_ajax" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="85">Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the request was made via an <tt class="docutils literal"><span class="pre">XMLHttpRequest</span></tt>, by checking the <tt class="docutils literal"><span class="pre">HTTP_X_REQUESTED_WITH</span></tt> header for the string <tt class="docutils literal"><span class="pre">'XMLHttpRequest'</span></tt>. </font><font id="86">Most modern JavaScript libraries send this header. </font><font id="87">If you write your own XMLHttpRequest call (on the browser side), you’ll have to set this header manually if you want <tt class="docutils literal"><span class="pre">is_ajax()</span></tt> to work.</font></p>
<p><font id="88">If a response varies on whether or not it’s requested via AJAX and you are using some form of caching like Django’s <a class="reference internal" href="middleware.html#module-django.middleware.cache" title="django.middleware.cache: Middleware for the site-wide cache."><tt class="xref py py-mod docutils literal"><span class="pre">cache</span> <span class="pre">middleware</span></tt></a>, you should decorate the view with <a class="reference internal" href="../topics/http/decorators.html#django.views.decorators.vary.vary_on_headers" title="django.views.decorators.vary.vary_on_headers"><tt class="xref py py-func docutils literal"><span class="pre">vary_on_headers('HTTP_X_REQUESTED_WITH')</span></tt></a> so that the responses are properly cached.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.read">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">read</tt>(<em>size=None</em>)<a class="headerlink" href="request-response.html#django.http.HttpRequest.read" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.readline">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">readline</tt>()<a class="headerlink" href="request-response.html#django.http.HttpRequest.readline" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.readlines">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">readlines</tt>()<a class="headerlink" href="request-response.html#django.http.HttpRequest.readlines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.xreadlines">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">xreadlines</tt>()<a class="headerlink" href="request-response.html#django.http.HttpRequest.xreadlines" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="method">
<dt id="django.http.HttpRequest.__iter__">
<tt class="descclassname">HttpRequest.</tt><tt class="descname">__iter__</tt>()<a class="headerlink" href="request-response.html#django.http.HttpRequest.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="89">Methods implementing a file-like interface for reading from an HttpRequest instance. </font><font id="90">This makes it possible to consume an incoming request in a streaming fashion. </font><font id="91">A common use-case would be to process a big XML payload with iterative parser without constructing a whole XML tree in memory.</font></p>
<p><font id="92">Given this standard interface, an HttpRequest instance can be passed directly to an XML parser such as ElementTree:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="kn">as</span> <span class="nn">ET</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">ET</span><span class="o">.</span><span class="n">iterparse</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">process</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
</div>
</div>
<div class="section" id="s-querydict-objects">
<span id="querydict-objects"></span><h2><font id="294">QueryDict objects</font><a class="headerlink" href="request-response.html#querydict-objects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.http.QueryDict">
<em class="property">class </em><tt class="descname">QueryDict</tt><a class="headerlink" href="request-response.html#django.http.QueryDict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="93">In an <a class="reference internal" href="request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><tt class="xref py py-class docutils literal"><span class="pre">HttpRequest</span></tt></a> object, the <tt class="docutils literal"><span class="pre">GET</span></tt> and <tt class="docutils literal"><span class="pre">POST</span></tt> attributes are instances of <tt class="docutils literal"><span class="pre">django.http.QueryDict</span></tt>, a dictionary-like class customized to deal with multiple values for the same key. </font><font id="94">This is necessary because some HTML form elements, notably <tt class="docutils literal"><span class="pre">&lt;select</span> <span class="pre">multiple&gt;</span></tt>, pass multiple values for the same key.</font></p>
<p><font id="95">The <tt class="docutils literal"><span class="pre">QueryDict</span></tt>s at <tt class="docutils literal"><span class="pre">request.</span></tt></font><font id="96">POST and <tt class="docutils literal"><span class="pre">request.</span></tt></font><font id="97">GET will be immutable when accessed in a normal request/response cycle. </font><font id="98">To get a mutable version you need to use <tt class="docutils literal"><span class="pre">.copy()</span></tt>.</font></p>
<div class="section" id="s-id1">
<span id="id1"></span><h3><font id="301">Methods</font><a class="headerlink" href="request-response.html#id1" title="Permalink to this headline">¶</a></h3>
<p><font id="99"><a class="reference internal" href="request-response.html#django.http.QueryDict" title="django.http.QueryDict"><tt class="xref py py-class docutils literal"><span class="pre">QueryDict</span></tt></a> implements all the standard dictionary methods because it’s a subclass of dictionary. </font><font id="100">Exceptions are outlined here:</font></p>
<dl class="method">
<dt id="django.http.QueryDict.__init__">
<tt class="descclassname">QueryDict.</tt><tt class="descname">__init__</tt>(<em>query_string=None</em>, <em>mutable=False</em>, <em>encoding=None</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="101">Instantiates a <tt class="docutils literal"><span class="pre">QueryDict</span></tt> object based on <tt class="docutils literal"><span class="pre">query_string</span></tt>.</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=1&amp;a=2&amp;c=3'</span><span class="p">)</span>
<span class="go">&lt;QueryDict: {'a': ['1', '2'], 'c': ['3']}&gt;</span>
</pre></div>
</div>
<p><font id="102">If <tt class="docutils literal"><span class="pre">query_string</span></tt> is not passed in, the resulting <tt class="docutils literal"><span class="pre">QueryDict</span></tt> will be empty (it will have no keys or values).</font></p>
<p><font id="103">Most <tt class="docutils literal"><span class="pre">QueryDict</span></tt>s you encounter, and in particular those at <tt class="docutils literal"><span class="pre">request.</span></tt></font><font id="104">POST and <tt class="docutils literal"><span class="pre">request.</span></tt></font><font id="105">GET, will be immutable. </font><font id="106">If you are instantiating one yourself, you can make it mutable by passing <tt class="docutils literal"><span class="pre">mutable=True</span></tt> to its <tt class="docutils literal"><span class="pre">__init__()</span></tt>.</font></p>
<p><font id="107">Strings for setting both keys and values will be converted from <tt class="docutils literal"><span class="pre">encoding</span></tt> to unicode. </font><font id="108">If encoding is not set, it defaults to <a class="reference internal" href="settings.html#std:setting-DEFAULT_CHARSET"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_CHARSET</span></tt></a>.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><font id="109">In previous versions, <tt class="docutils literal"><span class="pre">query_string</span></tt> was a required positional argument.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.__getitem__">
<tt class="descclassname">QueryDict.</tt><tt class="descname">__getitem__</tt>(<em>key</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="110">Returns the value for the given key. </font><font id="111">If the key has more than one value, <tt class="docutils literal"><span class="pre">__getitem__()</span></tt> returns the last value. </font><font id="112">Raises <tt class="docutils literal"><span class="pre">django.utils.datastructures.MultiValueDictKeyError</span></tt> if the key does not exist. </font><font id="113">(This is a subclass of Python’s standard <tt class="docutils literal"><span class="pre">KeyError</span></tt>, so you can stick to catching <tt class="docutils literal"><span class="pre">KeyError</span></tt>.)</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.__setitem__">
<tt class="descclassname">QueryDict.</tt><tt class="descname">__setitem__</tt>(<em>key</em>, <em>value</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="114">Sets the given key to <tt class="docutils literal"><span class="pre">[value]</span></tt> (a Python list whose single element is <tt class="docutils literal"><span class="pre">value</span></tt>). </font><font id="115">Note that this, as other dictionary functions that have side effects, can only be called on a mutable <tt class="docutils literal"><span class="pre">QueryDict</span></tt> (such as one that was created via <tt class="docutils literal"><span class="pre">copy()</span></tt>).</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.__contains__">
<tt class="descclassname">QueryDict.</tt><tt class="descname">__contains__</tt>(<em>key</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="116">Returns <tt class="docutils literal"><span class="pre">True</span></tt> if the given key is set. </font><font id="376">This lets you do, e.g., <tt class="docutils literal"><span class="pre">if</span> <span class="pre">"foo"</span> <span class="pre">in</span> <span class="pre">request.GET</span></tt>.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.get">
<tt class="descclassname">QueryDict.</tt><tt class="descname">get</tt>(<em>key</em>, <em>default</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.get" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="117">Uses the same logic as <tt class="docutils literal"><span class="pre">__getitem__()</span></tt> above, with a hook for returning a default value if the key doesn’t exist.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.setdefault">
<tt class="descclassname">QueryDict.</tt><tt class="descname">setdefault</tt>(<em>key</em>, <em>default</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.setdefault" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="118">Just like the standard dictionary <tt class="docutils literal"><span class="pre">setdefault()</span></tt> method, except it uses <tt class="docutils literal"><span class="pre">__setitem__()</span></tt> internally.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.update">
<tt class="descclassname">QueryDict.</tt><tt class="descname">update</tt>(<em>other_dict</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.update" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="119">Takes either a <tt class="docutils literal"><span class="pre">QueryDict</span></tt> or standard dictionary. </font><font id="120">Just like the standard dictionary <tt class="docutils literal"><span class="pre">update()</span></tt> method, except it <em>appends</em> to the current dictionary items rather than replacing them. </font><font id="121">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=1'</span><span class="p">,</span> <span class="n">mutable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">'a'</span><span class="p">:</span> <span class="s">'2'</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s">'a'</span><span class="p">)</span>
<span class="go">['1', '2']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="p">[</span><span class="s">'a'</span><span class="p">]</span> <span class="c"># returns the last</span>
<span class="go">['2']</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.items">
<tt class="descclassname">QueryDict.</tt><tt class="descname">items</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.items" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="122">Just like the standard dictionary <tt class="docutils literal"><span class="pre">items()</span></tt> method, except this uses the same last-value logic as <tt class="docutils literal"><span class="pre">__getitem__()</span></tt>. </font><font id="123">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=1&amp;a=2&amp;a=3'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">[('a', '3')]</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.iteritems">
<tt class="descclassname">QueryDict.</tt><tt class="descname">iteritems</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.iteritems" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="124">Just like the standard dictionary <tt class="docutils literal"><span class="pre">iteritems()</span></tt> method. </font><font id="125">Like <a class="reference internal" href="request-response.html#django.http.QueryDict.items" title="django.http.QueryDict.items"><tt class="xref py py-meth docutils literal"><span class="pre">QueryDict.items()</span></tt></a> this uses the same last-value logic as <a class="reference internal" href="request-response.html#django.http.QueryDict.__getitem__" title="django.http.QueryDict.__getitem__"><tt class="xref py py-meth docutils literal"><span class="pre">QueryDict.__getitem__()</span></tt></a>.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.iterlists">
<tt class="descclassname">QueryDict.</tt><tt class="descname">iterlists</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.iterlists" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="126">Like <a class="reference internal" href="request-response.html#django.http.QueryDict.iteritems" title="django.http.QueryDict.iteritems"><tt class="xref py py-meth docutils literal"><span class="pre">QueryDict.iteritems()</span></tt></a> except it includes all values, as a list, for each member of the dictionary.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.values">
<tt class="descclassname">QueryDict.</tt><tt class="descname">values</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.values" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="127">Just like the standard dictionary <tt class="docutils literal"><span class="pre">values()</span></tt> method, except this uses the same last-value logic as <tt class="docutils literal"><span class="pre">__getitem__()</span></tt>. </font><font id="128">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=1&amp;a=2&amp;a=3'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="go">['3']</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.itervalues">
<tt class="descclassname">QueryDict.</tt><tt class="descname">itervalues</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.itervalues" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="129">Just like <a class="reference internal" href="request-response.html#django.http.QueryDict.values" title="django.http.QueryDict.values"><tt class="xref py py-meth docutils literal"><span class="pre">QueryDict.values()</span></tt></a>, except an iterator.</font></p>
</dd></dl>
<p><font id="130">In addition, <tt class="docutils literal"><span class="pre">QueryDict</span></tt> has the following methods:</font></p>
<dl class="method">
<dt id="django.http.QueryDict.copy">
<tt class="descclassname">QueryDict.</tt><tt class="descname">copy</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.copy" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="131">Returns a copy of the object, using <tt class="docutils literal"><span class="pre">copy.deepcopy()</span></tt> from the Python standard library. </font><font id="132">This copy will be mutable even if the original was not.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.getlist">
<tt class="descclassname">QueryDict.</tt><tt class="descname">getlist</tt>(<em>key</em>, <em>default</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.getlist" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="133">Returns the data with the requested key, as a Python list. </font><font id="134">Returns an empty list if the key doesn’t exist and no default value was provided. </font><font id="135">It’s guaranteed to return a list of some sort unless the default value was no list.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.setlist">
<tt class="descclassname">QueryDict.</tt><tt class="descname">setlist</tt>(<em>key</em>, <em>list_</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.setlist" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="136">Sets the given key to <tt class="docutils literal"><span class="pre">list_</span></tt> (unlike <tt class="docutils literal"><span class="pre">__setitem__()</span></tt>).</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.appendlist">
<tt class="descclassname">QueryDict.</tt><tt class="descname">appendlist</tt>(<em>key</em>, <em>item</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.appendlist" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="137">Appends an item to the internal list associated with key.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.setlistdefault">
<tt class="descclassname">QueryDict.</tt><tt class="descname">setlistdefault</tt>(<em>key</em>, <em>default_list</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.setlistdefault" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="138">Just like <tt class="docutils literal"><span class="pre">setdefault</span></tt>, except it takes a list of values instead of a single value.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.lists">
<tt class="descclassname">QueryDict.</tt><tt class="descname">lists</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.lists" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="139">Like <a class="reference internal" href="request-response.html#django.http.QueryDict.items" title="django.http.QueryDict.items"><tt class="xref py py-meth docutils literal"><span class="pre">items()</span></tt></a>, except it includes all values, as a list, for each member of the dictionary. </font><font id="140">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=1&amp;a=2&amp;a=3'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">lists</span><span class="p">()</span>
<span class="go">[('a', ['1', '2', '3'])]</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.pop">
<tt class="descclassname">QueryDict.</tt><tt class="descname">pop</tt>(<em>key</em>)<a class="headerlink" href="request-response.html#django.http.QueryDict.pop" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="141">Returns a list of values for the given key and removes them from the dictionary. </font><font id="142">Raises <tt class="docutils literal"><span class="pre">KeyError</span></tt> if the key does not exist. </font><font id="143">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=1&amp;a=2&amp;a=3'</span><span class="p">,</span> <span class="n">mutable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">'a'</span><span class="p">)</span>
<span class="go">['1', '2', '3']</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.popitem">
<tt class="descclassname">QueryDict.</tt><tt class="descname">popitem</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.popitem" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="144">Removes an arbitrary member of the dictionary (since there’s no concept of ordering), and returns a two value tuple containing the key and a list of all values for the key. </font><font id="145">Raises <tt class="docutils literal"><span class="pre">KeyError</span></tt> when called on an empty dictionary. </font><font id="146">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=1&amp;a=2&amp;a=3'</span><span class="p">,</span> <span class="n">mutable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>
<span class="go">('a', ['1', '2', '3'])</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.dict">
<tt class="descclassname">QueryDict.</tt><tt class="descname">dict</tt>()<a class="headerlink" href="request-response.html#django.http.QueryDict.dict" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="147">Returns <tt class="docutils literal"><span class="pre">dict</span></tt> representation of <tt class="docutils literal"><span class="pre">QueryDict</span></tt>. </font><font id="148">For every (key, list) pair in <tt class="docutils literal"><span class="pre">QueryDict</span></tt>, <tt class="docutils literal"><span class="pre">dict</span></tt> will have (key, item), where item is one element of the list, using same logic as <a class="reference internal" href="request-response.html#django.http.QueryDict.__getitem__" title="django.http.QueryDict.__getitem__"><tt class="xref py py-meth docutils literal"><span class="pre">QueryDict.__getitem__()</span></tt></a>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=1&amp;a=3&amp;a=5'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
<span class="go">{'a': '5'}</span>
</pre></div>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.QueryDict.urlencode">
<tt class="descclassname">QueryDict.</tt><tt class="descname">urlencode</tt>(<span class="optional">[</span><em>safe</em><span class="optional">]</span>)<a class="headerlink" href="request-response.html#django.http.QueryDict.urlencode" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="149">Returns a string of the data in query-string format. </font><font id="150">Example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="s">'a=2&amp;b=3&amp;b=5'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">urlencode</span><span class="p">()</span>
<span class="go">'a=2&amp;b=3&amp;b=5'</span>
</pre></div>
</div>
<p><font id="151">Optionally, urlencode can be passed characters which do not require encoding. </font><font id="152">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="n">mutable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="p">[</span><span class="s">'next'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'/a&amp;b/'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">safe</span><span class="o">=</span><span class="s">'/'</span><span class="p">)</span>
<span class="go">'next=/a%26b/'</span>
</pre></div>
</div>
</dd></dl>
</div>
</div>
<div class="section" id="s-httpresponse-objects">
<span id="httpresponse-objects"></span><h2><font id="295">HttpResponse objects</font><a class="headerlink" href="request-response.html#httpresponse-objects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.http.HttpResponse">
<em class="property">class </em><tt class="descname">HttpResponse</tt><a class="headerlink" href="request-response.html#django.http.HttpResponse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="153">In contrast to <a class="reference internal" href="request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><tt class="xref py py-class docutils literal"><span class="pre">HttpRequest</span></tt></a> objects, which are created automatically by Django, <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> objects are your responsibility. </font><font id="154">Each view you write is responsible for instantiating, populating and returning an <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a>.</font></p>
<p><font id="155">The <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> class lives in the <a class="reference internal" href="request-response.html#module-django.http" title="django.http: Classes dealing with HTTP requests and responses."><tt class="xref py py-mod docutils literal"><span class="pre">django.http</span></tt></a> module.</font></p>
<div class="section" id="s-usage">
<span id="usage"></span><h3><font id="302">Usage</font><a class="headerlink" href="request-response.html#usage" title="Permalink to this headline">¶</a></h3>
<div class="section" id="s-passing-strings">
<span id="passing-strings"></span><h4><font id="314">Passing strings</font><a class="headerlink" href="request-response.html#passing-strings" title="Permalink to this headline">¶</a></h4>
<p><font id="156">Typical usage is to pass the contents of the page, as a string, to the <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> constructor:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">"Here's the text of the Web page."</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">"Text only, please."</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s">"text/plain"</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="157">But if you want to add content incrementally, you can use <tt class="docutils literal"><span class="pre">response</span></tt> as a file-like object:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"&lt;p&gt;Here's the text of the Web page.&lt;/p&gt;"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"&lt;p&gt;Here's another paragraph.&lt;/p&gt;"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="s-passing-iterators">
<span id="passing-iterators"></span><h4><font id="315">Passing iterators</font><a class="headerlink" href="request-response.html#passing-iterators" title="Permalink to this headline">¶</a></h4>
<p><font id="158">Finally, you can pass <tt class="docutils literal"><span class="pre">HttpResponse</span></tt> an iterator rather than strings. </font><font id="159"><tt class="docutils literal"><span class="pre">HttpResponse</span></tt> will consume the iterator immediately, store its content as a string, and discard it.</font></p>
<p><font id="160">If you need the response to be streamed from the iterator to the client, you must use the <a class="reference internal" href="request-response.html#django.http.StreamingHttpResponse" title="django.http.StreamingHttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">StreamingHttpResponse</span></tt></a> class instead.</font></p>
</div>
<div class="section" id="s-setting-header-fields">
<span id="setting-header-fields"></span><h4><font id="316">Setting header fields</font><a class="headerlink" href="request-response.html#setting-header-fields" title="Permalink to this headline">¶</a></h4>
<p><font id="161">To set or remove a header field in your response, treat it like a dictionary:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="p">[</span><span class="s">'Age'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">120</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">response</span><span class="p">[</span><span class="s">'Age'</span><span class="p">]</span>
</pre></div>
</div>
<p><font id="162">Note that unlike a dictionary, <tt class="docutils literal"><span class="pre">del</span></tt> doesn’t raise <tt class="docutils literal"><span class="pre">KeyError</span></tt> if the header field doesn’t exist.</font></p>
<p><font id="163">For setting the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> and <tt class="docutils literal"><span class="pre">Vary</span></tt> header fields, it is recommended to use the <a class="reference internal" href="http://python.usyiyi.cn/django/ref/utils.html#django.utils.cache.patch_cache_control" title="django.utils.cache.patch_cache_control"><tt class="xref py py-func docutils literal"><span class="pre">patch_cache_control()</span></tt></a> and <a class="reference internal" href="http://python.usyiyi.cn/django/ref/utils.html#django.utils.cache.patch_vary_headers" title="django.utils.cache.patch_vary_headers"><tt class="xref py py-func docutils literal"><span class="pre">patch_vary_headers()</span></tt></a> methods from <a class="reference internal" href="http://python.usyiyi.cn/django/ref/utils.html#module-django.utils.cache" title="django.utils.cache: Helper functions for controlling caching."><tt class="xref py py-mod docutils literal"><span class="pre">django.utils.cache</span></tt></a>, since these fields can have multiple, comma-separated values. </font><font id="164">The “patch” methods ensure that other values, e.g. added by a middleware, are not removed.</font></p>
<p><font id="165">HTTP header fields cannot contain newlines. </font><font id="166">An attempt to set a header field containing a newline character (CR or LF) will raise <tt class="docutils literal"><span class="pre">BadHeaderError</span></tt></font></p>
</div>
<div class="section" id="s-telling-the-browser-to-treat-the-response-as-a-file-attachment">
<span id="telling-the-browser-to-treat-the-response-as-a-file-attachment"></span><h4><font id="317">Telling the browser to treat the response as a file attachment</font><a class="headerlink" href="request-response.html#telling-the-browser-to-treat-the-response-as-a-file-attachment" title="Permalink to this headline">¶</a></h4>
<p><font id="167">To tell the browser to treat the response as a file attachment, use the <tt class="docutils literal"><span class="pre">content_type</span></tt> argument and set the <tt class="docutils literal"><span class="pre">Content-Disposition</span></tt> header. </font><font id="168">For example, this is how you might return a Microsoft Excel spreadsheet:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">my_data</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s">'application/vnd.ms-excel'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="p">[</span><span class="s">'Content-Disposition'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'attachment; filename="foo.xls"'</span>
</pre></div>
</div>
<p><font id="169">There’s nothing Django-specific about the <tt class="docutils literal"><span class="pre">Content-Disposition</span></tt> header, but it’s easy to forget the syntax, so we’ve included it here.</font></p>
</div>
</div>
<div class="section" id="s-id2">
<span id="id2"></span><h3><font id="303">Attributes</font><a class="headerlink" href="request-response.html#id2" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.http.HttpResponse.content">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">content</tt><a class="headerlink" href="request-response.html#django.http.HttpResponse.content" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="170">A bytestring representing the content, encoded from a Unicode object if necessary.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpResponse.charset">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">charset</tt><a class="headerlink" href="request-response.html#django.http.HttpResponse.charset" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="171">A string denoting the charset in which the response will be encoded. </font><font id="172">If not given at <tt class="docutils literal"><span class="pre">HttpResponse</span></tt> instantiation time, it will be extracted from <tt class="docutils literal"><span class="pre">content_type</span></tt> and if that is unsuccessful, the <a class="reference internal" href="settings.html#std:setting-DEFAULT_CHARSET"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_CHARSET</span></tt></a> setting will be used.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpResponse.status_code">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">status_code</tt><a class="headerlink" href="request-response.html#django.http.HttpResponse.status_code" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="173">The <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10">HTTP status code</a> for the response.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpResponse.reason_phrase">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">reason_phrase</tt><a class="headerlink" href="request-response.html#django.http.HttpResponse.reason_phrase" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="174">The HTTP reason phrase for the response.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpResponse.streaming">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">streaming</tt><a class="headerlink" href="request-response.html#django.http.HttpResponse.streaming" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="175">This is always <tt class="docutils literal"><span class="pre">False</span></tt>.</font></p>
<p><font id="176">This attribute exists so middleware can treat streaming responses differently from regular responses.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.HttpResponse.closed">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">closed</tt><a class="headerlink" href="request-response.html#django.http.HttpResponse.closed" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="177"><tt class="docutils literal"><span class="pre">True</span></tt> if the response has been closed.</font></p>
</dd></dl>
</div>
<div class="section" id="s-id3">
<span id="id3"></span><h3><font id="304">Methods</font><a class="headerlink" href="request-response.html#id3" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="django.http.HttpResponse.__init__">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">__init__</tt>(<em>content=''</em>, <em>content_type=None</em>, <em>status=200</em>, <em>reason=None</em>, <em>charset=None</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="178">Instantiates an <tt class="docutils literal"><span class="pre">HttpResponse</span></tt> object with the given page content and content type.</font></p>
<p><font id="179"><tt class="docutils literal"><span class="pre">content</span></tt> should be an iterator or a string. </font><font id="180">If it’s an iterator, it should return strings, and those strings will be joined together to form the content of the response. </font><font id="181">If it is not an iterator or a string, it will be converted to a string when accessed.</font></p>
<p><font id="182"><tt class="docutils literal"><span class="pre">content_type</span></tt> is the MIME type optionally completed by a character set encoding and is used to fill the HTTP <tt class="docutils literal"><span class="pre">Content-Type</span></tt> header. </font><font id="183">If not specified, it is formed by the <a class="reference internal" href="settings.html#std:setting-DEFAULT_CONTENT_TYPE"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_CONTENT_TYPE</span></tt></a> and <a class="reference internal" href="settings.html#std:setting-DEFAULT_CHARSET"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_CHARSET</span></tt></a> settings, by default: “<cite>text/html; </cite></font><font id="184">charset=utf-8”.</font></p>
<p><font id="185"><tt class="docutils literal"><span class="pre">status</span></tt> is the <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10">HTTP status code</a> for the response.</font></p>
<p><font id="186"><tt class="docutils literal"><span class="pre">reason</span></tt> is the HTTP response phrase. </font><font id="187">If not provided, a default phrase will be used.</font></p>
<p><font id="188"><tt class="docutils literal"><span class="pre">charset</span></tt> is the charset in which the response will be encoded. </font><font id="189">If not given it will be extracted from <tt class="docutils literal"><span class="pre">content_type</span></tt>, and if that is unsuccessful, the <a class="reference internal" href="settings.html#std:setting-DEFAULT_CHARSET"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_CHARSET</span></tt></a> setting will be used.</font></p>
<div class="versionadded">
<span class="title">New in Django 1.8:</span> <p><font id="190">The <tt class="docutils literal"><span class="pre">charset</span></tt> parameter was added.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.__setitem__">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">__setitem__</tt>(<em>header</em>, <em>value</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="191">Sets the given header name to the given value. </font><font id="192">Both <tt class="docutils literal"><span class="pre">header</span></tt> and <tt class="docutils literal"><span class="pre">value</span></tt> should be strings.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.__delitem__">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">__delitem__</tt>(<em>header</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.__delitem__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="193">Deletes the header with the given name. </font><font id="194">Fails silently if the header doesn’t exist. </font><font id="195">Case-insensitive.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.__getitem__">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">__getitem__</tt>(<em>header</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="196">Returns the value for the given header name. </font><font id="197">Case-insensitive.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.has_header">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">has_header</tt>(<em>header</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.has_header" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="198">Returns <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt> based on a case-insensitive check for a header with the given name.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.setdefault">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">setdefault</tt>(<em>header</em>, <em>value</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.setdefault" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="199">Sets a header unless it has already been set.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.set_cookie">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">set_cookie</tt>(<em>key</em>, <em>value=''</em>, <em>max_age=None</em>, <em>expires=None</em>, <em>path='/'</em>, <em>domain=None</em>, <em>secure=None</em>, <em>httponly=False</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.set_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="200">Sets a cookie. </font><font id="201">The parameters are the same as in the <a class="reference external" href="https://docs.python.org/3/library/http.cookies.html#http.cookies.Morsel" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">Morsel</span></tt></a> cookie object in the Python standard library.</font></p>
<ul>
<li><p class="first"><font id="202"><tt class="docutils literal"><span class="pre">max_age</span></tt> should be a number of seconds, or <tt class="docutils literal"><span class="pre">None</span></tt> (default) if the cookie should last only as long as the client’s browser session. </font><font id="203">If <tt class="docutils literal"><span class="pre">expires</span></tt> is not specified, it will be calculated.</font></p>
</li>
<li><p class="first"><font id="204"><tt class="docutils literal"><span class="pre">expires</span></tt> should either be a string in the format <tt class="docutils literal"><span class="pre">"Wdy,</span> <span class="pre">DD-Mon-YY</span> <span class="pre">HH:MM:SS</span> <span class="pre">GMT"</span></tt> or a <tt class="docutils literal"><span class="pre">datetime.datetime</span></tt> object in UTC. </font><font id="377">If <tt class="docutils literal"><span class="pre">expires</span></tt> is a <tt class="docutils literal"><span class="pre">datetime</span></tt> object, the <tt class="docutils literal"><span class="pre">max_age</span></tt> will be calculated.</font></p>
</li>
<li><p class="first"><font id="205">Use <tt class="docutils literal"><span class="pre">domain</span></tt> if you want to set a cross-domain cookie. </font><font id="378">For example, <tt class="docutils literal"><span class="pre">domain=".lawrence.com"</span></tt> will set a cookie that is readable by the domains www.lawrence.com, blogs.lawrence.com and calendars.lawrence.com. </font><font id="379">Otherwise, a cookie will only be readable by the domain that set it.</font></p>
</li>
<li><p class="first"><font id="206">Use <tt class="docutils literal"><span class="pre">httponly=True</span></tt> if you want to prevent client-side JavaScript from having access to the cookie.</font></p>
<p><font id="207"><a class="reference external" href="https://www.owasp.org/index.php/HTTPOnly">HTTPOnly</a> is a flag included in a Set-Cookie HTTP response header. </font><font id="208">It is not part of the <span class="target" id="index-1"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc2109.html"><strong>RFC 2109</strong></a> standard for cookies, and it isn’t honored consistently by all browsers. </font><font id="209">However, when it is honored, it can be a useful way to mitigate the risk of client side script accessing the protected cookie data.</font></p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title"><font id="210">Warning</font></p>
<p class="last"><font id="211">Both <span class="target" id="index-2"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc2109.html"><strong>RFC 2109</strong></a> and <span class="target" id="index-3"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc6265.html"><strong>RFC 6265</strong></a> state that user agents should support cookies of at least 4096 bytes. </font><font id="212">For many browsers this is also the maximum size. </font><font id="213">Django will not raise an exception if there’s an attempt to store a cookie of more than 4096 bytes, but many browsers will not set the cookie correctly.</font></p>
</div>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.set_signed_cookie">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">set_signed_cookie</tt>(<em>key</em>, <em>value</em>, <em>salt=''</em>, <em>max_age=None</em>, <em>expires=None</em>, <em>path='/'</em>, <em>domain=None</em>, <em>secure=None</em>, <em>httponly=True</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.set_signed_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="214">Like <a class="reference internal" href="request-response.html#django.http.HttpResponse.set_cookie" title="django.http.HttpResponse.set_cookie"><tt class="xref py py-meth docutils literal"><span class="pre">set_cookie()</span></tt></a>, but <a class="reference internal" href="../topics/signing.html"><em>cryptographic signing</em></a> the cookie before setting it. </font><font id="215">Use in conjunction with <a class="reference internal" href="request-response.html#django.http.HttpRequest.get_signed_cookie" title="django.http.HttpRequest.get_signed_cookie"><tt class="xref py py-meth docutils literal"><span class="pre">HttpRequest.get_signed_cookie()</span></tt></a>. </font><font id="216">You can use the optional <tt class="docutils literal"><span class="pre">salt</span></tt> argument for added key strength, but you will need to remember to pass it to the corresponding <a class="reference internal" href="request-response.html#django.http.HttpRequest.get_signed_cookie" title="django.http.HttpRequest.get_signed_cookie"><tt class="xref py py-meth docutils literal"><span class="pre">HttpRequest.get_signed_cookie()</span></tt></a> call.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.delete_cookie">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">delete_cookie</tt>(<em>key</em>, <em>path='/'</em>, <em>domain=None</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.delete_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="217">Deletes the cookie with the given key. </font><font id="218">Fails silently if the key doesn’t exist.</font></p>
<p><font id="219">Due to the way cookies work, <tt class="docutils literal"><span class="pre">path</span></tt> and <tt class="docutils literal"><span class="pre">domain</span></tt> should be the same values you used in <tt class="docutils literal"><span class="pre">set_cookie()</span></tt> – otherwise the cookie may not be deleted.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.write">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">write</tt>(<em>content</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.write" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="220">This method makes an <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> instance a file-like object.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.flush">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">flush</tt>()<a class="headerlink" href="request-response.html#django.http.HttpResponse.flush" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="221">This method makes an <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> instance a file-like object.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.tell">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">tell</tt>()<a class="headerlink" href="request-response.html#django.http.HttpResponse.tell" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="222">This method makes an <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> instance a file-like object.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.getvalue">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">getvalue</tt>()<a class="headerlink" href="request-response.html#django.http.HttpResponse.getvalue" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="223">Returns the value of <a class="reference internal" href="request-response.html#django.http.HttpResponse.content" title="django.http.HttpResponse.content"><tt class="xref py py-attr docutils literal"><span class="pre">HttpResponse.content</span></tt></a>. </font><font id="224">This method makes an <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> instance a stream-like object.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.writable">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">writable</tt>()<a class="headerlink" href="request-response.html#django.http.HttpResponse.writable" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="225">Always <tt class="docutils literal"><span class="pre">True</span></tt>. </font><font id="226">This method makes an <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> instance a stream-like object.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.http.HttpResponse.writelines">
<tt class="descclassname">HttpResponse.</tt><tt class="descname">writelines</tt>(<em>lines</em>)<a class="headerlink" href="request-response.html#django.http.HttpResponse.writelines" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="227">Writes a list of lines to the response. </font><font id="228">Line separators are not added. </font><font id="229">This method makes an <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> instance a stream-like object.</font></p>
</dd></dl>
</div>
<div class="section" id="s-httpresponse-subclasses">
<span id="s-ref-httpresponse-subclasses"></span><span id="httpresponse-subclasses"></span><span id="ref-httpresponse-subclasses"></span><h3><font id="305">HttpResponse subclasses</font><a class="headerlink" href="request-response.html#httpresponse-subclasses" title="Permalink to this headline">¶</a></h3>
<p><font id="230">Django includes a number of <tt class="docutils literal"><span class="pre">HttpResponse</span></tt> subclasses that handle different types of HTTP responses. </font><font id="231">Like <tt class="docutils literal"><span class="pre">HttpResponse</span></tt>, these subclasses live in <a class="reference internal" href="request-response.html#module-django.http" title="django.http: Classes dealing with HTTP requests and responses."><tt class="xref py py-mod docutils literal"><span class="pre">django.http</span></tt></a>.</font></p>
<dl class="class">
<dt id="django.http.HttpResponseRedirect">
<em class="property">class </em><tt class="descname">HttpResponseRedirect</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseRedirect" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="232">The first argument to the constructor is required – the path to redirect to. </font><font id="233">This can be a fully qualified URL (e.g. <tt class="docutils literal"><span class="pre">'http://www.yahoo.com/search/'</span></tt>) or an absolute path with no domain (e.g. <tt class="docutils literal"><span class="pre">'/search/'</span></tt>). </font><font id="234">See <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> for other optional constructor arguments. </font><font id="235">Note that this returns an HTTP status code 302.</font></p>
<dl class="attribute">
<dt id="django.http.HttpResponseRedirect.url">
<tt class="descname">url</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseRedirect.url" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="236">This read-only attribute represents the URL the response will redirect to (equivalent to the <tt class="docutils literal"><span class="pre">Location</span></tt> response header).</font></p>
</dd></dl>
</dd></dl>
<dl class="class">
<dt id="django.http.HttpResponsePermanentRedirect">
<em class="property">class </em><tt class="descname">HttpResponsePermanentRedirect</tt><a class="headerlink" href="request-response.html#django.http.HttpResponsePermanentRedirect" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="237">Like <a class="reference internal" href="request-response.html#django.http.HttpResponseRedirect" title="django.http.HttpResponseRedirect"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponseRedirect</span></tt></a>, but it returns a permanent redirect (HTTP status code 301) instead of a “found” redirect (status code 302).</font></p>
</dd></dl>
<dl class="class">
<dt id="django.http.HttpResponseNotModified">
<em class="property">class </em><tt class="descname">HttpResponseNotModified</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseNotModified" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="238">The constructor doesn’t take any arguments and no content should be added to this response. </font><font id="239">Use this to designate that a page hasn’t been modified since the user’s last request (status code 304).</font></p>
</dd></dl>
<dl class="class">
<dt id="django.http.HttpResponseBadRequest">
<em class="property">class </em><tt class="descname">HttpResponseBadRequest</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseBadRequest" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="240">Acts just like <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> but uses a 400 status code.</font></p>
</dd></dl>
<dl class="class">
<dt id="django.http.HttpResponseNotFound">
<em class="property">class </em><tt class="descname">HttpResponseNotFound</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="241">Acts just like <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> but uses a 404 status code.</font></p>
</dd></dl>
<dl class="class">
<dt id="django.http.HttpResponseForbidden">
<em class="property">class </em><tt class="descname">HttpResponseForbidden</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseForbidden" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="242">Acts just like <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> but uses a 403 status code.</font></p>
</dd></dl>
<dl class="class">
<dt id="django.http.HttpResponseNotAllowed">
<em class="property">class </em><tt class="descname">HttpResponseNotAllowed</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseNotAllowed" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="243">Like <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a>, but uses a 405 status code. </font><font id="244">The first argument to the constructor is required: a list of permitted methods (e.g. <tt class="docutils literal"><span class="pre">['GET',</span> <span class="pre">'POST']</span></tt>).</font></p>
</dd></dl>
<dl class="class">
<dt id="django.http.HttpResponseGone">
<em class="property">class </em><tt class="descname">HttpResponseGone</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseGone" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="245">Acts just like <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> but uses a 410 status code.</font></p>
</dd></dl>
<dl class="class">
<dt id="django.http.HttpResponseServerError">
<em class="property">class </em><tt class="descname">HttpResponseServerError</tt><a class="headerlink" href="request-response.html#django.http.HttpResponseServerError" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="246">Acts just like <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> but uses a 500 status code.</font></p>
</dd></dl>
<div class="admonition note">
<p class="first admonition-title"><font id="247">Note</font></p>
<p class="last"><font id="248">If a custom subclass of <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> implements a <tt class="docutils literal"><span class="pre">render</span></tt> method, Django will treat it as emulating a <a class="reference internal" href="template-response.html#django.template.response.SimpleTemplateResponse" title="django.template.response.SimpleTemplateResponse"><tt class="xref py py-class docutils literal"><span class="pre">SimpleTemplateResponse</span></tt></a>, and the <tt class="docutils literal"><span class="pre">render</span></tt> method must itself return a valid response object.</font></p>
</div>
</div>
</div>
<div class="section" id="s-jsonresponse-objects">
<span id="jsonresponse-objects"></span><h2><font id="296">JsonResponse objects</font><a class="headerlink" href="request-response.html#jsonresponse-objects" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<dl class="class">
<dt id="django.http.JsonResponse">
<em class="property">class </em><tt class="descname">JsonResponse</tt><a class="headerlink" href="request-response.html#django.http.JsonResponse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="method">
<dt id="django.http.JsonResponse.__init__">
<tt class="descclassname">JsonResponse.</tt><tt class="descname">__init__</tt>(<em>data</em>, <em>encoder=DjangoJSONEncoder</em>, <em>safe=True</em>, <em>**kwargs</em>)<a class="headerlink" href="request-response.html#django.http.JsonResponse.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="249">An <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a> subclass that helps to create a JSON-encoded response. </font><font id="250">It inherits most behavior from its superclass with a couple differences:</font></p>
<p><font id="251">Its default <tt class="docutils literal"><span class="pre">Content-Type</span></tt> header is set to <tt class="docutils literal"><span class="pre">application/json</span></tt>.</font></p>
<p><font id="252">The first parameter, <tt class="docutils literal"><span class="pre">data</span></tt>, should be a <tt class="docutils literal"><span class="pre">dict</span></tt> instance. </font><font id="253">If the <tt class="docutils literal"><span class="pre">safe</span></tt> parameter is set to <tt class="docutils literal"><span class="pre">False</span></tt> (see below) it can be any JSON-serializable object.</font></p>
<p><font id="254">The <tt class="docutils literal"><span class="pre">encoder</span></tt>, which defaults to <tt class="docutils literal"><span class="pre">django.core.serializers.json.DjangoJSONEncoder</span></tt>, will be used to serialize the data. </font><font id="255">See <a class="reference internal" href="../topics/serialization.html#serialization-formats-json"><em>JSON serialization</em></a> for more details about this serializer.</font></p>
<p><font id="256">The <tt class="docutils literal"><span class="pre">safe</span></tt> boolean parameter defaults to <tt class="docutils literal"><span class="pre">True</span></tt>. </font><font id="257">If it’s set to <tt class="docutils literal"><span class="pre">False</span></tt>, any object can be passed for serialization (otherwise only <tt class="docutils literal"><span class="pre">dict</span></tt> instances are allowed). </font><font id="258">If <tt class="docutils literal"><span class="pre">safe</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt> and a non-<tt class="docutils literal"><span class="pre">dict</span></tt> object is passed as the first argument, a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">TypeError</span></tt></a> will be raised.</font></p>
</dd></dl>
<div class="section" id="s-id4">
<span id="id4"></span><h3><font id="306">Usage</font><a class="headerlink" href="request-response.html#id4" title="Permalink to this headline">¶</a></h3>
<p><font id="259">Typical usage could look like:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">JsonResponse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">JsonResponse</span><span class="p">({</span><span class="s">'foo'</span><span class="p">:</span> <span class="s">'bar'</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">content</span>
<span class="go">'{"foo": "bar"}'</span>
</pre></div>
</div>
<div class="section" id="s-serializing-non-dictionary-objects">
<span id="serializing-non-dictionary-objects"></span><h4><font id="318">Serializing non-dictionary objects</font><a class="headerlink" href="request-response.html#serializing-non-dictionary-objects" title="Permalink to this headline">¶</a></h4>
<p><font id="260">In order to serialize objects other than <tt class="docutils literal"><span class="pre">dict</span></tt> you must set the <tt class="docutils literal"><span class="pre">safe</span></tt> parameter to <tt class="docutils literal"><span class="pre">False</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">JsonResponse</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="261">Without passing <tt class="docutils literal"><span class="pre">safe=False</span></tt>, a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.4)"><tt class="xref py py-exc docutils literal"><span class="pre">TypeError</span></tt></a> will be raised.</font></p>
<div class="admonition warning">
<p class="first admonition-title"><font id="262">Warning</font></p>
<p class="last"><font id="263">Before the <a class="reference external" href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">5th edition of EcmaScript</a> it was possible to poison the JavaScript <tt class="docutils literal"><span class="pre">Array</span></tt> constructor. </font><font id="264">For this reason, Django does not allow passing non-dict objects to the <a class="reference internal" href="request-response.html#django.http.JsonResponse" title="django.http.JsonResponse"><tt class="xref py py-class docutils literal"><span class="pre">JsonResponse</span></tt></a> constructor by default. </font><font id="265">However, most modern browsers implement EcmaScript 5 which removes this attack vector. </font><font id="266">Therefore it is possible to disable this security precaution.</font></p>
</div>
</div>
<div class="section" id="s-changing-the-default-json-encoder">
<span id="changing-the-default-json-encoder"></span><h4><font id="319">Changing the default JSON encoder</font><a class="headerlink" href="request-response.html#changing-the-default-json-encoder" title="Permalink to this headline">¶</a></h4>
<p><font id="267">If you need to use a different JSON encoder class you can pass the <tt class="docutils literal"><span class="pre">encoder</span></tt> parameter to the constructor method:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">encoder</span><span class="o">=</span><span class="n">MyJSONEncoder</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="s-streaminghttpresponse-objects">
<span id="s-httpresponse-streaming"></span><span id="streaminghttpresponse-objects"></span><span id="httpresponse-streaming"></span><h2><font id="297">StreamingHttpResponse objects</font><a class="headerlink" href="request-response.html#streaminghttpresponse-objects" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.http.StreamingHttpResponse">
<em class="property">class </em><tt class="descname">StreamingHttpResponse</tt><a class="headerlink" href="request-response.html#django.http.StreamingHttpResponse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="268">The <a class="reference internal" href="request-response.html#django.http.StreamingHttpResponse" title="django.http.StreamingHttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">StreamingHttpResponse</span></tt></a> class is used to stream a response from Django to the browser. </font><font id="269">You might want to do this if generating the response takes too long or uses too much memory. </font><font id="270">For instance, it’s useful for <a class="reference internal" href="../howto/outputting-csv.html#streaming-csv-files"><em>generating large CSV files</em></a>.</font></p>
<div class="admonition-performance-considerations admonition">
<p class="first admonition-title"><font id="271">Performance considerations</font></p>
<p><font id="272">Django is designed for short-lived requests. </font><font id="273">Streaming responses will tie a worker process for the entire duration of the response. </font><font id="274">This may result in poor performance.</font></p>
<p class="last"><font id="275">Generally speaking, you should perform expensive tasks outside of the request-response cycle, rather than resorting to a streamed response.</font></p>
</div>
<p><font id="276">The <a class="reference internal" href="request-response.html#django.http.StreamingHttpResponse" title="django.http.StreamingHttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">StreamingHttpResponse</span></tt></a> is not a subclass of <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">HttpResponse</span></tt></a>, because it features a slightly different API. </font><font id="277">However, it is almost identical, with the following notable differences:</font></p>
<ul class="simple">
<li><font id="335">It should be given an iterator that yields strings as content.</font></li>
<li><font id="336">You cannot access its content, except by iterating the response object itself. </font><font id="337">This should only occur when the response is returned to the client.</font></li>
<li><font id="338">It has no <tt class="docutils literal"><span class="pre">content</span></tt> attribute. </font><font id="339">Instead, it has a <a class="reference internal" href="request-response.html#django.http.StreamingHttpResponse.streaming_content" title="django.http.StreamingHttpResponse.streaming_content"><tt class="xref py py-attr docutils literal"><span class="pre">streaming_content</span></tt></a> attribute.</font></li>
<li><font id="340">You cannot use the file-like object <tt class="docutils literal"><span class="pre">tell()</span></tt> or <tt class="docutils literal"><span class="pre">write()</span></tt> methods. </font><font id="341">Doing so will raise an exception.</font></li>
</ul>
<p><font id="278"><a class="reference internal" href="request-response.html#django.http.StreamingHttpResponse" title="django.http.StreamingHttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">StreamingHttpResponse</span></tt></a> should only be used in situations where it is absolutely required that the whole content isn’t iterated before transferring the data to the client. </font><font id="279">Because the content can’t be accessed, many middlewares can’t function normally. </font><font id="280">For example the <tt class="docutils literal"><span class="pre">ETag</span></tt> and <tt class="docutils literal"><span class="pre">Content-</span> <span class="pre">Length</span></tt> headers can’t be generated for streaming responses.</font></p>
<div class="section" id="s-id5">
<span id="id5"></span><h3><font id="307">Attributes</font><a class="headerlink" href="request-response.html#id5" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.http.StreamingHttpResponse.streaming_content">
<tt class="descclassname">StreamingHttpResponse.</tt><tt class="descname">streaming_content</tt><a class="headerlink" href="request-response.html#django.http.StreamingHttpResponse.streaming_content" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="281">An iterator of strings representing the content.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.StreamingHttpResponse.status_code">
<tt class="descclassname">StreamingHttpResponse.</tt><tt class="descname">status_code</tt><a class="headerlink" href="request-response.html#django.http.StreamingHttpResponse.status_code" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="282">The <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10">HTTP status code</a> for the response.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.StreamingHttpResponse.reason_phrase">
<tt class="descclassname">StreamingHttpResponse.</tt><tt class="descname">reason_phrase</tt><a class="headerlink" href="request-response.html#django.http.StreamingHttpResponse.reason_phrase" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="283">The HTTP reason phrase for the response.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.http.StreamingHttpResponse.streaming">
<tt class="descclassname">StreamingHttpResponse.</tt><tt class="descname">streaming</tt><a class="headerlink" href="request-response.html#django.http.StreamingHttpResponse.streaming" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="284">This is always <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</dd></dl>
</div>
</div>
<div class="section" id="s-fileresponse-objects">
<span id="fileresponse-objects"></span><h2><font id="298">FileResponse objects</font><a class="headerlink" href="request-response.html#fileresponse-objects" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<dl class="class">
<dt id="django.http.FileResponse">
<em class="property">class </em><tt class="descname">FileResponse</tt><a class="headerlink" href="request-response.html#django.http.FileResponse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="285"><a class="reference internal" href="request-response.html#django.http.FileResponse" title="django.http.FileResponse"><tt class="xref py py-class docutils literal"><span class="pre">FileResponse</span></tt></a> is a subclass of <a class="reference internal" href="request-response.html#django.http.StreamingHttpResponse" title="django.http.StreamingHttpResponse"><tt class="xref py py-class docutils literal"><span class="pre">StreamingHttpResponse</span></tt></a> optimized for binary files. </font><font id="286">It uses <a class="reference external" href="https://www.python.org/dev/peps/pep-3333/#optional-platform-specific-file-handling">wsgi.file_wrapper</a> if provided by the wsgi server, otherwise it streams the file out in small chunks.</font></p>
<p><font id="287"><tt class="docutils literal"><span class="pre">FileResponse</span></tt> expects a file open in binary mode like so:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">FileResponse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">FileResponse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">'myfile.png'</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="yui-b" id="sidebar">
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<h3><font id="308">目录</font></h3>
<ul>
<li><a class="reference internal" href="request-response.html#"><font id="342">请求和响应对象</font></a><ul>
<li><a class="reference internal" href="request-response.html#quick-overview"><font id="343">概述</font></a></li>
<li><a class="reference internal" href="request-response.html#httprequest-objects"><font id="344">HttpRequest 对象</font></a><ul>
<li><a class="reference internal" href="request-response.html#attributes"><font id="345">属性</font></a></li>
<li><a class="reference internal" href="request-response.html#methods"><font id="346">方法</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="request-response.html#querydict-objects"><font id="347">QueryDict objects</font></a><ul>
<li><a class="reference internal" href="request-response.html#id1"><font id="348">Methods</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="request-response.html#httpresponse-objects"><font id="349">HttpResponse objects</font></a><ul>
<li><a class="reference internal" href="request-response.html#usage"><font id="350">Usage</font></a><ul>
<li><a class="reference internal" href="request-response.html#passing-strings"><font id="351">Passing strings</font></a></li>
<li><a class="reference internal" href="request-response.html#passing-iterators"><font id="352">Passing iterators</font></a></li>
<li><a class="reference internal" href="request-response.html#setting-header-fields"><font id="353">Setting header fields</font></a></li>
<li><a class="reference internal" href="request-response.html#telling-the-browser-to-treat-the-response-as-a-file-attachment"><font id="354">Telling the browser to treat the response as a file attachment</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="request-response.html#id2"><font id="355">Attributes</font></a></li>
<li><a class="reference internal" href="request-response.html#id3"><font id="356">Methods</font></a></li>
<li><a class="reference internal" href="request-response.html#httpresponse-subclasses"><font id="357">HttpResponse subclasses</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="request-response.html#jsonresponse-objects"><font id="358">JsonResponse objects</font></a><ul>
<li><a class="reference internal" href="request-response.html#id4"><font id="359">Usage</font></a><ul>
<li><a class="reference internal" href="request-response.html#serializing-non-dictionary-objects"><font id="360">Serializing non-dictionary objects</font></a></li>
<li><a class="reference internal" href="request-response.html#changing-the-default-json-encoder"><font id="361">Changing the default JSON encoder</font></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="request-response.html#streaminghttpresponse-objects"><font id="362">StreamingHttpResponse objects</font></a><ul>
<li><a class="reference internal" href="request-response.html#id5"><font id="363">Attributes</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="request-response.html#fileresponse-objects"><font id="364">FileResponse objects</font></a></li>
</ul>
</li>
</ul>
<h3><font id="309">Browse</font></h3>
<ul>
<li><font id="365">Prev: <a href="models/database-functions.html">Database Functions</a></font></li>
<li><font id="366">Next: <a href="schema-editor.html"><tt class="docutils literal"><span class="pre">SchemaEditor</span></tt></a></font></li>
</ul>
<h3><font id="310">你在这里：</font></h3>
<ul>
<li>
<a href="../index.html"><font id="367">Django 1.8.2 文档</font></a>
<ul><li><a href="index.html"><font id="368">API 参考</font></a>
<ul><li><font id="369">响应和请求对象</font></li></ul>
</li></ul>
</li>
</ul>
<h3><font id="311">本页</font></h3>
<ul class="this-page-menu">
<li><a href="http://python.usyiyi.cn/django/_sources/ref/request-response.txt" rel="nofollow"><font id="370">Show Source</font></a></li>
</ul>
<div id="searchbox" style="display: none">
<h3><font id="312">Quick search</font></h3>
<form action="http://python.usyiyi.cn/django/search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
<p class="searchtip" style="font-size: 90%"><font id="288"> Enter search terms or a module, class or function name. </font></p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<h3><font id="313">最后更新：</font></h3>
<p class="topless"><font id="289">May 13, 2015</font></p>
</div>
</div>
<div id="ft">
<div class="nav">
    « <a href="models/database-functions.html" title="Database Functions">previous</a>
     |
    <a accesskey="U" href="index.html" title="API Reference">up</a>
   |
    <a href="schema-editor.html" title='&lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;SchemaEditor&lt;/span&gt;&lt;/tt&gt;'>next</a> »</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div id="disqus_thread"></div><br>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'djangocn'; // required: replace example with your forum shortname
    var disqus_identifier = '/django/ref/request-response';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<link href="http://python.usyiyi.cn/django/_static/ms_translator.css" rel="stylesheet" type="text/css"/>
<script src="http://python.usyiyi.cn/django/_static/ms_translator.js" type="text/javascript"></script>
<script src="http://python.usyiyi.cn/django/_static/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
<div id="MicrosoftTranslator" style="display:none; position: absolute; z-index: 2147483647; margin: 0px; border: 2px solid rgb(210, 210, 210); padding: 0px; color: rgb(0, 0, 0); background-color: rgb(230, 230, 230); font-family: Arial,Helvetica,Sans-Serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; direction: ltr; text-align: left; left: 274px; top: 2048.03px; min-width: 400px;">
    <div id="MSTCClose" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/tooltip_close.gif">
      </a>
    </div>
    
    <div id="MSTCPopDown" style="float: right;" style="display: none;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popdown.gif">
      </a>
    </div>
    <div id="MSTCPopUP" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popup.gif">
      </a>
    </div>
    
    <div id="MSTCTitle" style="margin: 4px 4px 8px; font-weight: bold;">原文
    </div>
    
    <div style="direction: ltr; text-align: left;">
      <span id="MSTCOrigion" style="display: inline-block; margin: 0px 4px 4px;"> </span>
    </div>
    
    <div id="MicrosoftTranslatorCommunity" class="MSTCltr">
      <div id="MSTCContent">
        <a id="MSTCExpandLink">
          <span id="MSTCImprove">改进翻译</span>
          <span id="MSTCSuggest">最小化</span>
          <img src="http://python.usyiyi.cn/django/_static/ctftoggledown.gif" id="MSTCToggleDown">
          <img src="http://python.usyiyi.cn/django/_static/ctftoggleup.gif" id="MSTCToggleUp">
        </a>
        <div id="MSTCRootPanel">
          <span id="MSTCLoading" style="display: none;">正在加载...</span>
          <div style="display: none;" id="MSTCTransPanelError">
            <div class="MSTCTableRow">
              <div class="MSTCTransPanelExc MSTCTableCell">
                <img style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_exclamation.gif" id="ExclamationImage">
              </div>
              <div class="MSTCTableCell">
                <span id="MSTCTransPanelErrorMsg"></span>
              </div>
            </div>
            <div class="MSTCTableRow">
              <div class="MSTCTableCell"></div>
              <div class="MSTCTableCell MSTCFlipHoriz">
                <input type="image" style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_OK.gif" class="MSTCErrorButtons" id="MSTCOKImgBtn" name="MSTCOKImgBtn">
              </div>
            </div>
          </div>
          
          <div id="MSTCTransPanel">
          </div>
          
          <div id="MSTCPrevNextPanel">
            <a id="MSTCPrevLink" style='border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>上一页</span>
            </a>
            <a style='color: black; border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>第</span>
              <span id="MSTCPage"></span>
              <span>页</span>
            </a>
            <a id="MSTCNextLink" style='padding-left: 5px;'>
              <span>下一页</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>