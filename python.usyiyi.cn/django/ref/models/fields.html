<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>模型字段参考 — Django 1.8.2 中文文档</title>
<link href="../../_static/default.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.8.2.dev20150513143415',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="../../_static/jquery.js" type="text/javascript"></script>
<script src="../../_static/underscore.js" type="text/javascript"></script>
<script src="../../_static/doctools.js" type="text/javascript"></script>
<link href="../../index.html" rel="top" title="Django 1.8.2.dev20150513143415 documentation"/>
<link href="index.html" rel="up" title="Models"/>
<link href="meta.html" rel="next" title="Model _meta API"/>
<link href="index.html" rel="prev" title="Models"/>
<script src="http://python.usyiyi.cn/django/templatebuiltins.js" type="text/javascript"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/ref/models/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/ref/models/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>
</head>
<body>
<div class="document">
<div class="yui-t6" id="custom-doc">
<div id="hd">
<h1><font id="568">Django 1.8.2 文档</font></h1>
<div id="global-nav">
<a href="../../index.html" title="Home page">Home</a>  |
        <a href="../../contents.html" title="Table of contents">Table of contents</a>  |
        <a href="../../genindex.html" title="Global index">Index</a>  |
        <a href="../../py-modindex.html" title="Module index">Modules</a>
</div>
<div class="nav">
    « <a href="index.html" title="Models">previous</a>
     |
    <a accesskey="U" href="../index.html" title="API Reference">up</a>
   |
    <a href="meta.html" title='Model &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;_meta&lt;/span&gt;&lt;/tt&gt; API'>next</a> »</div>
</div>
<div id="bd">
<div id="yui-main">
<div class="yui-b">
<div class="yui-g" id="ref-models-fields">
<div class="section" id="s-module-django.db.models.fields">
<span id="s-model-field-reference"></span><span id="module-django.db.models.fields"></span><span id="model-field-reference"></span><h1><font id="569">模型字段参考</font><a class="headerlink" href="fields.html#module-django.db.models.fields" title="Permalink to this headline">¶</a></h1>
<p><font id="1">
本文档包含了Django提供的全部模型<a class="reference internal" href="fields.html#django.db.models.Field" title="django.db.models.Field"><tt class="xref py py-class docutils literal"><span class="pre">字段</span></tt></a>的<a class="reference internal" href="fields.html#field-options">字段选项</a> 和 <a class="reference internal" href="fields.html#field-types">字段类型</a>的API参考。</font></p>
<div class="admonition seealso">
<p class="first admonition-title"><font id="2">请看:</font></p>
<p class="last"><font id="3">如果内建的字段不能满足你的需要，你可以尝试对特定国家和文化有效的包含配套代码的 <a class="reference external" href="https://django-localflavor.readthedocs.org/">django-localflavor</a>。</font><font id="4">当然，你也可以很容易的编写你<a class="reference internal" href="../../howto/custom-model-fields.html"><em>自定义的字段</em></a>。</font></p>
</div>
<div class="admonition note">
<p class="first admonition-title"><font id="5">注意</font></p>
<p class="last"><font id="6">从技术上讲， model 是定义在<a class="reference internal" href="fields.html#module-django.db.models.fields" title="django.db.models.fields: Built-in field types."><tt class="xref py py-mod docutils literal"><span class="pre">django.db.models.fields</span></tt></a>里面，但为了使用方便，它们被导入到 <a class="reference internal" href="../../topics/db/models.html#module-django.db.models" title="django.db.models"><tt class="xref py py-mod docutils literal"><span class="pre">django.db.models</span></tt></a>中；</font><font id="7">标准上，我们导入<tt class="docutils literal"><span class="pre">from</span> <span class="pre">django.db</span> <span class="pre">import</span> <span class="pre">models</span></tt>，然后使用&nbsp;<tt class="docutils literal"><span class="pre">models.&lt;Foo&gt;Field</span></tt>的形式使用字段。</font></p>
</div>
<div class="section" id="s-field-options">
<span id="s-common-model-field-options"></span><span id="field-options"></span><span id="common-model-field-options"></span><h2><font id="571">字段选项</font><a class="headerlink" href="fields.html#field-options" title="Permalink to this headline">¶</a></h2>
<p><font id="8">下列参数是全部字段类型都可用的，</font><font id="9">而且都是可选择的。</font></p>
<div class="section" id="s-null">
<span id="null"></span><h3><font id="577">null</font><a class="headerlink" href="fields.html#null" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.null">
<tt class="descclassname">Field.</tt><tt class="descname">null</tt><a class="headerlink" href="fields.html#django.db.models.Field.null" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="10">如果参数为<tt class="docutils literal"><span class="pre">True</span></tt>, Django可以存储空值 <tt class="docutils literal"><span class="pre">NULL</span></tt> 到数据库中，</font><font id="11">默认值是 <tt class="docutils literal"><span class="pre">False</span></tt>。</font></p>
<p><font id="12">避免在基于字符串的字段，例如<a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> 和 <a class="reference internal" href="fields.html#django.db.models.TextField" title="django.db.models.TextField"><tt class="xref py py-class docutils literal"><span class="pre">TextField</span></tt></a>使用<a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a>，因为空字符串值将被储存为空字符串，而不是<tt class="docutils literal"><span class="pre">NULL</span></tt>。</font><font id="13">在字符字段声明 <tt class="docutils literal"><span class="pre">null=True</span></tt>，那意味着对于“无数据”有两个可能的值： <tt class="docutils literal"><span class="pre">NULL</span></tt>和空字符串。</font><font id="14">在大多数情况下，对于“无数据”声明两个值是赘余的，Django按惯例会使用空字符串而不是 <tt class="docutils literal"><span class="pre">NULL</span></tt>。</font></p>
<p><font id="15">对于基于字符串的字段和基于非字符串的字段，如果你想在数据表内允许空值，你都需要再设置&nbsp;<tt class="docutils literal"><span class="pre">blank=True</span></tt>，这是因为 <a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 仅仅影响数据库存储(参见<a class="reference internal" href="fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><tt class="xref py py-attr docutils literal"><span class="pre">blank</span></tt></a>)。</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="16">注意</font></p>
<p class="last"><font id="17">在使用 Oracle 数据库时，会不顾及这一属性，强加在数据库中保存 <tt class="docutils literal"><span class="pre">NULL</span></tt>，来表示空字符串。</font></p>
</div>
<p><font id="18">如果你允许在 <a class="reference internal" href="fields.html#django.db.models.BooleanField" title="django.db.models.BooleanField"><tt class="xref py py-class docutils literal"><span class="pre">BooleanField</span></tt></a> 使用 <a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 值，请用 <a class="reference internal" href="fields.html#django.db.models.NullBooleanField" title="django.db.models.NullBooleanField"><tt class="xref py py-class docutils literal"><span class="pre">NullBooleanField</span></tt></a>&nbsp;代替。</font></p>
</div>
<div class="section" id="s-blank">
<span id="blank"></span><h3><font id="578">blank</font><a class="headerlink" href="fields.html#blank" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.blank">
<tt class="descclassname">Field.</tt><tt class="descname">blank</tt><a class="headerlink" href="fields.html#django.db.models.Field.blank" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="19">如果参数为 <tt class="docutils literal"><span class="pre">True</span></tt>, 则该字段允许为空白。 </font><font id="20">默认值是 <tt class="docutils literal"><span class="pre">False</span></tt>。</font></p>
<p><font id="21">注意它与<a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a>不同。</font><font id="22">&nbsp;<a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 纯粹是数据库范畴的概念，而 &nbsp;<a class="reference internal" href="fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><tt class="xref py py-attr docutils literal"><span class="pre">blank</span></tt></a> 是数据验证范畴的。</font><font id="23">如果字段设置 <tt class="docutils literal"><span class="pre">blank=True</span></tt>, 表单允许输入空值. </font><font id="24">如果字段设置 <tt class="docutils literal"><span class="pre">blank=False</span></tt>, 字段为必填.</font></p>
</div>
<div class="section" id="s-choices">
<span id="s-field-choices"></span><span id="choices"></span><span id="field-choices"></span><h3><font id="579">choices</font><a class="headerlink" href="fields.html#choices" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.choices">
<tt class="descclassname">Field.</tt><tt class="descname">choices</tt><a class="headerlink" href="fields.html#django.db.models.Field.choices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="25">它是一个可迭代的结构(比如，列表或是元组)，由可迭代的二元组组成(比如<tt class="docutils literal"><span class="pre">[(A,</span> <span class="pre">B),</span> <span class="pre">(A,</span> <span class="pre">B)</span> <span class="pre">...]</span></tt>)，用来给这个字段提供选择项。</font><font id="26">如果设置了 choices ，默认表格样式就会显示选择框，而不是标准的文本框，而且这个选择框的选项就是 choices 中的元组。</font></p>
<p><font id="27">每个元组中的第一个元素，是存储在数据库中的值；第二个元素是该选项更易理解的描述。 </font><font id="28">比如:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s">'FR'</span><span class="p">,</span> <span class="s">'Freshman'</span><span class="p">),</span>
    <span class="p">(</span><span class="s">'SO'</span><span class="p">,</span> <span class="s">'Sophomore'</span><span class="p">),</span>
    <span class="p">(</span><span class="s">'JR'</span><span class="p">,</span> <span class="s">'Junior'</span><span class="p">),</span>
    <span class="p">(</span><span class="s">'SR'</span><span class="p">,</span> <span class="s">'Senior'</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><font id="29">一般来说，最好在模型类内部定义choices，然后再给每个值定义一个合适名字的常量。</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">FRESHMAN</span> <span class="o">=</span> <span class="s">'FR'</span>
    <span class="n">SOPHOMORE</span> <span class="o">=</span> <span class="s">'SO'</span>
    <span class="n">JUNIOR</span> <span class="o">=</span> <span class="s">'JR'</span>
    <span class="n">SENIOR</span> <span class="o">=</span> <span class="s">'SR'</span>
    <span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">FRESHMAN</span><span class="p">,</span> <span class="s">'Freshman'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SOPHOMORE</span><span class="p">,</span> <span class="s">'Sophomore'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">JUNIOR</span><span class="p">,</span> <span class="s">'Junior'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SENIOR</span><span class="p">,</span> <span class="s">'Senior'</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">year_in_school</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                      <span class="n">choices</span><span class="o">=</span><span class="n">YEAR_IN_SCHOOL_CHOICES</span><span class="p">,</span>
                                      <span class="n">default</span><span class="o">=</span><span class="n">FRESHMAN</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_upperclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">year_in_school</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">JUNIOR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SENIOR</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="30">尽管你可以在模型类的外部定义choices然后引用它，在模型类中定义choices和其每个choice的name可以保存所有的关于应用到此信息的类的信息， 也使得choices更容易被应用（例如， <tt class="docutils literal"><span class="pre">Student.SOPHOMORE</span></tt> 可以在任何引入<tt class="docutils literal"><span class="pre">Student</span></tt> 模型的位置生效)。</font></p>
<p><font id="31">你也可以归类可选的choices到已命名的组中用来达成组织整理的目的:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">MEDIA_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s">'Audio'</span><span class="p">,</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">'vinyl'</span><span class="p">,</span> <span class="s">'Vinyl'</span><span class="p">),</span>
            <span class="p">(</span><span class="s">'cd'</span><span class="p">,</span> <span class="s">'CD'</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s">'Video'</span><span class="p">,</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">'vhs'</span><span class="p">,</span> <span class="s">'VHS Tape'</span><span class="p">),</span>
            <span class="p">(</span><span class="s">'dvd'</span><span class="p">,</span> <span class="s">'DVD'</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s">'unknown'</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><font id="32">每个元组的第一个元素是组的名字。</font><font id="33">第二个元素是一组可迭代的二元元组，每一个二元元组包含一个值和一个给人看的名字构成一个选项。</font><font id="34">分组的选项可能会和未分组的选项合在同一个list中。 （就像例中的<cite>unknown</cite>选项）。</font></p>
<p><font id="35">对于每个有<a class="reference internal" href="fields.html#django.db.models.Field.choices" title="django.db.models.Field.choices"><tt class="xref py py-attr docutils literal"><span class="pre">choices</span></tt></a> set的模型字段, Django 将会加入一个通过该字段现在的值取回给人看的名字的方法。</font><font id="36">参见数据库API文档中的<a class="reference internal" href="instances.html#django.db.models.Model.get_FOO_display" title="django.db.models.Model.get_FOO_display"><tt class="xref py py-meth docutils literal"><span class="pre">get_FOO_display()</span></tt></a>。</font></p>
<p><font id="37">请注意choices可以是任何可迭代的对象 – 不是必须是列表或者元组。</font><font id="38">这一点使你可以动态的构建choices。</font><font id="39">但是如果你发现你自己搞不定动态的<a class="reference internal" href="fields.html#django.db.models.Field.choices" title="django.db.models.Field.choices"><tt class="xref py py-attr docutils literal"><span class="pre">choices</span></tt></a>，你最好还是使用<a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>来构建一个合适的数据库表。</font><font id="40"><a class="reference internal" href="fields.html#django.db.models.Field.choices" title="django.db.models.Field.choices"><tt class="xref py py-attr docutils literal"><span class="pre">choices</span></tt></a>意味着那些变动不多的静态数据，如果有的（变动）话.</font></p>
<div class="versionadded">
<span class="title"><font id="731">New in Django 1.7.</font></span> </div>
<p><font id="41">Unless <a class="reference internal" href="fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><tt class="xref py py-attr docutils literal"><span class="pre">blank=False</span></tt></a> is set on the field along with a <a class="reference internal" href="fields.html#django.db.models.Field.default" title="django.db.models.Field.default"><tt class="xref py py-attr docutils literal"><span class="pre">default</span></tt></a> then a label containing <tt class="docutils literal"><span class="pre">"---------"</span></tt> will be rendered with the select box. </font><font id="729">To override this behavior, add a tuple to <tt class="docutils literal"><span class="pre">choices</span></tt> containing <tt class="docutils literal"><span class="pre">None</span></tt>; e.g. <tt class="docutils literal"><span class="pre">(None,</span> <span class="pre">'Your</span> <span class="pre">String</span> <span class="pre">For</span> <span class="pre">Display')</span></tt>. </font><font id="730">Alternatively, you can use an empty string instead of <tt class="docutils literal"><span class="pre">None</span></tt> where this makes sense - such as on a <a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>.</font></p>
</div>
<div class="section" id="s-db-column">
<span id="db-column"></span><h3><font id="580">db_column</font><a class="headerlink" href="fields.html#db-column" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.db_column">
<tt class="descclassname">Field.</tt><tt class="descname">db_column</tt><a class="headerlink" href="fields.html#django.db.models.Field.db_column" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="42">数据库中用来表征该字段的名称。</font><font id="43">如果未指定，那么Django将会使用Field名作为字段名.</font></p>
<p><font id="44">If your database column name is an SQL reserved word, or contains characters that aren’t allowed in Python variable names – notably, the hyphen – that’s OK. </font><font id="45">Django quotes column and table names behind the scenes.</font></p>
</div>
<div class="section" id="s-db-index">
<span id="db-index"></span><h3><font id="581">db_index</font><a class="headerlink" href="fields.html#db-index" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.db_index">
<tt class="descclassname">Field.</tt><tt class="descname">db_index</tt><a class="headerlink" href="fields.html#django.db.models.Field.db_index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="46">若值为 <tt class="docutils literal"><span class="pre">True</span></tt>, 则 <a class="reference internal" href="../django-admin.html#django-admin-sqlindexes"><tt class="xref std std-djadmin docutils literal"><span class="pre">django-admin</span> <span class="pre">sqlindexes</span></tt></a> 将会为此字段输出 <tt class="docutils literal"><span class="pre">CREATE</span> <span class="pre">INDEX</span></tt> 语句。（译注：为此字段创建索引）</font></p>
</div>
<div class="section" id="s-db-tablespace">
<span id="db-tablespace"></span><h3><font id="582">db_tablespace</font><a class="headerlink" href="fields.html#db-tablespace" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.db_tablespace">
<tt class="descclassname">Field.</tt><tt class="descname">db_tablespace</tt><a class="headerlink" href="fields.html#django.db.models.Field.db_tablespace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="47">The name of the <a class="reference internal" href="../../topics/db/tablespaces.html"><em>database tablespace</em></a> to use for this field’s index, if this field is indexed. </font><font id="48">The default is the project’s <a class="reference internal" href="../settings.html#std:setting-DEFAULT_INDEX_TABLESPACE"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_INDEX_TABLESPACE</span></tt></a> setting, if set, or the <a class="reference internal" href="options.html#django.db.models.Options.db_tablespace" title="django.db.models.Options.db_tablespace"><tt class="xref py py-attr docutils literal"><span class="pre">db_tablespace</span></tt></a> of the model, if any. </font><font id="49">If the backend doesn’t support tablespaces for indexes, this option is ignored.</font></p>
</div>
<div class="section" id="s-default">
<span id="default"></span><h3><font id="583">default</font><a class="headerlink" href="fields.html#default" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.default">
<tt class="descclassname">Field.</tt><tt class="descname">default</tt><a class="headerlink" href="fields.html#django.db.models.Field.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="50">该字段的默认值. </font><font id="51">它可以是一个值或者一个可调用对象. </font><font id="52">如果是一个可调用对象，那么在每一次创建新对象的时候，它将会调用一次.</font></p>
<p><font id="53">这个默认值不可以是一个可变对象（如字典，列表，等等）,因为对于所有模型的一个新的实例，来说，他将会是同一个引用. </font><font id="54">反之，我们应该将可变对象包装成一个可调用对象，将它返回. </font><font id="55">For example, if you had a custom <tt class="docutils literal"><span class="pre">JSONField</span></tt> and wanted to specify a dictionary as the default, use a function as follows:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">contact_default</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">"email"</span><span class="p">:</span> <span class="s">"to1@example.com"</span><span class="p">}</span>

<span class="n">contact_info</span> <span class="o">=</span> <span class="n">JSONField</span><span class="p">(</span><span class="s">"ContactInfo"</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">contact_default</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="56">请注意<tt class="docutils literal"><span class="pre">lambda</span></tt>s 不可作为如 <tt class="docutils literal"><span class="pre">default</span></tt> 这类可选参数的值.因为它们无法被 <a class="reference internal" href="../../topics/migrations.html#migration-serializing"><em>migrations命令序列化</em></a>. </font><font id="57">See that documentation for other caveats.</font></p>
<p><font id="58">The default value is used when new model instances are created and a value isn’t provided for the field. </font><font id="59">When the field is a primary key, the default is also used when the field is set to <tt class="docutils literal"><span class="pre">None</span></tt>.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><font id="60">The default wasn’t used for <tt class="docutils literal"><span class="pre">None</span></tt> primary key values in previous versions.</font></p>
</div>
</div>
<div class="section" id="s-editable">
<span id="editable"></span><h3><font id="584">editable</font><a class="headerlink" href="fields.html#editable" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.editable">
<tt class="descclassname">Field.</tt><tt class="descname">editable</tt><a class="headerlink" href="fields.html#django.db.models.Field.editable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="61">If <tt class="docutils literal"><span class="pre">False</span></tt>, 这个字段将不会出现在 admin 或者其他 <a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a>. </font><font id="62">They are also skipped during <a class="reference internal" href="instances.html#validating-objects"><em>model validation</em></a>. </font><font id="63">Default is <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</div>
<div class="section" id="s-error-messages">
<span id="error-messages"></span><h3><font id="585">error_messages</font><a class="headerlink" href="fields.html#error-messages" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.error_messages">
<tt class="descclassname">Field.</tt><tt class="descname">error_messages</tt><a class="headerlink" href="fields.html#django.db.models.Field.error_messages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="64">这个 <tt class="docutils literal"><span class="pre">error_messages</span></tt> 参数能够让你重载该字段将会引起的错误信息。</font><font id="65">Pass in a dictionary with keys matching the error messages you want to override.</font></p>
<p><font id="66">Error message keys include <tt class="docutils literal"><span class="pre">null</span></tt>, <tt class="docutils literal"><span class="pre">blank</span></tt>, <tt class="docutils literal"><span class="pre">invalid</span></tt>, <tt class="docutils literal"><span class="pre">invalid_choice</span></tt>, <tt class="docutils literal"><span class="pre">unique</span></tt>, and <tt class="docutils literal"><span class="pre">unique_for_date</span></tt>. </font><font id="67">Additional error message keys are specified for each field in the <a class="reference internal" href="fields.html#field-types">Field types</a> section below.</font></p>
<div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="68">The <tt class="docutils literal"><span class="pre">unique_for_date</span></tt> error message key was added.</font></p>
</div>
<div class="section" id="s-help-text">
<span id="help-text"></span><h3><font id="586">help_text</font><a class="headerlink" href="fields.html#help-text" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.help_text">
<tt class="descclassname">Field.</tt><tt class="descname">help_text</tt><a class="headerlink" href="fields.html#django.db.models.Field.help_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="69">Extra “help” text to be displayed with the form widget. </font><font id="70">It’s useful for documentation even if your field isn’t used on a form.</font></p>
<p><font id="71">Note that this value is <em>not</em> HTML-escaped in automatically-generated forms. </font><font id="72">This lets you include HTML in <a class="reference internal" href="fields.html#django.db.models.Field.help_text" title="django.db.models.Field.help_text"><tt class="xref py py-attr docutils literal"><span class="pre">help_text</span></tt></a> if you so desire. </font><font id="73">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">help_text</span><span class="o">=</span><span class="s">"Please use the following format: &lt;em&gt;YYYY-MM-DD&lt;/em&gt;."</span>
</pre></div>
</div>
<p><font id="74">Alternatively you can use plain text and <tt class="docutils literal"><span class="pre">django.utils.html.escape()</span></tt> to escape any HTML special characters. </font><font id="75">Ensure that you escape any help text that may come from untrusted users to avoid a cross-site scripting attack.</font></p>
</div>
<div class="section" id="s-primary-key">
<span id="primary-key"></span><h3><font id="587">primary_key</font><a class="headerlink" href="fields.html#primary-key" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.primary_key">
<tt class="descclassname">Field.</tt><tt class="descname">primary_key</tt><a class="headerlink" href="fields.html#django.db.models.Field.primary_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="76">若为 <tt class="docutils literal"><span class="pre">True</span></tt>, 则该字段会成为模型的主键字段。</font></p>
<p><font id="77">如果你没有在模型的任何字段上指定 <tt class="docutils literal"><span class="pre">primary_key=True</span></tt>, Django会自动添加一个 <a class="reference internal" href="fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><tt class="xref py py-class docutils literal"><span class="pre">AutoField</span></tt></a> 字段来充当主键。 所以除非你想要覆盖默认的主键行为，否则不需要在任何字段上设定<tt class="docutils literal"><span class="pre">primary_key=True</span></tt> 。</font><font id="78">更多内容 请参考 <a class="reference internal" href="../../topics/db/models.html#automatic-primary-key-fields"><em>Automatic primary key fields</em></a>.</font></p>
<p><font id="79"><tt class="docutils literal"><span class="pre">primary_key=True</span></tt> 暗含着<a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null=False</span></tt></a> 和<a class="reference internal" href="fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique=True</span></tt></a>. </font><font id="80">一个对象上只能拥有一个主键.</font></p>
<p><font id="81">主键字段是只读的。</font><font id="82">如果你改变了一个已存在对象上的主键并且保存的话，会创建一个新的对象，而不是覆盖旧的.</font></p>
</div>
<div class="section" id="s-unique">
<span id="unique"></span><h3><font id="588">unique</font><a class="headerlink" href="fields.html#unique" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.unique">
<tt class="descclassname">Field.</tt><tt class="descname">unique</tt><a class="headerlink" href="fields.html#django.db.models.Field.unique" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="83">如果为&nbsp;<tt class="docutils literal"><span class="pre">True</span></tt>, 这个字段在表中必须有唯一值.</font></p>
<p><font id="84">This is enforced at the database level and by model validation. </font><font id="85">If you try to save a model with a duplicate value in a <a class="reference internal" href="fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique</span></tt></a> field, a <a class="reference internal" href="../exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><tt class="xref py py-exc docutils literal"><span class="pre">django.db.IntegrityError</span></tt></a> will be raised by the model’s <a class="reference internal" href="instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><tt class="xref py py-meth docutils literal"><span class="pre">save()</span></tt></a> method.</font></p>
<p><font id="86">This option is valid on all field types except <a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a>, <a class="reference internal" href="fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><tt class="xref py py-class docutils literal"><span class="pre">OneToOneField</span></tt></a>, and <a class="reference internal" href="fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a>.</font></p>
<p><font id="87">Note that when <tt class="docutils literal"><span class="pre">unique</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt>, you don’t need to specify <a class="reference internal" href="fields.html#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><tt class="xref py py-attr docutils literal"><span class="pre">db_index</span></tt></a>, because <tt class="docutils literal"><span class="pre">unique</span></tt> implies the creation of an index.</font></p>
</div>
<div class="section" id="s-unique-for-date">
<span id="unique-for-date"></span><h3><font id="589">unique_for_date</font><a class="headerlink" href="fields.html#unique-for-date" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.unique_for_date">
<tt class="descclassname">Field.</tt><tt class="descname">unique_for_date</tt><a class="headerlink" href="fields.html#django.db.models.Field.unique_for_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="88">Set this to the name of a <a class="reference internal" href="fields.html#django.db.models.DateField" title="django.db.models.DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a> or <a class="reference internal" href="fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><tt class="xref py py-class docutils literal"><span class="pre">DateTimeField</span></tt></a> to require that this field be unique for the value of the date field.</font></p>
<p><font id="89">For example, if you have a field <tt class="docutils literal"><span class="pre">title</span></tt> that has <tt class="docutils literal"><span class="pre">unique_for_date="pub_date"</span></tt>, then Django wouldn’t allow the entry of two records with the same <tt class="docutils literal"><span class="pre">title</span></tt> and <tt class="docutils literal"><span class="pre">pub_date</span></tt>.</font></p>
<p><font id="90">Note that if you set this to point to a <a class="reference internal" href="fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><tt class="xref py py-class docutils literal"><span class="pre">DateTimeField</span></tt></a>, only the date portion of the field will be considered. </font><font id="91">Besides, when <a class="reference internal" href="../settings.html#std:setting-USE_TZ"><tt class="xref std std-setting docutils literal"><span class="pre">USE_TZ</span></tt></a> is <tt class="docutils literal"><span class="pre">True</span></tt>, the check will be performed in the <a class="reference internal" href="../../topics/i18n/timezones.html#default-current-time-zone"><em>current time zone</em></a> at the time the object gets saved.</font></p>
<p><font id="92">This is enforced by <a class="reference internal" href="instances.html#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><tt class="xref py py-meth docutils literal"><span class="pre">Model.validate_unique()</span></tt></a> during model validation but not at the database level. </font><font id="93">If any <a class="reference internal" href="fields.html#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><tt class="xref py py-attr docutils literal"><span class="pre">unique_for_date</span></tt></a> constraint involves fields that are not part of a <a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a> (for example, if one of the fields is listed in <tt class="docutils literal"><span class="pre">exclude</span></tt> or has <a class="reference internal" href="fields.html#django.db.models.Field.editable" title="django.db.models.Field.editable"><tt class="xref py py-attr docutils literal"><span class="pre">editable=False</span></tt></a>), <a class="reference internal" href="instances.html#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><tt class="xref py py-meth docutils literal"><span class="pre">Model.validate_unique()</span></tt></a> will skip validation for that particular constraint.</font></p>
</div>
<div class="section" id="s-unique-for-month">
<span id="unique-for-month"></span><h3><font id="590">unique_for_month</font><a class="headerlink" href="fields.html#unique-for-month" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.unique_for_month">
<tt class="descclassname">Field.</tt><tt class="descname">unique_for_month</tt><a class="headerlink" href="fields.html#django.db.models.Field.unique_for_month" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="94">Like <a class="reference internal" href="fields.html#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><tt class="xref py py-attr docutils literal"><span class="pre">unique_for_date</span></tt></a>, but requires the field to be unique with respect to the month.</font></p>
</div>
<div class="section" id="s-unique-for-year">
<span id="unique-for-year"></span><h3><font id="591">unique_for_year</font><a class="headerlink" href="fields.html#unique-for-year" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.unique_for_year">
<tt class="descclassname">Field.</tt><tt class="descname">unique_for_year</tt><a class="headerlink" href="fields.html#django.db.models.Field.unique_for_year" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="95">Like <a class="reference internal" href="fields.html#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><tt class="xref py py-attr docutils literal"><span class="pre">unique_for_date</span></tt></a> and <a class="reference internal" href="fields.html#django.db.models.Field.unique_for_month" title="django.db.models.Field.unique_for_month"><tt class="xref py py-attr docutils literal"><span class="pre">unique_for_month</span></tt></a>.</font></p>
</div>
<div class="section" id="s-verbose-name">
<span id="verbose-name"></span><h3><font id="592">verbose_name</font><a class="headerlink" href="fields.html#verbose-name" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.verbose_name">
<tt class="descclassname">Field.</tt><tt class="descname">verbose_name</tt><a class="headerlink" href="fields.html#django.db.models.Field.verbose_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="96">一个字段的可读性更高的名称。</font><font id="97">如果用户没有设定冗余名称字段，Django会自动将该字段属性名中的下划线转换为空格，并用它来创建冗余名称。</font><font id="98">See <a class="reference internal" href="../../topics/db/models.html#verbose-field-names"><em>Verbose field names</em></a>.</font></p>
</div>
<div class="section" id="s-validators">
<span id="validators"></span><h3><font id="593">validators</font><a class="headerlink" href="fields.html#validators" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.validators">
<tt class="descclassname">Field.</tt><tt class="descname">validators</tt><a class="headerlink" href="fields.html#django.db.models.Field.validators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="99">A list of validators to run for this field. </font><font id="100">See the <a class="reference internal" href="../validators.html"><em>validators documentation</em></a> for more information.</font></p>
<div class="section" id="s-registering-and-fetching-lookups">
<span id="registering-and-fetching-lookups"></span><h4><font id="630">Registering and fetching lookups</font><a class="headerlink" href="fields.html#registering-and-fetching-lookups" title="Permalink to this headline">¶</a></h4>
<p><font id="101"><tt class="docutils literal"><span class="pre">Field</span></tt> implements the <a class="reference internal" href="lookups.html#lookup-registration-api"><em>lookup registration API</em></a>. </font><font id="102">The API can be used to customize which lookups are available for a field class, and how lookups are fetched from a field.</font></p>
</div>
</div>
</div>
<div class="section" id="s-field-types">
<span id="s-model-field-types"></span><span id="field-types"></span><span id="model-field-types"></span><h2><font id="572">字段类型 （Field types）</font><a class="headerlink" href="fields.html#field-types" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-autofield">
<span id="autofield"></span><h3><font id="594">AutoField</font><a class="headerlink" href="fields.html#autofield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.AutoField">
<em class="property">class </em><tt class="descname">AutoField</tt>(<em>**options</em>)<a class="headerlink" href="fields.html#django.db.models.AutoField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="103">一个<a title="django.db.models.IntegerField" class="reference internal" href="fields.html#django.db.models.IntegerField"><tt class="xref py py-class docutils literal"><span class="pre">IntegerField</span></tt></a> 根据实际ID自动增长. </font><font id="104">你通常不需要直接使用;</font><font id="105">如果不指定,一个主键字段将自动添加到你创建的模型中.</font><font id="106">详细查看&nbsp;<a class="reference internal" href="../../topics/db/models.html#automatic-primary-key-fields"><em>主键字段</em></a>.</font></p>
</div>
<div class="section" id="s-bigintegerfield">
<span id="bigintegerfield"></span><h3><font id="595">BigIntegerField</font><a class="headerlink" href="fields.html#bigintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.BigIntegerField">
<em class="property">class </em><tt class="descname">BigIntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.BigIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="107">一个64位整数, 类似于一个&nbsp;<a class="reference internal" href="fields.html#django.db.models.IntegerField" title="django.db.models.IntegerField"><tt class="xref py py-class docutils literal"><span class="pre">IntegerField</span></tt></a> ,它的值的范围是&nbsp;<tt class="docutils literal"><span class="pre">-9223372036854775808</span></tt> 到<tt class="docutils literal"><span class="pre">9223372036854775807</span></tt>之间. </font><font id="108">这个字段默认的表单组件是一个<a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</font></p>
</div>
<div class="section" id="s-binaryfield">
<span id="binaryfield"></span><h3><font id="596">BinaryField</font><a class="headerlink" href="fields.html#binaryfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.BinaryField">
<em class="property">class </em><tt class="descname">BinaryField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.BinaryField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="109">这是一个用来存储原始二进制代码的Field.
</font><font id="110">It only supports <tt class="docutils literal"><span class="pre">bytes</span></tt> assignment. </font><font id="111">Be aware that this field has limited functionality. </font><font id="112">For example, it is not possible to filter a queryset on a <tt class="docutils literal"><span class="pre">BinaryField</span></tt> value.</font></p>
<div class="admonition-abusing-binaryfield admonition">
<p class="first admonition-title"><font id="113">Abusing <tt class="docutils literal"><span class="pre">BinaryField</span></tt></font></p>
<p class="last"><font id="114">Although you might think about storing files in the database, consider that it is bad design in 99% of the cases. </font><font id="115">This field is <em>not</em> a replacement for proper <a class="reference internal" href="../../howto/static-files/index.html"><em>static files</em></a> handling.</font></p>
</div>
</div>
<div class="section" id="s-booleanfield">
<span id="booleanfield"></span><h3><font id="597">BooleanField</font><a class="headerlink" href="fields.html#booleanfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.BooleanField">
<em class="property">class </em><tt class="descname">BooleanField</tt>(<em>**options</em>)<a class="headerlink" href="fields.html#django.db.models.BooleanField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="116">一个 true/false 字段。</font></p>
<p><font id="117">此字段的默认表单挂件是一个<a class="reference internal" href="../forms/widgets.html#django.forms.CheckboxInput" title="django.forms.CheckboxInput"><tt class="xref py py-class docutils literal"><span class="pre">CheckboxInput</span></tt></a>.</font></p>
<p><font id="118">如果你需要设置<a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 值，则使用<a class="reference internal" href="fields.html#django.db.models.NullBooleanField" title="django.db.models.NullBooleanField"><tt class="xref py py-class docutils literal"><span class="pre">NullBooleanField</span></tt></a> 来代替BooleanField。</font></p>
<p><font id="119">如果<a class="reference internal" href="fields.html#django.db.models.Field.default" title="django.db.models.Field.default"><tt class="xref py py-attr docutils literal"><span class="pre">Field.default</span></tt></a>没有指定的话， <tt class="docutils literal"><span class="pre">BooleanField</span></tt> 的默认值是 <tt class="docutils literal"><span class="pre">None</span></tt>。</font></p>
</div>
<div class="section" id="s-charfield">
<span id="charfield"></span><h3><font id="598">CharField</font><a class="headerlink" href="fields.html#charfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.CharField">
<em class="property">class </em><tt class="descname">CharField</tt>(<em>max_length=None</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.CharField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="120">一个用来存储从小到很大各种长度的字符串的地方</font></p>
<p><font id="121">如果是巨大的文本类型, 可以用 <a class="reference internal" href="fields.html#django.db.models.TextField" title="django.db.models.TextField"><tt class="xref py py-class docutils literal"><span class="pre">TextField</span></tt></a>.</font></p>
<p><font id="122">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</font></p>
<p><font id="123"><a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> has one extra required argument:</font></p>
<dl class="attribute">
<dt id="django.db.models.CharField.max_length">
<tt class="descclassname">CharField.</tt><tt class="descname">max_length</tt><a class="headerlink" href="fields.html#django.db.models.CharField.max_length" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="124">The maximum length (in characters) of the field. </font><font id="125">The max_length is enforced at the database level and in Django’s validation.</font></p>
</dd></dl>
<div class="admonition note">
<p class="first admonition-title"><font id="126">Note</font></p>
<p class="last"><font id="127">If you are writing an application that must be portable to multiple database backends, you should be aware that there are restrictions on <tt class="docutils literal"><span class="pre">max_length</span></tt> for some backends. </font><font id="128">Refer to the <a class="reference internal" href="../databases.html"><em>database backend notes</em></a> for details.</font></p>
</div>
<div class="admonition-mysql-users admonition">
<p class="first admonition-title"><font id="129">MySQL users</font></p>
<p class="last"><font id="130">If you are using this field with MySQLdb 1.2.2 and the <tt class="docutils literal"><span class="pre">utf8_bin</span></tt> collation (which is <em>not</em> the default), there are some issues to be aware of. </font><font id="131">Refer to the <a class="reference internal" href="../databases.html#mysql-collation"><em>MySQL database notes</em></a> for details.</font></p>
</div>
</div>
<div class="section" id="s-commaseparatedintegerfield">
<span id="commaseparatedintegerfield"></span><h3><font id="599">CommaSeparatedIntegerField</font><a class="headerlink" href="fields.html#commaseparatedintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.CommaSeparatedIntegerField">
<em class="property">class </em><tt class="descname">CommaSeparatedIntegerField</tt>(<em>max_length=None</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.CommaSeparatedIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="132">A field of integers separated by commas. </font><font id="133">As in <a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>, the <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> argument is required and the note about database portability mentioned there should be heeded.</font></p>
</div>
<div class="section" id="s-datefield">
<span id="datefield"></span><h3><font id="600">DateField</font><a class="headerlink" href="fields.html#datefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.DateField">
<em class="property">class </em><tt class="descname">DateField</tt>(<span class="optional">[</span><em>auto_now=False</em>, <em>auto_now_add=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.DateField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="134">A date, represented in Python by a <tt class="docutils literal"><span class="pre">datetime.date</span></tt> instance. </font><font id="135">Has a few extra, optional arguments:</font></p>
<dl class="attribute">
<dt id="django.db.models.DateField.auto_now">
<tt class="descclassname">DateField.</tt><tt class="descname">auto_now</tt><a class="headerlink" href="fields.html#django.db.models.DateField.auto_now" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="136">Automatically set the field to now every time the object is saved. </font><font id="137">Useful for “last-modified” timestamps. </font><font id="138">Note that the current date is <em>always</em> used; </font><font id="139">it’s not just a default value that you can override.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.DateField.auto_now_add">
<tt class="descclassname">DateField.</tt><tt class="descname">auto_now_add</tt><a class="headerlink" href="fields.html#django.db.models.DateField.auto_now_add" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="140">Automatically set the field to now when the object is first created. </font><font id="141">Useful for creation of timestamps. </font><font id="142">Note that the current date is <em>always</em> used; </font><font id="143">it’s not just a default value that you can override.</font></p>
</dd></dl>
<p><font id="144">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>. </font><font id="145">The admin adds a JavaScript calendar, and a shortcut for “Today”. </font><font id="146">Includes an additional <tt class="docutils literal"><span class="pre">invalid_date</span></tt> error message key.</font></p>
<p><font id="147">The options <tt class="docutils literal"><span class="pre">auto_now_add</span></tt>, <tt class="docutils literal"><span class="pre">auto_now</span></tt>, and <tt class="docutils literal"><span class="pre">default</span></tt> are mutually exclusive. </font><font id="148">Any combination of these options will result in an error.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="149">Note</font></p>
<p class="last"><font id="150">As currently implemented, setting <tt class="docutils literal"><span class="pre">auto_now</span></tt> or <tt class="docutils literal"><span class="pre">auto_now_add</span></tt> to <tt class="docutils literal"><span class="pre">True</span></tt> will cause the field to have <tt class="docutils literal"><span class="pre">editable=False</span></tt> and <tt class="docutils literal"><span class="pre">blank=True</span></tt> set.</font></p>
</div>
<div class="admonition note">
<p class="first admonition-title"><font id="151">Note</font></p>
<p class="last"><font id="152">The <tt class="docutils literal"><span class="pre">auto_now</span></tt> and <tt class="docutils literal"><span class="pre">auto_now_add</span></tt> options will always use the date in the <a class="reference internal" href="../../topics/i18n/timezones.html#default-current-time-zone"><em>default timezone</em></a> at the moment of creation or update. </font><font id="153">If you need something different, you may want to consider simply using your own callable default or overriding <tt class="docutils literal"><span class="pre">save()</span></tt> instead of using <tt class="docutils literal"><span class="pre">auto_now</span></tt> or <tt class="docutils literal"><span class="pre">auto_now_add</span></tt>; </font><font id="154">or using a <tt class="docutils literal"><span class="pre">DateTimeField</span></tt> instead of a <tt class="docutils literal"><span class="pre">DateField</span></tt> and deciding how to handle the conversion from datetime to date at display time.</font></p>
</div>
</div>
<div class="section" id="s-datetimefield">
<span id="datetimefield"></span><h3><font id="601">DateTimeField</font><a class="headerlink" href="fields.html#datetimefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.DateTimeField">
<em class="property">class </em><tt class="descname">DateTimeField</tt>(<span class="optional">[</span><em>auto_now=False</em>, <em>auto_now_add=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.DateTimeField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="155">A date and time, represented in Python by a <tt class="docutils literal"><span class="pre">datetime.datetime</span></tt> instance. </font><font id="156">Takes the same extra arguments as <a class="reference internal" href="fields.html#django.db.models.DateField" title="django.db.models.DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a>.</font></p>
<p><font id="157">The default form widget for this field is a single <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>. </font><font id="158">The admin uses two separate <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a> widgets with JavaScript shortcuts.</font></p>
</div>
<div class="section" id="s-decimalfield">
<span id="decimalfield"></span><h3><font id="602">DecimalField</font><a class="headerlink" href="fields.html#decimalfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.DecimalField">
<em class="property">class </em><tt class="descname">DecimalField</tt>(<em>max_digits=None</em>, <em>decimal_places=None</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.DecimalField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="159">十进制浮点数,表示python中 <a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal.Decimal" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">Decimal</span></tt></a> 的一个实例. </font><font id="160">有两个 <strong>必须的</strong>参数:</font></p>
<dl class="attribute">
<dt id="django.db.models.DecimalField.max_digits">
<tt class="descclassname">DecimalField.</tt><tt class="descname">max_digits</tt><a class="headerlink" href="fields.html#django.db.models.DecimalField.max_digits" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="161">The maximum number of digits allowed in the number. </font><font id="162">Note that this number must be greater than or equal to <tt class="docutils literal"><span class="pre">decimal_places</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.DecimalField.decimal_places">
<tt class="descclassname">DecimalField.</tt><tt class="descname">decimal_places</tt><a class="headerlink" href="fields.html#django.db.models.DecimalField.decimal_places" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="163">The number of decimal places to store with the number.</font></p>
</dd></dl>
<p><font id="164">For example, to store numbers up to <tt class="docutils literal"><span class="pre">999</span></tt> with a resolution of 2 decimal places, you’d use:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="165">And to store numbers up to approximately one billion with a resolution of 10 decimal places:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">19</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="166">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="167">Note</font></p>
<p class="last"><font id="168">For more information about the differences between the <a class="reference internal" href="fields.html#django.db.models.FloatField" title="django.db.models.FloatField"><tt class="xref py py-class docutils literal"><span class="pre">FloatField</span></tt></a> and <a class="reference internal" href="fields.html#django.db.models.DecimalField" title="django.db.models.DecimalField"><tt class="xref py py-class docutils literal"><span class="pre">DecimalField</span></tt></a> classes, please see <a class="reference internal" href="fields.html#floatfield-vs-decimalfield"><em>FloatField vs. DecimalField</em></a>.</font></p>
</div>
</div>
<div class="section" id="s-durationfield">
<span id="durationfield"></span><h3><font id="603">DurationField</font><a class="headerlink" href="fields.html#durationfield" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<dl class="class">
<dt id="django.db.models.DurationField">
<em class="property">class </em><tt class="descname">DurationField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.DurationField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="169">A field for storing periods of time - modeled in Python by <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">timedelta</span></tt></a>. </font><font id="170">When used on PostgreSQL, the data type used is an <tt class="docutils literal"><span class="pre">interval</span></tt> and on Oracle the data type is <tt class="docutils literal"><span class="pre">INTERVAL</span> <span class="pre">DAY(9)</span> <span class="pre">TO</span> <span class="pre">SECOND(6)</span></tt>. </font><font id="171">Otherwise a <tt class="docutils literal"><span class="pre">bigint</span></tt> of microseconds is used.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="172">Note</font></p>
<p class="last"><font id="173">Arithmetic with <tt class="docutils literal"><span class="pre">DurationField</span></tt> works in most cases. </font><font id="174">However on all databases other than PostgreSQL, comparing the value of a <tt class="docutils literal"><span class="pre">DurationField</span></tt> to arithmetic on <tt class="docutils literal"><span class="pre">DateTimeField</span></tt> instances will not work as expected.</font></p>
</div>
</div>
<div class="section" id="s-emailfield">
<span id="emailfield"></span><h3><font id="604">EmailField</font><a class="headerlink" href="fields.html#emailfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.EmailField">
<em class="property">class </em><tt class="descname">EmailField</tt>(<span class="optional">[</span><em>max_length=254</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.EmailField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="175">A <a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> that checks that the value is a valid email address. </font><font id="176">It uses <a class="reference internal" href="../validators.html#django.core.validators.EmailValidator" title="django.core.validators.EmailValidator"><tt class="xref py py-class docutils literal"><span class="pre">EmailValidator</span></tt></a> to validate the input.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><font id="177">The default <tt class="docutils literal"><span class="pre">max_length</span></tt> was increased from 75 to 254 in order to be compliant with RFC3696/5321.</font></p>
</div>
</div>
<div class="section" id="s-filefield">
<span id="filefield"></span><h3><font id="605">FileField</font><a class="headerlink" href="fields.html#filefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.FileField">
<em class="property">class </em><tt class="descname">FileField</tt>(<span class="optional">[</span><em>upload_to=None</em>, <em>max_length=100</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.FileField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="178">一个文件上传字段。</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="179">注意</font></p>
<p class="last"><font id="180">如果使用<tt class="docutils literal"><span class="pre">primary_key</span></tt> 和<tt class="docutils literal"><span class="pre">unique</span></tt>参数会生成&nbsp;<tt class="docutils literal"><span class="pre">TypeError</span></tt>错误</font></p>
</div>
<p><font id="181">有两个可选参数：</font></p>
<dl class="attribute">
<dt id="django.db.models.FileField.upload_to">
<tt class="descclassname">FileField.</tt><tt class="descname">upload_to</tt><a class="headerlink" href="fields.html#django.db.models.FileField.upload_to" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><font id="182">在旧版本Django中，需要使用<tt class="docutils literal"><span class="pre">upload_to</span></tt>&nbsp;</font></p>
</div>
<p><font id="183">将会添加一个本地文件系统路径到 <a class="reference internal" href="../settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a> 设置中，来明确 <a class="reference internal" href="fields.html#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><tt class="xref py py-attr docutils literal"><span class="pre">url</span></tt></a> 属性的值。</font></p>
<p><font id="184">这个路径可能会包含一个 <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">strftime()</span></tt></a> 格式串,并且会在文件上传时被替换为 实际的date/time作为文件路径 (这样上传的文件就不会塞满你指定的文件夹了).</font></p>
<p><font id="185">这也是可调用的，就像函数一样。它被调用来获取上传路径，包括文件名。</font><font id="186">它必须接受两个参数，并且返回一个Unix-style的路径(带有/)给存储系统。</font><font id="187">这被传递的两个参数为:</font></p>
<table class="docutils">
<colgroup>
<col width="32%"></col>
<col width="68%"></col>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">instance</span></tt></td>
<td><p class="first"><font id="188"><tt class="docutils literal"><span class="pre">FileField</span></tt> 被定义时的一个实例. </font><font id="189">More specifically, this is the particular instance where the current file is being attached.</font></p>
<p class="last"><font id="190">In most cases, this object will not have been saved to the database yet, so if it uses the default <tt class="docutils literal"><span class="pre">AutoField</span></tt>, <em>it might not yet have a value for its primary key field</em>.</font></p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">filename</span></tt></td>
<td>The filename that was originally given to the
file. This may or may not be taken into account
when determining the final destination path.</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FileField.storage">
<tt class="descclassname">FileField.</tt><tt class="descname">storage</tt><a class="headerlink" href="fields.html#django.db.models.FileField.storage" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="191">A storage object, which handles the storage and retrieval of your files. </font><font id="192">See <a class="reference internal" href="../../topics/files.html"><em>Managing files</em></a> for details on how to provide this object.</font></p>
</dd></dl>
<p><font id="193">这个字段在表格里的默认组件是 <a class="reference internal" href="../forms/widgets.html#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><tt class="xref py py-class docutils literal"><span class="pre">ClearableFileInput</span></tt></a>.</font></p>
<p><font id="194">Using a <a class="reference internal" href="fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> or an <a class="reference internal" href="fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> (see below) in a model takes a few steps:</font></p>
<ol class="arabic simple">
<li><font id="636">In your settings file, you’ll need to define <a class="reference internal" href="../settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a> as the full path to a directory where you’d like Django to store uploaded files. </font><font id="637">(For performance, these files are not stored in the database.) </font><font id="638">Define <a class="reference internal" href="../settings.html#std:setting-MEDIA_URL"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_URL</span></tt></a> as the base public URL of that directory. </font><font id="639">Make sure that this directory is writable by the Web server’s user account.</font></li>
<li><font id="640">Add the <a class="reference internal" href="fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> or <a class="reference internal" href="fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> to your model, defining the <a class="reference internal" href="fields.html#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><tt class="xref py py-attr docutils literal"><span class="pre">upload_to</span></tt></a> option to specify a subdirectory of <a class="reference internal" href="../settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a> to use for uploaded files.</font></li>
<li><font id="641">All that will be stored in your database is a path to the file (relative to <a class="reference internal" href="../settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a>). </font><font id="642">You’ll most likely want to use the convenience <a class="reference internal" href="fields.html#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><tt class="xref py py-attr docutils literal"><span class="pre">url</span></tt></a> attribute provided by Django. </font><font id="643">For example, if your <a class="reference internal" href="fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> is called <tt class="docutils literal"><span class="pre">mug_shot</span></tt>, you can get the absolute path to your image in a template with <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">object.mug_shot.url</span> <span class="pre">}}</span></tt>.</font></li>
</ol>
<p><font id="195">For example, say your <a class="reference internal" href="../settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a> is set to <tt class="docutils literal"><span class="pre">'/home/media'</span></tt>, and <a class="reference internal" href="fields.html#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><tt class="xref py py-attr docutils literal"><span class="pre">upload_to</span></tt></a> is set to <tt class="docutils literal"><span class="pre">'photos/%Y/%m/%d'</span></tt>. </font><font id="196">The <tt class="docutils literal"><span class="pre">'%Y/%m/%d'</span></tt> part of <a class="reference internal" href="fields.html#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><tt class="xref py py-attr docutils literal"><span class="pre">upload_to</span></tt></a> is <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">strftime()</span></tt></a> formatting; </font><font id="197"><tt class="docutils literal"><span class="pre">'%Y'</span></tt> is the four-digit year, <tt class="docutils literal"><span class="pre">'%m'</span></tt> is the two-digit month and <tt class="docutils literal"><span class="pre">'%d'</span></tt> is the two-digit day. </font><font id="198">If you upload a file on Jan. 15, 2007, it will be saved in the directory <tt class="docutils literal"><span class="pre">/home/media/photos/2007/01/15</span></tt>.</font></p>
<p><font id="199">If you wanted to retrieve the uploaded file’s on-disk filename, or the file’s size, you could use the <a class="reference internal" href="../files/file.html#django.core.files.File.name" title="django.core.files.File.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a> and <a class="reference internal" href="../files/file.html#django.core.files.File.size" title="django.core.files.File.size"><tt class="xref py py-attr docutils literal"><span class="pre">size</span></tt></a> attributes respectively; </font><font id="200">for more information on the available attributes and methods, see the <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">File</span></tt></a> class reference and the <a class="reference internal" href="../../topics/files.html"><em>Managing files</em></a> topic guide.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="201">Note</font></p>
<p class="last"><font id="202">The file is saved as part of saving the model in the database, so the actual file name used on disk cannot be relied on until after the model has been saved.</font></p>
</div>
<p><font id="203">The uploaded file’s relative URL can be obtained using the <a class="reference internal" href="fields.html#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><tt class="xref py py-attr docutils literal"><span class="pre">url</span></tt></a> attribute. </font><font id="204">Internally, this calls the <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><tt class="xref py py-meth docutils literal"><span class="pre">url()</span></tt></a> method of the underlying <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><tt class="xref py py-class docutils literal"><span class="pre">Storage</span></tt></a> class.</font></p>
<p id="file-upload-security"><font id="205">Note that whenever you deal with uploaded files, you should pay close attention to where you’re uploading them and what type of files they are, to avoid security holes. </font><font id="206"><em>Validate all uploaded files</em> so that you’re sure the files are what you think they are. </font><font id="207">For example, if you blindly let somebody upload files, without validation, to a directory that’s within your Web server’s document root, then somebody could upload a CGI or PHP script and execute that script by visiting its URL on your site. </font><font id="208">Don’t allow that.</font></p>
<p><font id="209">Also note that even an uploaded HTML file, since it can be executed by the browser (though not by the server), can pose security threats that are equivalent to XSS or CSRF attacks.</font></p>
<p><font id="210"><a class="reference internal" href="fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> instances are created in your database as <tt class="docutils literal"><span class="pre">varchar</span></tt> columns with a default max length of 100 characters. </font><font id="211">As with other fields, you can change the maximum length using the <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> argument.</font></p>
<div class="section" id="s-filefield-and-fieldfile">
<span id="filefield-and-fieldfile"></span><h4><font id="631">FileField and FieldFile</font><a class="headerlink" href="fields.html#filefield-and-fieldfile" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="django.db.models.fields.files.FieldFile">
<em class="property">class </em><tt class="descname">FieldFile</tt><a class="reference internal" href="http://python.usyiyi.cn/django/_modules/django/db/models/fields/files.html#FieldFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="fields.html#django.db.models.fields.files.FieldFile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="212">When you access a <a class="reference internal" href="fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> on a model, you are given an instance of <a class="reference internal" href="fields.html#django.db.models.fields.files.FieldFile" title="django.db.models.fields.files.FieldFile"><tt class="xref py py-class docutils literal"><span class="pre">FieldFile</span></tt></a> as a proxy for accessing the underlying file. </font><font id="213">In addition to the functionality inherited from <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">django.core.files.File</span></tt></a>, this class has several attributes and methods that can be used to interact with file data:</font></p>
<dl class="attribute">
<dt id="django.db.models.fields.files.FieldFile.url">
<tt class="descclassname">FieldFile.</tt><tt class="descname">url</tt><a class="headerlink" href="fields.html#django.db.models.fields.files.FieldFile.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="214">A read-only property to access the file’s relative URL by calling the <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><tt class="xref py py-meth docutils literal"><span class="pre">url()</span></tt></a> method of the underlying <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><tt class="xref py py-class docutils literal"><span class="pre">Storage</span></tt></a> class.</font></p>
<dl class="method">
<dt id="django.db.models.fields.files.FieldFile.open">
<tt class="descclassname">FieldFile.</tt><tt class="descname">open</tt>(<em>mode='rb'</em>)<a class="reference internal" href="http://python.usyiyi.cn/django/_modules/django/db/models/fields/files.html#FieldFile.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="fields.html#django.db.models.fields.files.FieldFile.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="215">Behaves like the standard Python <tt class="docutils literal"><span class="pre">open()</span></tt> method and opens the file associated with this instance in the mode specified by <tt class="docutils literal"><span class="pre">mode</span></tt>.</font></p>
<dl class="method">
<dt id="django.db.models.fields.files.FieldFile.close">
<tt class="descclassname">FieldFile.</tt><tt class="descname">close</tt>()<a class="reference internal" href="http://python.usyiyi.cn/django/_modules/django/db/models/fields/files.html#FieldFile.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="fields.html#django.db.models.fields.files.FieldFile.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="216">Behaves like the standard Python <tt class="docutils literal"><span class="pre">file.close()</span></tt> method and closes the file associated with this instance.</font></p>
<dl class="method">
<dt id="django.db.models.fields.files.FieldFile.save">
<tt class="descclassname">FieldFile.</tt><tt class="descname">save</tt>(<em>name</em>, <em>content</em>, <em>save=True</em>)<a class="reference internal" href="http://python.usyiyi.cn/django/_modules/django/db/models/fields/files.html#FieldFile.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="fields.html#django.db.models.fields.files.FieldFile.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="217">This method takes a filename and file contents and passes them to the storage class for the field, then associates the stored file with the model field. </font><font id="218">If you want to manually associate file data with <a class="reference internal" href="fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> instances on your model, the <tt class="docutils literal"><span class="pre">save()</span></tt> method is used to persist that file data.</font></p>
<p><font id="219">Takes two required arguments: <tt class="docutils literal"><span class="pre">name</span></tt> which is the name of the file, and <tt class="docutils literal"><span class="pre">content</span></tt> which is an object containing the file’s contents. </font><font id="220">The optional <tt class="docutils literal"><span class="pre">save</span></tt> argument controls whether or not the model instance is saved after the file associated with this field has been altered. </font><font id="221">Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
<p><font id="222">Note that the <tt class="docutils literal"><span class="pre">content</span></tt> argument should be an instance of <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">django.core.files.File</span></tt></a>, not Python’s built-in file object. </font><font id="223">You can construct a <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">File</span></tt></a> from an existing Python file object like this:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.files</span> <span class="kn">import</span> <span class="n">File</span>
<span class="c"># Open an existing file using Python's built-in open()</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/tmp/hello.world'</span><span class="p">)</span>
<span class="n">myfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="224">Or you can construct one from a Python string like this:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.files.base</span> <span class="kn">import</span> <span class="n">ContentFile</span>
<span class="n">myfile</span> <span class="o">=</span> <span class="n">ContentFile</span><span class="p">(</span><span class="s">"hello world"</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="225">For more information, see <a class="reference internal" href="../../topics/files.html"><em>Managing files</em></a>.</font></p>
<dl class="method">
<dt id="django.db.models.fields.files.FieldFile.delete">
<tt class="descclassname">FieldFile.</tt><tt class="descname">delete</tt>(<em>save=True</em>)<a class="reference internal" href="http://python.usyiyi.cn/django/_modules/django/db/models/fields/files.html#FieldFile.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="fields.html#django.db.models.fields.files.FieldFile.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="226">Deletes the file associated with this instance and clears all attributes on the field. </font><font id="227">Note: This method will close the file if it happens to be open when <tt class="docutils literal"><span class="pre">delete()</span></tt> is called.</font></p>
<p><font id="228">The optional <tt class="docutils literal"><span class="pre">save</span></tt> argument controls whether or not the model instance is saved after the file associated with this field has been deleted. </font><font id="229">Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
<p><font id="230">Note that when a model is deleted, related files are not deleted. </font><font id="231">If you need to cleanup orphaned files, you’ll need to handle it yourself (for instance, with a custom management command that can be run manually or scheduled to run periodically via e.g. cron).</font></p>
</div>
</div>
<div class="section" id="s-filepathfield">
<span id="filepathfield"></span><h3><font id="606">FilePathField</font><a class="headerlink" href="fields.html#filepathfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.FilePathField">
<em class="property">class </em><tt class="descname">FilePathField</tt>(<em>path=None</em><span class="optional">[</span>, <em>match=None</em>, <em>recursive=False</em>, <em>max_length=100</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.FilePathField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="232">一个&nbsp;<a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> ，内容只限于文件系统内特定目录下的文件名。</font><font id="233">有三个参数, 其中第一个是 <strong>必需的</strong>:</font></p>
<dl class="attribute">
<dt id="django.db.models.FilePathField.path">
<tt class="descclassname">FilePathField.</tt><tt class="descname">path</tt><a class="headerlink" href="fields.html#django.db.models.FilePathField.path" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="234">Required. </font><font id="732">The absolute filesystem path to a directory from which this <a class="reference internal" href="fields.html#django.db.models.FilePathField" title="django.db.models.FilePathField"><tt class="xref py py-class docutils literal"><span class="pre">FilePathField</span></tt></a> should get its choices. </font><font id="733">Example: <tt class="docutils literal"><span class="pre">"/home/images"</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FilePathField.match">
<tt class="descclassname">FilePathField.</tt><tt class="descname">match</tt><a class="headerlink" href="fields.html#django.db.models.FilePathField.match" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="235">Optional. </font><font id="734">A regular expression, as a string, that <a class="reference internal" href="fields.html#django.db.models.FilePathField" title="django.db.models.FilePathField"><tt class="xref py py-class docutils literal"><span class="pre">FilePathField</span></tt></a> will use to filter filenames. </font><font id="735">Note that the regex will be applied to the base filename, not the full path. </font><font id="736">Example: <tt class="docutils literal"><span class="pre">"foo.*.txt$"</span></tt>, which will match a file called <tt class="docutils literal"><span class="pre">foo23.txt</span></tt> but not <tt class="docutils literal"><span class="pre">bar.txt</span></tt> or <tt class="docutils literal"><span class="pre">foo23.png</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FilePathField.recursive">
<tt class="descclassname">FilePathField.</tt><tt class="descname">recursive</tt><a class="headerlink" href="fields.html#django.db.models.FilePathField.recursive" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="236">Optional. </font><font id="237">Either <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>. </font><font id="238">Default is <tt class="docutils literal"><span class="pre">False</span></tt>. </font><font id="239">Specifies whether all subdirectories of <a class="reference internal" href="fields.html#django.db.models.FilePathField.path" title="django.db.models.FilePathField.path"><tt class="xref py py-attr docutils literal"><span class="pre">path</span></tt></a> should be included</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FilePathField.allow_files">
<tt class="descclassname">FilePathField.</tt><tt class="descname">allow_files</tt><a class="headerlink" href="fields.html#django.db.models.FilePathField.allow_files" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="240">Optional. </font><font id="241">Either <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>. </font><font id="242">Default is <tt class="docutils literal"><span class="pre">True</span></tt>. </font><font id="243">Specifies whether files in the specified location should be included. </font><font id="244">Either this or <a class="reference internal" href="fields.html#django.db.models.FilePathField.allow_folders" title="django.db.models.FilePathField.allow_folders"><tt class="xref py py-attr docutils literal"><span class="pre">allow_folders</span></tt></a> must be <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FilePathField.allow_folders">
<tt class="descclassname">FilePathField.</tt><tt class="descname">allow_folders</tt><a class="headerlink" href="fields.html#django.db.models.FilePathField.allow_folders" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="245">Optional. </font><font id="246">Either <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt>. </font><font id="247">Default is <tt class="docutils literal"><span class="pre">False</span></tt>. </font><font id="248">Specifies whether folders in the specified location should be included. </font><font id="249">Either this or <a class="reference internal" href="fields.html#django.db.models.FilePathField.allow_files" title="django.db.models.FilePathField.allow_files"><tt class="xref py py-attr docutils literal"><span class="pre">allow_files</span></tt></a> must be <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</dd></dl>
<p><font id="250">Of course, these arguments can be used together.</font></p>
<p><font id="251">有一点需要提醒的是 <a class="reference internal" href="fields.html#django.db.models.FilePathField.match" title="django.db.models.FilePathField.match"><tt class="xref py py-attr docutils literal"><span class="pre">match</span></tt></a>只匹配基本文件名（base filename）, 而不是整个文件路径（full path）. </font><font id="252">So, this example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FilePathField</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s">"/home/images"</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s">"foo.*"</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="253">...will match <tt class="docutils literal"><span class="pre">/home/images/foo.png</span></tt> but not <tt class="docutils literal"><span class="pre">/home/images/foo/bar.png</span></tt> because the <a class="reference internal" href="fields.html#django.db.models.FilePathField.match" title="django.db.models.FilePathField.match"><tt class="xref py py-attr docutils literal"><span class="pre">match</span></tt></a> applies to the base filename (<tt class="docutils literal"><span class="pre">foo.png</span></tt> and <tt class="docutils literal"><span class="pre">bar.png</span></tt>).</font></p>
<p><font id="254"><a class="reference internal" href="fields.html#django.db.models.FilePathField" title="django.db.models.FilePathField"><tt class="xref py py-class docutils literal"><span class="pre">FilePathField</span></tt></a> instances are created in your database as <tt class="docutils literal"><span class="pre">varchar</span></tt> columns with a default max length of 100 characters. </font><font id="255">As with other fields, you can change the maximum length using the <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> argument.</font></p>
</div>
<div class="section" id="s-floatfield">
<span id="floatfield"></span><h3><font id="607">FloatField</font><a class="headerlink" href="fields.html#floatfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.FloatField">
<em class="property">class </em><tt class="descname">FloatField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.FloatField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="256">A floating-point number represented in Python by a <tt class="docutils literal"><span class="pre">float</span></tt> instance.</font></p>
<p><font id="257">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</font></p>
<div class="admonition-floatfield-vs-decimalfield admonition" id="floatfield-vs-decimalfield">
<p class="first admonition-title"><font id="258"><tt class="docutils literal"><span class="pre">FloatField</span></tt> vs. <tt class="docutils literal"><span class="pre">DecimalField</span></tt></font></p>
<p class="last"><font id="259">The <a class="reference internal" href="fields.html#django.db.models.FloatField" title="django.db.models.FloatField"><tt class="xref py py-class docutils literal"><span class="pre">FloatField</span></tt></a> class is sometimes mixed up with the <a class="reference internal" href="fields.html#django.db.models.DecimalField" title="django.db.models.DecimalField"><tt class="xref py py-class docutils literal"><span class="pre">DecimalField</span></tt></a> class. </font><font id="260">Although they both represent real numbers, they represent those numbers differently. </font><font id="261"><tt class="docutils literal"><span class="pre">FloatField</span></tt> uses Python’s <tt class="docutils literal"><span class="pre">float</span></tt> type internally, while <tt class="docutils literal"><span class="pre">DecimalField</span></tt> uses Python’s <tt class="docutils literal"><span class="pre">Decimal</span></tt> type. </font><font id="262">For information on the difference between the two, see Python’s documentation for the <a class="reference external" href="https://docs.python.org/3/library/decimal.html#module-decimal" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">decimal</span></tt></a> module.</font></p>
</div>
</div>
<div class="section" id="s-imagefield">
<span id="imagefield"></span><h3><font id="608">ImageField</font><a class="headerlink" href="fields.html#imagefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.ImageField">
<em class="property">class </em><tt class="descname">ImageField</tt>(<span class="optional">[</span><em>upload_to=None</em>, <em>height_field=None</em>, <em>width_field=None</em>, <em>max_length=100</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.ImageField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="263">继承了 <a class="reference internal" href="fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a>的所有属性和方法, 但还对上传的对象进行校验，确保它是个有效的image.</font></p>
<p><font id="264">In addition to the special attributes that are available for <a class="reference internal" href="fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a>, an <a class="reference internal" href="fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> also has <tt class="docutils literal"><span class="pre">height</span></tt> and <tt class="docutils literal"><span class="pre">width</span></tt> attributes.</font></p>
<p><font id="265">To facilitate querying on those attributes, <a class="reference internal" href="fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> has two extra optional arguments:</font></p>
<dl class="attribute">
<dt id="django.db.models.ImageField.height_field">
<tt class="descclassname">ImageField.</tt><tt class="descname">height_field</tt><a class="headerlink" href="fields.html#django.db.models.ImageField.height_field" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="266">Name of a model field which will be auto-populated with the height of the image each time the model instance is saved.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ImageField.width_field">
<tt class="descclassname">ImageField.</tt><tt class="descname">width_field</tt><a class="headerlink" href="fields.html#django.db.models.ImageField.width_field" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="267">Name of a model field which will be auto-populated with the width of the image each time the model instance is saved.</font></p>
</dd></dl>
<p><font id="268">Requires the <a class="reference external" href="http://pillow.readthedocs.org/en/latest/">Pillow</a> library.</font></p>
<p><font id="269"><a class="reference internal" href="fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> instances are created in your database as <tt class="docutils literal"><span class="pre">varchar</span></tt> columns with a default max length of 100 characters. </font><font id="270">As with other fields, you can change the maximum length using the <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> argument.</font></p>
<p><font id="271">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><tt class="xref py py-class docutils literal"><span class="pre">ClearableFileInput</span></tt></a>.</font></p>
</div>
<div class="section" id="s-integerfield">
<span id="integerfield"></span><h3><font id="609">IntegerField</font><a class="headerlink" href="fields.html#integerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.IntegerField">
<em class="property">class </em><tt class="descname">IntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.IntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="272">一个整数。</font><font id="273">在Django所支持的所有数据库中，从 <tt class="docutils literal"><span class="pre">-2147483648</span></tt> 到 <tt class="docutils literal"><span class="pre">2147483647</span></tt> 范围内的值是合法的。</font><font id="274">默认的表单输入工具是<a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</font></p>
</div>
<div class="section" id="s-ipaddressfield">
<span id="ipaddressfield"></span><h3><font id="610">IPAddressField</font><a class="headerlink" href="fields.html#ipaddressfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.IPAddressField">
<em class="property">class </em><tt class="descname">IPAddressField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.IPAddressField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<div class="deprecated">
<p><font id="275"><span class="versionmodified">Deprecated since version 1.7: </span></font><font id="276">This field has been deprecated in favor of <a class="reference internal" href="fields.html#django.db.models.GenericIPAddressField" title="django.db.models.GenericIPAddressField"><tt class="xref py py-class docutils literal"><span class="pre">GenericIPAddressField</span></tt></a>.</font></p>
</div>
<p><font id="277">An IP address, in string format (e.g. “192.0.2.30”). </font><font id="278">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</font></p>
</div>
<div class="section" id="s-genericipaddressfield">
<span id="genericipaddressfield"></span><h3><font id="611">GenericIPAddressField</font><a class="headerlink" href="fields.html#genericipaddressfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.GenericIPAddressField">
<em class="property">class </em><tt class="descname">GenericIPAddressField</tt>(<span class="optional">[</span><em>protocol=both</em>, <em>unpack_ipv4=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.GenericIPAddressField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="279">An IPv4 or IPv6 address, in string format (e.g. <tt class="docutils literal"><span class="pre">192.0.2.30</span></tt> or <tt class="docutils literal"><span class="pre">2a02:42fe::4</span></tt>). </font><font id="280">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</font></p>
<p><font id="281">The IPv6 address normalization follows <span class="target" id="index-0"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc4291.html#section-2.2"><strong>RFC 4291</strong></a> section 2.2, including using the IPv4 format suggested in paragraph 3 of that section, like <tt class="docutils literal"><span class="pre">::ffff:192.0.2.0</span></tt>. </font><font id="282">For example, <tt class="docutils literal"><span class="pre">2001:0::0:01</span></tt> would be normalized to <tt class="docutils literal"><span class="pre">2001::1</span></tt>, and <tt class="docutils literal"><span class="pre">::ffff:0a0a:0a0a</span></tt> to <tt class="docutils literal"><span class="pre">::ffff:10.10.10.10</span></tt>. </font><font id="283">All characters are converted to lowercase.</font></p>
<dl class="attribute">
<dt id="django.db.models.GenericIPAddressField.protocol">
<tt class="descclassname">GenericIPAddressField.</tt><tt class="descname">protocol</tt><a class="headerlink" href="fields.html#django.db.models.GenericIPAddressField.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="284">Limits valid inputs to the specified protocol. </font><font id="285">Accepted values are <tt class="docutils literal"><span class="pre">'both'</span></tt> (default), <tt class="docutils literal"><span class="pre">'IPv4'</span></tt> or <tt class="docutils literal"><span class="pre">'IPv6'</span></tt>. </font><font id="286">Matching is case insensitive.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.GenericIPAddressField.unpack_ipv4">
<tt class="descclassname">GenericIPAddressField.</tt><tt class="descname">unpack_ipv4</tt><a class="headerlink" href="fields.html#django.db.models.GenericIPAddressField.unpack_ipv4" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="287">Unpacks IPv4 mapped addresses like <tt class="docutils literal"><span class="pre">::ffff:192.0.2.1</span></tt>. </font><font id="288">If this option is enabled that address would be unpacked to <tt class="docutils literal"><span class="pre">192.0.2.1</span></tt>. </font><font id="289">Default is disabled. </font><font id="290">Can only be used when <tt class="docutils literal"><span class="pre">protocol</span></tt> is set to <tt class="docutils literal"><span class="pre">'both'</span></tt>.</font></p>
</dd></dl>
<p><font id="291">If you allow for blank values, you have to allow for null values since blank values are stored as null.</font></p>
</div>
<div class="section" id="s-nullbooleanfield">
<span id="nullbooleanfield"></span><h3><font id="612">NullBooleanField</font><a class="headerlink" href="fields.html#nullbooleanfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.NullBooleanField">
<em class="property">class </em><tt class="descname">NullBooleanField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.NullBooleanField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="292">Like a <a class="reference internal" href="fields.html#django.db.models.BooleanField" title="django.db.models.BooleanField"><tt class="xref py py-class docutils literal"><span class="pre">BooleanField</span></tt></a>, but allows <tt class="docutils literal"><span class="pre">NULL</span></tt> as one of the options. </font><font id="293">Use this instead of a <a class="reference internal" href="fields.html#django.db.models.BooleanField" title="django.db.models.BooleanField"><tt class="xref py py-class docutils literal"><span class="pre">BooleanField</span></tt></a> with <tt class="docutils literal"><span class="pre">null=True</span></tt>. </font><font id="294">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.NullBooleanSelect" title="django.forms.NullBooleanSelect"><tt class="xref py py-class docutils literal"><span class="pre">NullBooleanSelect</span></tt></a>.</font></p>
</div>
<div class="section" id="s-positiveintegerfield">
<span id="positiveintegerfield"></span><h3><font id="613">PositiveIntegerField</font><a class="headerlink" href="fields.html#positiveintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.PositiveIntegerField">
<em class="property">class </em><tt class="descname">PositiveIntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.PositiveIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="295">Like an <a class="reference internal" href="fields.html#django.db.models.IntegerField" title="django.db.models.IntegerField"><tt class="xref py py-class docutils literal"><span class="pre">IntegerField</span></tt></a>, but must be either positive or zero (<tt class="docutils literal"><span class="pre">0</span></tt>). </font><font id="296">Values from <tt class="docutils literal"><span class="pre">0</span></tt> to <tt class="docutils literal"><span class="pre">2147483647</span></tt> are safe in all databases supported by Django. </font><font id="297">The value <tt class="docutils literal"><span class="pre">0</span></tt> is accepted for backward compatibility reasons.</font></p>
</div>
<div class="section" id="s-positivesmallintegerfield">
<span id="positivesmallintegerfield"></span><h3><font id="614">PositiveSmallIntegerField</font><a class="headerlink" href="fields.html#positivesmallintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.PositiveSmallIntegerField">
<em class="property">class </em><tt class="descname">PositiveSmallIntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.PositiveSmallIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="298">Like a <a class="reference internal" href="fields.html#django.db.models.PositiveIntegerField" title="django.db.models.PositiveIntegerField"><tt class="xref py py-class docutils literal"><span class="pre">PositiveIntegerField</span></tt></a>, but only allows values under a certain (database-dependent) point. </font><font id="299">Values from <tt class="docutils literal"><span class="pre">0</span></tt> to <tt class="docutils literal"><span class="pre">32767</span></tt> are safe in all databases supported by Django.</font></p>
</div>
<div class="section" id="s-slugfield">
<span id="slugfield"></span><h3><font id="615">SlugField</font><a class="headerlink" href="fields.html#slugfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.SlugField">
<em class="property">class </em><tt class="descname">SlugField</tt>(<span class="optional">[</span><em>max_length=50</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.SlugField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="300"><a class="reference internal" href="http://python.usyiyi.cn/django/glossary.html#term-slug"><em class="xref std std-term">Slug</em></a> is a newspaper term. </font><font id="301">A slug is a short label for something, containing only letters, numbers, underscores or hyphens. </font><font id="302">They’re generally used in URLs.</font></p>
<p><font id="303">Like a CharField, you can specify <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> (read the note about database portability and <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> in that section, too). </font><font id="304">If <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> is not specified, Django will use a default length of 50.</font></p>
<p><font id="305">Implies setting <a class="reference internal" href="fields.html#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><tt class="xref py py-attr docutils literal"><span class="pre">Field.db_index</span></tt></a> to <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
<p><font id="306">It is often useful to automatically prepopulate a SlugField based on the value of some other value. </font><font id="307">You can do this automatically in the admin using <a class="reference internal" href="../contrib/admin/index.html#django.contrib.admin.ModelAdmin.prepopulated_fields" title="django.contrib.admin.ModelAdmin.prepopulated_fields"><tt class="xref py py-attr docutils literal"><span class="pre">prepopulated_fields</span></tt></a>.</font></p>
</div>
<div class="section" id="s-smallintegerfield">
<span id="smallintegerfield"></span><h3><font id="616">SmallIntegerField</font><a class="headerlink" href="fields.html#smallintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.SmallIntegerField">
<em class="property">class </em><tt class="descname">SmallIntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.SmallIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="308">Like an <a class="reference internal" href="fields.html#django.db.models.IntegerField" title="django.db.models.IntegerField"><tt class="xref py py-class docutils literal"><span class="pre">IntegerField</span></tt></a>, but only allows values under a certain (database-dependent) point. </font><font id="309">Values from <tt class="docutils literal"><span class="pre">-32768</span></tt> to <tt class="docutils literal"><span class="pre">32767</span></tt> are safe in all databases supported by Django.</font></p>
</div>
<div class="section" id="s-textfield">
<span id="textfield"></span><h3><font id="617">TextField</font><a class="headerlink" href="fields.html#textfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.TextField">
<em class="property">class </em><tt class="descname">TextField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.TextField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="310">A large text field. </font><font id="311">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.Textarea" title="django.forms.Textarea"><tt class="xref py py-class docutils literal"><span class="pre">Textarea</span></tt></a>.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><font id="312">If you specify a <tt class="docutils literal"><span class="pre">max_length</span></tt> attribute, it will be reflected in the <a class="reference internal" href="../forms/widgets.html#django.forms.Textarea" title="django.forms.Textarea"><tt class="xref py py-class docutils literal"><span class="pre">Textarea</span></tt></a> widget of the auto-generated form field. </font><font id="313">However it is not enforced at the model or database level. </font><font id="314">Use a <a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> for that.</font></p>
</div>
<div class="admonition-mysql-users admonition">
<p class="first admonition-title"><font id="315">MySQL users</font></p>
<p class="last"><font id="316">If you are using this field with MySQLdb 1.2.1p2 and the <tt class="docutils literal"><span class="pre">utf8_bin</span></tt> collation (which is <em>not</em> the default), there are some issues to be aware of. </font><font id="317">Refer to the <a class="reference internal" href="../databases.html#mysql-collation"><em>MySQL database notes</em></a> for details.</font></p>
</div>
</div>
<div class="section" id="s-timefield">
<span id="timefield"></span><h3><font id="618">TimeField</font><a class="headerlink" href="fields.html#timefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.TimeField">
<em class="property">class </em><tt class="descname">TimeField</tt>(<span class="optional">[</span><em>auto_now=False</em>, <em>auto_now_add=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.TimeField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="318">A time, represented in Python by a <tt class="docutils literal"><span class="pre">datetime.time</span></tt> instance. </font><font id="319">Accepts the same auto-population options as <a class="reference internal" href="fields.html#django.db.models.DateField" title="django.db.models.DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a>.</font></p>
<p><font id="320">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>. </font><font id="321">The admin adds some JavaScript shortcuts.</font></p>
</div>
<div class="section" id="s-urlfield">
<span id="urlfield"></span><h3><font id="619">URLField</font><a class="headerlink" href="fields.html#urlfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.URLField">
<em class="property">class </em><tt class="descname">URLField</tt>(<span class="optional">[</span><em>max_length=200</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.URLField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="322">A <a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> for a URL.</font></p>
<p><font id="323">The default form widget for this field is a <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</font></p>
<p><font id="324">Like all <a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> subclasses, <a class="reference internal" href="fields.html#django.db.models.URLField" title="django.db.models.URLField"><tt class="xref py py-class docutils literal"><span class="pre">URLField</span></tt></a> takes the optional <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> argument. </font><font id="325">If you don’t specify <a class="reference internal" href="fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a>, a default of 200 is used.</font></p>
</div>
<div class="section" id="s-uuidfield">
<span id="uuidfield"></span><h3><font id="620">UUIDField</font><a class="headerlink" href="fields.html#uuidfield" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<dl class="class">
<dt id="django.db.models.UUIDField">
<em class="property">class </em><tt class="descname">UUIDField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.UUIDField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="326">A field for storing universally unique identifiers. </font><font id="327">Uses Python’s <a class="reference external" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">UUID</span></tt></a> class. </font><font id="328">When used on PostgreSQL, this stores in a <tt class="docutils literal"><span class="pre">uuid</span></tt> datatype, otherwise in a <tt class="docutils literal"><span class="pre">char(32)</span></tt>.</font></p>
<p><font id="329">Universally unique identifiers are a good alternative to <a class="reference internal" href="fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><tt class="xref py py-class docutils literal"><span class="pre">AutoField</span></tt></a> for <a class="reference internal" href="fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><tt class="xref py py-attr docutils literal"><span class="pre">primary_key</span></tt></a>. </font><font id="330">The database will not generate the UUID for you, so it is recommended to use <a class="reference internal" href="fields.html#django.db.models.Field.default" title="django.db.models.Field.default"><tt class="xref py py-attr docutils literal"><span class="pre">default</span></tt></a>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">MyUUIDModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="c"># other fields</span>
</pre></div>
</div>
<p><font id="331">Note that a callable (with the parentheses omitted) is passed to <tt class="docutils literal"><span class="pre">default</span></tt>, not an instance of <tt class="docutils literal"><span class="pre">UUID</span></tt>.</font></p>
</div>
</div>
<div class="section" id="s-module-django.db.models.fields.related">
<span id="s-relationship-fields"></span><span id="module-django.db.models.fields.related"></span><span id="relationship-fields"></span><h2><font id="573">Relationship fields</font><a class="headerlink" href="fields.html#module-django.db.models.fields.related" title="Permalink to this headline">¶</a></h2>
<p><font id="332">Django同样定义了一系列的字段来描述数据库之间的关联。</font></p>
<div class="section" id="s-foreignkey">
<span id="s-ref-foreignkey"></span><span id="foreignkey"></span><span id="ref-foreignkey"></span><h3><font id="621">ForeignKey</font><a class="headerlink" href="fields.html#foreignkey" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.ForeignKey">
<em class="property">class </em><tt class="descname">ForeignKey</tt>(<em>othermodel</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.ForeignKey" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="333">多对一关系. </font><font id="334">需要一个位置参数：与该模型关联的类.</font></p>
<p id="recursive-relationships"><font id="335">To create a recursive relationship – an object that has a many-to-one relationship with itself – use <tt class="docutils literal"><span class="pre">models.</span></tt></font><font id="336">ForeignKey('self').</font></p>
<p id="lazy-relationships"><font id="337">如果你需要对一个还没有被定义的模型(model)创建关系, 你可以在创建关系时使用该模型的名字, 而不是该模型的对象本身:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">'Manufacturer'</span><span class="p">)</span>
    <span class="c"># ...</span>

<span class="k">class</span> <span class="nc">Manufacturer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c"># ...</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><font id="338">引用在其他的应用中定义的模型, 你可以用完整的标签名来特别地指定该模型. </font><font id="339">例如, 如果上面提到的<tt class="docutils literal"><span class="pre">Manufacturer</span></tt> 模型是在一个名为 <tt class="docutils literal"><span class="pre">production</span></tt>应用中定义的, 你就应该这样使用它:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">'production.Manufacturer'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="340">当你有两个相互依赖的应用的时候，这个简短的参考就会很有帮助.</font></p>
<p><font id="341">数据库索引会通过 <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>自动建立. </font><font id="342">你可以通过设置 <a class="reference internal" href="fields.html#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><tt class="xref py py-attr docutils literal"><span class="pre">db_index</span></tt></a> 值为 <tt class="docutils literal"><span class="pre">False</span></tt>来取消. </font><font id="343">You may want to avoid the overhead of an index if you are creating a foreign key for consistency rather than joins, or if you will be creating an alternative index like a partial or multiple column index.</font></p>
<div class="admonition warning">
<p class="first admonition-title"><font id="344">Warning</font></p>
<p class="last"><font id="345">It is not recommended to have a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> from an app without migrations to an app with migrations. </font><font id="346">See the <a class="reference internal" href="../../topics/migrations.html#unmigrated-dependencies"><em>dependencies documentation</em></a> for more details.</font></p>
</div>
<div class="section" id="s-database-representation">
<span id="database-representation"></span><h4><font id="632">Database Representation</font><a class="headerlink" href="fields.html#database-representation" title="Permalink to this headline">¶</a></h4>
<p><font id="347">在后端, Django 会在字段名上添加 <tt class="docutils literal"><span class="pre">"_id"</span></tt> 用于创建数据库中的列名. </font><font id="737">在上面的例子中, <tt class="docutils literal"><span class="pre">Car</span></tt> 模型的数据库表将会拥有一个<tt class="docutils literal"><span class="pre">manufacturer_id</span></tt> 列. </font><font id="738">(你可以改变它通过指定 <a class="reference internal" href="fields.html#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><tt class="xref py py-attr docutils literal"><span class="pre">db_column</span></tt></a>) </font><font id="739">然而, 你的代码不应该通过数据库的列名来处理, 除非你需要定制SQL. </font><font id="740">你将会通过你的模型的字段名来处理.</font></p>
</div>
<div class="section" id="s-arguments">
<span id="s-foreign-key-arguments"></span><span id="arguments"></span><span id="foreign-key-arguments"></span><h4><font id="633">Arguments</font><a class="headerlink" href="fields.html#arguments" title="Permalink to this headline">¶</a></h4>
<p><font id="348"><a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 接受额外的参数集 – 全都是可选的 – 定义了关系如果工作的细节.</font></p>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.limit_choices_to">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">limit_choices_to</tt><a class="headerlink" href="fields.html#django.db.models.ForeignKey.limit_choices_to" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="349">当这个字段用于 &nbsp;<tt class="docutils literal"><span class="pre">ModelForm</span></tt>或者是admin(默认的,所有的queryset中的对象都可以使用choice )的时候，为这个字段设置一个可用choices的限制 . </font><font id="350">Either a dictionary, a <a class="reference internal" href="querysets.html#django.db.models.Q" title="django.db.models.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span></tt></a> object, or a callable returning a dictionary or <a class="reference internal" href="querysets.html#django.db.models.Q" title="django.db.models.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span></tt></a> object can be used.</font></p>
<p><font id="351">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">staff_member</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">limit_choices_to</span><span class="o">=</span><span class="p">{</span><span class="s">'is_staff'</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
</pre></div>
</div>
<p><font id="352">causes the corresponding field on the <tt class="docutils literal"><span class="pre">ModelForm</span></tt> to list only <tt class="docutils literal"><span class="pre">Users</span></tt> that have <tt class="docutils literal"><span class="pre">is_staff=True</span></tt>. </font><font id="353">This may be helpful in the Django admin.</font></p>
<p><font id="354">The callable form can be helpful, for instance, when used in conjunction with the Python <tt class="docutils literal"><span class="pre">datetime</span></tt> module to limit selections by date range. </font><font id="355">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">limit_pub_date_choices</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">'pub_date__lte'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()}</span>

<span class="n">limit_choices_to</span> <span class="o">=</span> <span class="n">limit_pub_date_choices</span>
</pre></div>
</div>
<p><font id="356">If <tt class="docutils literal"><span class="pre">limit_choices_to</span></tt> is or returns a <a class="reference internal" href="querysets.html#django.db.models.Q" title="django.db.models.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span> <span class="pre">object</span></tt></a>, which is useful for <a class="reference internal" href="../../topics/db/queries.html#complex-lookups-with-q"><em>complex queries</em></a>, then it will only have an effect on the choices available in the admin when the field is not listed in <a class="reference internal" href="../contrib/admin/index.html#django.contrib.admin.ModelAdmin.raw_id_fields" title="django.contrib.admin.ModelAdmin.raw_id_fields"><tt class="xref py py-attr docutils literal"><span class="pre">raw_id_fields</span></tt></a> in the <tt class="docutils literal"><span class="pre">ModelAdmin</span></tt> for the model.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><font id="357">Previous versions of Django do not allow passing a callable as a value for <tt class="docutils literal"><span class="pre">limit_choices_to</span></tt>.</font></p>
</div>
<div class="admonition note">
<p class="first admonition-title"><font id="358">Note</font></p>
<p class="last"><font id="359">If a callable is used for <tt class="docutils literal"><span class="pre">limit_choices_to</span></tt>, it will be invoked every time a new form is instantiated. </font><font id="360">It may also be invoked when a model is validated, for example by management commands or the admin. </font><font id="361">The admin constructs querysets to validate its form inputs in various edge cases multiple times, so there is a possibility your callable may be invoked several times.</font></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.related_name">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">related_name</tt><a class="headerlink" href="fields.html#django.db.models.ForeignKey.related_name" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="362">The name to use for the relation from the related object back to this one. </font><font id="363">It’s also the default value for <a class="reference internal" href="fields.html#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><tt class="xref py py-attr docutils literal"><span class="pre">related_query_name</span></tt></a> (the name to use for the reverse filter name from the target model). </font><font id="364">See the <a class="reference internal" href="../../topics/db/queries.html#backwards-related-objects"><em>related objects documentation</em></a> for a full explanation and example. </font><font id="365">Note that you must set this value when defining relations on <a class="reference internal" href="../../topics/db/models.html#abstract-base-classes"><em>abstract models</em></a>; </font><font id="366">and when you do so <a class="reference internal" href="../../topics/db/models.html#abstract-related-name"><em>some special syntax</em></a> is available.</font></p>
<p><font id="367">If you’d prefer Django not to create a backwards relation, set <tt class="docutils literal"><span class="pre">related_name</span></tt> to <tt class="docutils literal"><span class="pre">'+'</span></tt> or end it with <tt class="docutils literal"><span class="pre">'+'</span></tt>. </font><font id="368">For example, this will ensure that the <tt class="docutils literal"><span class="pre">User</span></tt> model won’t have a backwards relation to this model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">'+'</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.related_query_name">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">related_query_name</tt><a class="headerlink" href="fields.html#django.db.models.ForeignKey.related_query_name" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="369">The name to use for the reverse filter name from the target model. </font><font id="370">Defaults to the value of <a class="reference internal" href="fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><tt class="xref py py-attr docutils literal"><span class="pre">related_name</span></tt></a> if it is set, otherwise it defaults to the name of the model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Declare the ForeignKey with related_query_name</span>
<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">article</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Article</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">"tags"</span><span class="p">,</span> <span class="n">related_query_name</span><span class="o">=</span><span class="s">"tag"</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>

<span class="c"># That's now the name of the reverse filter</span>
<span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">tag__name</span><span class="o">=</span><span class="s">"important"</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.to_field">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">to_field</tt><a class="headerlink" href="fields.html#django.db.models.ForeignKey.to_field" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="371">The field on the related object that the relation is to. </font><font id="372">By default, Django uses the primary key of the related object.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.db_constraint">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">db_constraint</tt><a class="headerlink" href="fields.html#django.db.models.ForeignKey.db_constraint" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="373">Controls whether or not a constraint should be created in the database for this foreign key. </font><font id="374">The default is <tt class="docutils literal"><span class="pre">True</span></tt>, and that’s almost certainly what you want; </font><font id="375">setting this to <tt class="docutils literal"><span class="pre">False</span></tt> can be very bad for data integrity. </font><font id="376">That said, here are some scenarios where you might want to do this:</font></p>
<ul class="simple">
<li><font id="644">You have legacy data that is not valid.</font></li>
<li><font id="645">You’re sharding your database.</font></li>
</ul>
<p><font id="377">If this is set to <tt class="docutils literal"><span class="pre">False</span></tt>, accessing a related object that doesn’t exist will raise its <tt class="docutils literal"><span class="pre">DoesNotExist</span></tt> exception.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.on_delete">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">on_delete</tt><a class="headerlink" href="fields.html#django.db.models.ForeignKey.on_delete" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="378">When an object referenced by a <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> is deleted, Django by default emulates the behavior of the SQL constraint <tt class="docutils literal"><span class="pre">ON</span> <span class="pre">DELETE</span> <span class="pre">CASCADE</span></tt> and also deletes the object containing the <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>. </font><font id="379">This behavior can be overridden by specifying the <a class="reference internal" href="fields.html#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><tt class="xref py py-attr docutils literal"><span class="pre">on_delete</span></tt></a> argument. </font><font id="380">For example, if you have a nullable <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> and you want it to be set null when the referenced object is deleted:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<p><font id="381">The possible values for <a class="reference internal" href="fields.html#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><tt class="xref py py-attr docutils literal"><span class="pre">on_delete</span></tt></a> are found in <a class="reference internal" href="../../topics/db/models.html#module-django.db.models" title="django.db.models"><tt class="xref py py-mod docutils literal"><span class="pre">django.db.models</span></tt></a>:</font></p>
<ul>
<li><dl class="attribute">
<dt id="django.db.models.CASCADE">
<tt class="descname">CASCADE</tt><a class="headerlink" href="fields.html#django.db.models.CASCADE" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="382">Cascade deletes; </font><font id="383">the default.</font></p>
</dd></dl>
</li>
<li><dl class="attribute">
<dt id="django.db.models.PROTECT">
<tt class="descname">PROTECT</tt><a class="headerlink" href="fields.html#django.db.models.PROTECT" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="384">Prevent deletion of the referenced object by raising <a class="reference internal" href="../exceptions.html#django.db.models.ProtectedError" title="django.db.models.ProtectedError"><tt class="xref py py-exc docutils literal"><span class="pre">ProtectedError</span></tt></a>, a subclass of <a class="reference internal" href="../exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><tt class="xref py py-exc docutils literal"><span class="pre">django.db.IntegrityError</span></tt></a>.</font></p>
</dd></dl>
</li>
<li><dl class="attribute">
<dt id="django.db.models.SET_NULL">
<tt class="descname">SET_NULL</tt><a class="headerlink" href="fields.html#django.db.models.SET_NULL" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="385">Set the <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> null; </font><font id="386">this is only possible if <a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> is <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</dd></dl>
</li>
<li><dl class="attribute">
<dt id="django.db.models.SET_DEFAULT">
<tt class="descname">SET_DEFAULT</tt><a class="headerlink" href="fields.html#django.db.models.SET_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="387">Set the <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> to its default value; </font><font id="388">a default for the <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> must be set.</font></p>
</dd></dl>
</li>
<li><dl class="function">
<dt id="django.db.models.SET">
<tt class="descname">SET</tt>()<a class="headerlink" href="fields.html#django.db.models.SET" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="389">Set the <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> to the value passed to <a class="reference internal" href="fields.html#django.db.models.SET" title="django.db.models.SET"><tt class="xref py py-func docutils literal"><span class="pre">SET()</span></tt></a>, or if a callable is passed in, the result of calling it. </font><font id="390">In most cases, passing a callable will be necessary to avoid executing queries at the time your models.py is imported:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">def</span> <span class="nf">get_sentinel_user</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">'deleted'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span>
                             <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET</span><span class="p">(</span><span class="n">get_sentinel_user</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>
</li>
<li><dl class="attribute">
<dt id="django.db.models.DO_NOTHING">
<tt class="descname">DO_NOTHING</tt><a class="headerlink" href="fields.html#django.db.models.DO_NOTHING" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="391">Take no action. </font><font id="392">If your database backend enforces referential integrity, this will cause an <a class="reference internal" href="../exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><tt class="xref py py-exc docutils literal"><span class="pre">IntegrityError</span></tt></a> unless you manually add an SQL <tt class="docutils literal"><span class="pre">ON</span> <span class="pre">DELETE</span></tt> constraint to the database field (perhaps using <a class="reference internal" href="../../howto/initial-data.html#initial-sql"><em>initial sql</em></a>).</font></p>
</dd></dl>
</li>
</ul>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.swappable">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">swappable</tt><a class="headerlink" href="fields.html#django.db.models.ForeignKey.swappable" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="393">Controls the migration framework’s reaction if this <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> is pointing at a swappable model. </font><font id="394">If it is <tt class="docutils literal"><span class="pre">True</span></tt> - the default - then if the <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> is pointing at a model which matches the current value of <tt class="docutils literal"><span class="pre">settings.</span></tt></font><font id="395">AUTH_USER_MODEL (or another swappable model setting) the relationship will be stored in the migration using a reference to the setting, not to the model directly.</font></p>
<p><font id="396">You only want to override this to be <tt class="docutils literal"><span class="pre">False</span></tt> if you are sure your model should always point towards the swapped-in model - for example, if it is a profile model designed specifically for your custom user model.</font></p>
<p><font id="397">Setting it to <tt class="docutils literal"><span class="pre">False</span></tt> does not mean you can reference a swappable model even if it is swapped out - <tt class="docutils literal"><span class="pre">False</span></tt> just means that the migrations made with this ForeignKey will always reference the exact model you specify (so it will fail hard if the user tries to run with a User model you don’t support, for example).</font></p>
<p><font id="398">If in doubt, leave it to its default of <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.allow_unsaved_instance_assignment">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">allow_unsaved_instance_assignment</tt><a class="headerlink" href="fields.html#django.db.models.ForeignKey.allow_unsaved_instance_assignment" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8:</span> <p><font id="399">This flag was added for backwards compatibility as older versions of Django always allowed assigning unsaved model instances.</font></p>
</div>
<p><font id="400">Django prevents unsaved model instances from being assigned to a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt> field to prevent accidental data loss (unsaved foreign keys are silently ignored when saving a model instance).</font></p>
<p><font id="401">If you require allowing the assignment of unsaved instances and aren’t concerned about the data loss possibility (e.g. you never save the objects to the database), you can disable this check by creating a subclass of the field class and setting its <tt class="docutils literal"><span class="pre">allow_unsaved_instance_assignment</span></tt> attribute to <tt class="docutils literal"><span class="pre">True</span></tt>. </font><font id="402">For example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UnsavedForeignKey</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">):</span>
    <span class="c"># A ForeignKey which can point to an unsaved object</span>
    <span class="n">allow_unsaved_instance_assignment</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">UnsavedForeignKey</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
</div>
</div>
<div class="section" id="s-manytomanyfield">
<span id="s-ref-manytomany"></span><span id="manytomanyfield"></span><span id="ref-manytomany"></span><h3><font id="622">ManyToManyField</font><a class="headerlink" href="fields.html#manytomanyfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.ManyToManyField">
<em class="property">class </em><tt class="descname">ManyToManyField</tt>(<em>othermodel</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.ManyToManyField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="403">A many-to-many relationship. </font><font id="404">Requires a positional argument: the class to which the model is related, which works exactly the same as it does for <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>, including <a class="reference internal" href="fields.html#recursive-relationships"><em>recursive</em></a> and <a class="reference internal" href="fields.html#lazy-relationships"><em>lazy</em></a> relationships.</font></p>
<p><font id="405">Related objects can be added, removed, or created with the field’s <a class="reference internal" href="relations.html#django.db.models.fields.related.RelatedManager" title="django.db.models.fields.related.RelatedManager"><tt class="xref py py-class docutils literal"><span class="pre">RelatedManager</span></tt></a>.</font></p>
<div class="admonition warning">
<p class="first admonition-title"><font id="406">Warning</font></p>
<p class="last"><font id="407">It is not recommended to have a <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> from an app without migrations to an app with migrations. </font><font id="408">See the <a class="reference internal" href="../../topics/migrations.html#unmigrated-dependencies"><em>dependencies documentation</em></a> for more details.</font></p>
</div>
<div class="section" id="s-id1">
<span id="id1"></span><h4><font id="634">Database Representation</font><a class="headerlink" href="fields.html#id1" title="Permalink to this headline">¶</a></h4>
<p><font id="409">Behind the scenes, Django creates an intermediary join table to represent the many-to-many relationship. </font><font id="410">By default, this table name is generated using the name of the many-to-many field and the name of the table for the model that contains it. </font><font id="411">Since some databases don’t support table names above a certain length, these table names will be automatically truncated to 64 characters and a uniqueness hash will be used. </font><font id="412">This means you might see table names like <tt class="docutils literal"><span class="pre">author_books_9cdf4</span></tt>; </font><font id="413">this is perfectly normal. </font><font id="414">You can manually provide the name of the join table using the <a class="reference internal" href="fields.html#django.db.models.ManyToManyField.db_table" title="django.db.models.ManyToManyField.db_table"><tt class="xref py py-attr docutils literal"><span class="pre">db_table</span></tt></a> option.</font></p>
</div>
<div class="section" id="s-manytomany-arguments">
<span id="s-id2"></span><span id="manytomany-arguments"></span><span id="id2"></span><h4><font id="635">Arguments</font><a class="headerlink" href="fields.html#manytomany-arguments" title="Permalink to this headline">¶</a></h4>
<p><font id="415"><a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> accepts an extra set of arguments – all optional – that control how the relationship functions.</font></p>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.related_name">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">related_name</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.related_name" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="416">Same as <a class="reference internal" href="fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><tt class="xref py py-attr docutils literal"><span class="pre">ForeignKey.related_name</span></tt></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.related_query_name">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">related_query_name</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.related_query_name" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="417">Same as <a class="reference internal" href="fields.html#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><tt class="xref py py-attr docutils literal"><span class="pre">ForeignKey.related_query_name</span></tt></a>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.limit_choices_to">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">limit_choices_to</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.limit_choices_to" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="418">Same as <a class="reference internal" href="fields.html#django.db.models.ForeignKey.limit_choices_to" title="django.db.models.ForeignKey.limit_choices_to"><tt class="xref py py-attr docutils literal"><span class="pre">ForeignKey.limit_choices_to</span></tt></a>.</font></p>
<p><font id="419"><tt class="docutils literal"><span class="pre">limit_choices_to</span></tt> has no effect when used on a <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> with a custom intermediate table specified using the <a class="reference internal" href="fields.html#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><tt class="xref py py-attr docutils literal"><span class="pre">through</span></tt></a> parameter.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.symmetrical">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">symmetrical</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.symmetrical" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="420">Only used in the definition of ManyToManyFields on self. </font><font id="421">Consider the following model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">friends</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s">"self"</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="422">When Django processes this model, it identifies that it has a <a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> on itself, and as a result, it doesn’t add a <tt class="docutils literal"><span class="pre">person_set</span></tt> attribute to the <tt class="docutils literal"><span class="pre">Person</span></tt> class. </font><font id="423">Instead, the <a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> is assumed to be symmetrical – that is, if I am your friend, then you are my friend.</font></p>
<p><font id="424">If you do not want symmetry in many-to-many relationships with <tt class="docutils literal"><span class="pre">self</span></tt>, set <a class="reference internal" href="fields.html#django.db.models.ManyToManyField.symmetrical" title="django.db.models.ManyToManyField.symmetrical"><tt class="xref py py-attr docutils literal"><span class="pre">symmetrical</span></tt></a> to <tt class="docutils literal"><span class="pre">False</span></tt>. </font><font id="425">This will force Django to add the descriptor for the reverse relationship, allowing <a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> relationships to be non-symmetrical.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.through">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">through</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.through" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="426">Django会自动创建一个表来管理多对多关系</font><font id="427">不过如果你希望手动指定中介表（&nbsp;intermediary table）的话，可以使用<a class="reference internal" href="fields.html#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><tt class="xref py py-attr docutils literal"><span class="pre">through</span></tt></a> 选项来指定你想要使用的中介表。</font></p>
<p><font id="428">The most common use for this option is when you want to associate <a class="reference internal" href="../../topics/db/models.html#intermediary-manytomany"><em>extra data with a many-to-many relationship</em></a>.</font></p>
<p><font id="429">If you don’t specify an explicit <tt class="docutils literal"><span class="pre">through</span></tt> model, there is still an implicit <tt class="docutils literal"><span class="pre">through</span></tt> model class you can use to directly access the table created to hold the association. </font><font id="430">It has three fields to link the models.</font></p>
<p><font id="431">If the source and target models differ, the following fields are generated:</font></p>
<ul class="simple">
<li><font id="646"><tt class="docutils literal"><span class="pre">id</span></tt>: the primary key of the relation.</font></li>
<li><font id="647"><tt class="docutils literal"><span class="pre">&lt;containing_model&gt;_id</span></tt>: the <tt class="docutils literal"><span class="pre">id</span></tt> of the model that declares the <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>.</font></li>
<li><font id="648"><tt class="docutils literal"><span class="pre">&lt;other_model&gt;_id</span></tt>: the <tt class="docutils literal"><span class="pre">id</span></tt> of the model that the <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> points to.</font></li>
</ul>
<p><font id="432">If the <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> points from and to the same model, the following fields are generated:</font></p>
<ul class="simple">
<li><font id="649"><tt class="docutils literal"><span class="pre">id</span></tt>: the primary key of the relation.</font></li>
<li><font id="650"><tt class="docutils literal"><span class="pre">from_&lt;model&gt;_id</span></tt>: the <tt class="docutils literal"><span class="pre">id</span></tt> of the instance which points at the model (i.e. the source instance).</font></li>
<li><font id="651"><tt class="docutils literal"><span class="pre">to_&lt;model&gt;_id</span></tt>: the <tt class="docutils literal"><span class="pre">id</span></tt> of the instance to which the relationship points (i.e. the target model instance).</font></li>
</ul>
<p><font id="433">This class can be used to query associated records for a given model instance like a normal model.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.through_fields">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">through_fields</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.through_fields" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="434">Only used when a custom intermediary model is specified. </font><font id="435">Django will normally determine which fields of the intermediary model to use in order to establish a many-to-many relationship automatically. </font><font id="436">However, consider the following models:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="s">'Membership'</span><span class="p">,</span> <span class="n">through_fields</span><span class="o">=</span><span class="p">(</span><span class="s">'group'</span><span class="p">,</span> <span class="s">'person'</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">Membership</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span>
    <span class="n">person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>
    <span class="n">inviter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">"membership_invites"</span><span class="p">)</span>
    <span class="n">invite_reason</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="437"><tt class="docutils literal"><span class="pre">Membership</span></tt> has <em>two</em> foreign keys to <tt class="docutils literal"><span class="pre">Person</span></tt> (<tt class="docutils literal"><span class="pre">person</span></tt> and <tt class="docutils literal"><span class="pre">inviter</span></tt>), which makes the relationship ambiguous and Django can’t know which one to use. </font><font id="438">In this case, you must explicitly specify which foreign keys Django should use using <tt class="docutils literal"><span class="pre">through_fields</span></tt>, as in the example above.</font></p>
<p><font id="439"><tt class="docutils literal"><span class="pre">through_fields</span></tt> accepts a 2-tuple <tt class="docutils literal"><span class="pre">('field1',</span> <span class="pre">'field2')</span></tt>, where <tt class="docutils literal"><span class="pre">field1</span></tt> is the name of the foreign key to the model the <a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> is defined on (<tt class="docutils literal"><span class="pre">group</span></tt> in this case), and <tt class="docutils literal"><span class="pre">field2</span></tt> the name of the foreign key to the target model (<tt class="docutils literal"><span class="pre">person</span></tt> in this case).</font></p>
<p><font id="440">When you have more than one foreign key on an intermediary model to any (or even both) of the models participating in a many-to-many relationship, you <em>must</em> specify <tt class="docutils literal"><span class="pre">through_fields</span></tt>. </font><font id="441">This also applies to <a class="reference internal" href="fields.html#recursive-relationships"><em>recursive relationships</em></a> when an intermediary model is used and there are more than two foreign keys to the model, or you want to explicitly specify which two Django should use.</font></p>
<p><font id="442">Recursive relationships using an intermediary model are always defined as non-symmetrical – that is, with <a class="reference internal" href="fields.html#django.db.models.ManyToManyField.symmetrical" title="django.db.models.ManyToManyField.symmetrical"><tt class="xref py py-attr docutils literal"><span class="pre">symmetrical=False</span></tt></a> – therefore, there is the concept of a “source” and a “target”. </font><font id="443">In that case <tt class="docutils literal"><span class="pre">'field1'</span></tt> will be treated as the “source” of the relationship and <tt class="docutils literal"><span class="pre">'field2'</span></tt> as the “target”.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.db_table">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">db_table</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.db_table" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="444">The name of the table to create for storing the many-to-many data. </font><font id="445">If this is not provided, Django will assume a default name based upon the names of: the table for the model defining the relationship and the name of the field itself.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.db_constraint">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">db_constraint</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.db_constraint" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="446">Controls whether or not constraints should be created in the database for the foreign keys in the intermediary table. </font><font id="447">The default is <tt class="docutils literal"><span class="pre">True</span></tt>, and that’s almost certainly what you want; </font><font id="448">setting this to <tt class="docutils literal"><span class="pre">False</span></tt> can be very bad for data integrity. </font><font id="449">That said, here are some scenarios where you might want to do this:</font></p>
<ul class="simple">
<li><font id="652">You have legacy data that is not valid.</font></li>
<li><font id="653">You’re sharding your database.</font></li>
</ul>
<p><font id="450">It is an error to pass both <tt class="docutils literal"><span class="pre">db_constraint</span></tt> and <tt class="docutils literal"><span class="pre">through</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.swappable">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">swappable</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.swappable" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="451">Controls the migration framework’s reaction if this <a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> is pointing at a swappable model. </font><font id="452">If it is <tt class="docutils literal"><span class="pre">True</span></tt> - the default - then if the <a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> is pointing at a model which matches the current value of <tt class="docutils literal"><span class="pre">settings.</span></tt></font><font id="453">AUTH_USER_MODEL (or another swappable model setting) the relationship will be stored in the migration using a reference to the setting, not to the model directly.</font></p>
<p><font id="454">You only want to override this to be <tt class="docutils literal"><span class="pre">False</span></tt> if you are sure your model should always point towards the swapped-in model - for example, if it is a profile model designed specifically for your custom user model.</font></p>
<p><font id="455">If in doubt, leave it to its default of <tt class="docutils literal"><span class="pre">True</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.allow_unsaved_instance_assignment">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">allow_unsaved_instance_assignment</tt><a class="headerlink" href="fields.html#django.db.models.ManyToManyField.allow_unsaved_instance_assignment" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="456">Works analogously to <a class="reference internal" href="fields.html#django.db.models.ForeignKey.allow_unsaved_instance_assignment" title="django.db.models.ForeignKey.allow_unsaved_instance_assignment"><tt class="xref py py-attr docutils literal"><span class="pre">ForeignKey.allow_unsaved_instance_assignment</span></tt></a>.</font></p>
</dd></dl>
<p><font id="457"><a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> does not support <a class="reference internal" href="fields.html#django.db.models.Field.validators" title="django.db.models.Field.validators"><tt class="xref py py-attr docutils literal"><span class="pre">validators</span></tt></a>.</font></p>
<p><font id="458"><a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> has no effect since there is no way to require a relationship at the database level.</font></p>
</div>
</div>
<div class="section" id="s-onetoonefield">
<span id="s-ref-onetoone"></span><span id="onetoonefield"></span><span id="ref-onetoone"></span><h3><font id="623">OneToOneField</font><a class="headerlink" href="fields.html#onetoonefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.OneToOneField">
<em class="property">class </em><tt class="descname">OneToOneField</tt>(<em>othermodel</em><span class="optional">[</span>, <em>parent_link=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="fields.html#django.db.models.OneToOneField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="459">A one-to-one relationship. </font><font id="460">Conceptually, this is similar to a <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> with <a class="reference internal" href="fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique=True</span></tt></a>, but the “reverse” side of the relation will directly return a single object.</font></p>
<p><font id="461">This is most useful as the primary key of a model which “extends” another model in some way; </font><font id="462"><a class="reference internal" href="../../topics/db/models.html#multi-table-inheritance"><em>Multi-table inheritance</em></a> is implemented by adding an implicit one-to-one relation from the child model to the parent model, for example.</font></p>
<p><font id="463">One positional argument is required: the class to which the model will be related. </font><font id="464">This works exactly the same as it does for <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>, including all the options regarding <a class="reference internal" href="fields.html#recursive-relationships"><em>recursive</em></a> and <a class="reference internal" href="fields.html#lazy-relationships"><em>lazy</em></a> relationships.</font></p>
<p><font id="465">If you do not specify the <a class="reference internal" href="fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><tt class="xref py py-attr docutils literal"><span class="pre">related_name</span></tt></a> argument for the <tt class="docutils literal"><span class="pre">OneToOneField</span></tt>, Django will use the lower-case name of the current model as default value.</font></p>
<p><font id="466">With the following example:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">MySpecialUser</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">)</span>
    <span class="n">supervisor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">'supervisor_of'</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="467">your resulting <tt class="docutils literal"><span class="pre">User</span></tt> model will have the following attributes:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s">'myspecialuser'</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s">'supervisor_of'</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p><font id="468">A <tt class="docutils literal"><span class="pre">DoesNotExist</span></tt> exception is raised when accessing the reverse relationship if an entry in the related table doesn’t exist. </font><font id="469">For example, if a user doesn’t have a supervisor designated by <tt class="docutils literal"><span class="pre">MySpecialUser</span></tt>:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">supervisor_of</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">DoesNotExist</span>: <span class="n">User matching query does not exist.</span>
</pre></div>
</div>
<p id="onetoone-arguments"><font id="470">Additionally, <tt class="docutils literal"><span class="pre">OneToOneField</span></tt> accepts all of the extra arguments accepted by <a class="reference internal" href="fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>, plus one extra argument:</font></p>
<dl class="attribute">
<dt id="django.db.models.OneToOneField.parent_link">
<tt class="descclassname">OneToOneField.</tt><tt class="descname">parent_link</tt><a class="headerlink" href="fields.html#django.db.models.OneToOneField.parent_link" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="471">When <tt class="docutils literal"><span class="pre">True</span></tt> and used in a model which inherits from another <a class="reference internal" href="http://python.usyiyi.cn/django/glossary.html#term-concrete-model"><em class="xref std std-term">concrete model</em></a>, indicates that this field should be used as the link back to the parent class, rather than the extra <tt class="docutils literal"><span class="pre">OneToOneField</span></tt> which would normally be implicitly created by subclassing.</font></p>
</dd></dl>
<p><font id="472">See <a class="reference internal" href="../../topics/db/examples/one_to_one.html"><em>One-to-one relationships</em></a> for usage examples of <tt class="docutils literal"><span class="pre">OneToOneField</span></tt>.</font></p>
</div>
</div>
<div class="section" id="s-field-api-reference">
<span id="field-api-reference"></span><h2><font id="574">Field API reference</font><a class="headerlink" href="fields.html#field-api-reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.db.models.Field">
<em class="property">class </em><tt class="descname">Field</tt><a class="headerlink" href="fields.html#django.db.models.Field" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="473"><tt class="docutils literal"><span class="pre">Field</span></tt> is an abstract class that represents a database table column. </font><font id="474">Django uses fields to create the database table (<a class="reference internal" href="fields.html#django.db.models.Field.db_type" title="django.db.models.Field.db_type"><tt class="xref py py-meth docutils literal"><span class="pre">db_type()</span></tt></a>), to map Python types to database (<a class="reference internal" href="fields.html#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_value()</span></tt></a>) and vice-versa (<a class="reference internal" href="fields.html#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><tt class="xref py py-meth docutils literal"><span class="pre">from_db_value()</span></tt></a>), and to apply <a class="reference internal" href="lookups.html"><em>Lookup API reference</em></a> (<a class="reference internal" href="fields.html#django.db.models.Field.get_prep_lookup" title="django.db.models.Field.get_prep_lookup"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_lookup()</span></tt></a>).</font></p>
<p><font id="475">A field is thus a fundamental piece in different Django APIs, notably, <a class="reference internal" href="instances.html#django.db.models.Model" title="django.db.models.Model"><tt class="xref py py-class docutils literal"><span class="pre">models</span></tt></a> and <a class="reference internal" href="querysets.html#django.db.models.query.QuerySet" title="django.db.models.query.QuerySet"><tt class="xref py py-class docutils literal"><span class="pre">querysets</span></tt></a>.</font></p>
<p><font id="476">In models, a field is instantiated as a class attribute and represents a particular table column, see <a class="reference internal" href="../../topics/db/models.html"><em>Models</em></a>. </font><font id="477">It has attributes such as <a class="reference internal" href="fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> and <a class="reference internal" href="fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique</span></tt></a>, and methods that Django uses to map the field value to database-specific values.</font></p>
<p><font id="478">A <tt class="docutils literal"><span class="pre">Field</span></tt> is a subclass of <a class="reference internal" href="lookups.html#django.db.models.lookups.RegisterLookupMixin" title="django.db.models.lookups.RegisterLookupMixin"><tt class="xref py py-class docutils literal"><span class="pre">RegisterLookupMixin</span></tt></a> and thus both <a class="reference internal" href="lookups.html#django.db.models.Transform" title="django.db.models.Transform"><tt class="xref py py-class docutils literal"><span class="pre">Transform</span></tt></a> and <a class="reference internal" href="lookups.html#django.db.models.Lookup" title="django.db.models.Lookup"><tt class="xref py py-class docutils literal"><span class="pre">Lookup</span></tt></a> can be registered on it to be used in <tt class="docutils literal"><span class="pre">QuerySet</span></tt>s (e.g. <tt class="docutils literal"><span class="pre">field_name__exact="foo"</span></tt>). </font><font id="741">All <a class="reference internal" href="querysets.html#field-lookups"><em>built-in lookups</em></a> are registered by default.</font></p>
<p><font id="479">All of Django’s built-in fields, such as <a class="reference internal" href="fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>, are particular implementations of <tt class="docutils literal"><span class="pre">Field</span></tt>. </font><font id="480">If you need a custom field, you can either subclass any of the built-in fields or write a <tt class="docutils literal"><span class="pre">Field</span></tt> from scratch. </font><font id="481">In either case, see <a class="reference internal" href="../../howto/custom-model-fields.html"><em>Writing custom model fields</em></a>.</font></p>
<dl class="attribute">
<dt id="django.db.models.Field.description">
<tt class="descname">description</tt><a class="headerlink" href="fields.html#django.db.models.Field.description" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="482">A verbose description of the field, e.g. for the <a class="reference internal" href="../contrib/admin/admindocs.html#module-django.contrib.admindocs" title="django.contrib.admindocs: Django's admin documentation generator."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admindocs</span></tt></a> application.</font></p>
<p><font id="483">The description can be of the form:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">description</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">"String (up to </span><span class="si">%(max_length)s</span><span class="s">)"</span><span class="p">)</span>
</pre></div>
</div>
<p><font id="484">where the arguments are interpolated from the field’s <tt class="docutils literal"><span class="pre">__dict__</span></tt>.</font></p>
</dd></dl>
<p><font id="485">To map a <tt class="docutils literal"><span class="pre">Field</span></tt> to a database-specific type, Django exposes two methods:</font></p>
<dl class="method">
<dt id="django.db.models.Field.get_internal_type">
<tt class="descname">get_internal_type</tt>()<a class="headerlink" href="fields.html#django.db.models.Field.get_internal_type" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="486">Returns a string naming this field for backend specific purposes. </font><font id="487">By default, it returns the class name.</font></p>
<p><font id="488">See <a class="reference internal" href="../../howto/custom-model-fields.html#emulating-built-in-field-types"><em>Emulating built-in field types</em></a> for usage in custom fields.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.db_type">
<tt class="descname">db_type</tt>(<em>connection</em>)<a class="headerlink" href="fields.html#django.db.models.Field.db_type" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="489">Returns the database column data type for the <a class="reference internal" href="fields.html#django.db.models.Field" title="django.db.models.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a>, taking into account the <tt class="docutils literal"><span class="pre">connection</span></tt>.</font></p>
<p><font id="490">See <a class="reference internal" href="../../howto/custom-model-fields.html#custom-database-types"><em>Custom database types</em></a> for usage in custom fields.</font></p>
</dd></dl>
<p><font id="491">There are three main situations where Django needs to interact with the database backend and fields:</font></p>
<ul class="simple">
<li><font id="654">when it queries the database (Python value -&gt; database backend value)</font></li>
<li><font id="655">when it loads data from the database (database backend value -&gt; Python value)</font></li>
<li><font id="656">when it saves to the database (Python value -&gt; database backend value)</font></li>
</ul>
<p><font id="492">When querying, <a class="reference internal" href="fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a> and <a class="reference internal" href="fields.html#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_value()</span></tt></a> are used:</font></p>
<dl class="method">
<dt id="django.db.models.Field.get_prep_value">
<tt class="descname">get_prep_value</tt>(<em>value</em>)<a class="headerlink" href="fields.html#django.db.models.Field.get_prep_value" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="493"><tt class="docutils literal"><span class="pre">value</span></tt> is the current value of the model’s attribute, and the method should return data in a format that has been prepared for use as a parameter in a query.</font></p>
<p><font id="494">See <a class="reference internal" href="../../howto/custom-model-fields.html#converting-python-objects-to-query-values"><em>Converting Python objects to query values</em></a> for usage.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.get_db_prep_value">
<tt class="descname">get_db_prep_value</tt>(<em>value</em>, <em>connection</em>, <em>prepared=False</em>)<a class="headerlink" href="fields.html#django.db.models.Field.get_db_prep_value" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="495">Converts <tt class="docutils literal"><span class="pre">value</span></tt> to a backend-specific value. </font><font id="496">By default it returns <tt class="docutils literal"><span class="pre">value</span></tt> if <tt class="docutils literal"><span class="pre">prepared=True</span></tt> and <a class="reference internal" href="fields.html#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_value()</span></tt></a> if is <tt class="docutils literal"><span class="pre">False</span></tt>.</font></p>
<p><font id="497">See <a class="reference internal" href="../../howto/custom-model-fields.html#converting-query-values-to-database-values"><em>Converting query values to database values</em></a> for usage.</font></p>
</dd></dl>
<p><font id="498">When loading data, <a class="reference internal" href="fields.html#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><tt class="xref py py-meth docutils literal"><span class="pre">from_db_value()</span></tt></a> is used:</font></p>
<dl class="method">
<dt id="django.db.models.Field.from_db_value">
<tt class="descname">from_db_value</tt>(<em>value</em>, <em>expression</em>, <em>connection</em>, <em>context</em>)<a class="headerlink" href="fields.html#django.db.models.Field.from_db_value" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="499">Converts a value as returned by the database to a Python object. </font><font id="500">It is the reverse of <a class="reference internal" href="fields.html#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_value()</span></tt></a>.</font></p>
<p><font id="501">This method is not used for most built-in fields as the database backend already returns the correct Python type, or the backend itself does the conversion.</font></p>
<p><font id="502">See <a class="reference internal" href="../../howto/custom-model-fields.html#converting-values-to-python-objects"><em>Converting values to Python objects</em></a> for usage.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="503">Note</font></p>
<p class="last"><font id="504">For performance reasons, <tt class="docutils literal"><span class="pre">from_db_value</span></tt> is not implemented as a no-op on fields which do not require it (all Django fields). </font><font id="505">Consequently you may not call <tt class="docutils literal"><span class="pre">super</span></tt> in your definition.</font></p>
</div>
</dd></dl>
<p><font id="506">When saving, <a class="reference internal" href="fields.html#django.db.models.Field.pre_save" title="django.db.models.Field.pre_save"><tt class="xref py py-meth docutils literal"><span class="pre">pre_save()</span></tt></a> and <a class="reference internal" href="fields.html#django.db.models.Field.get_db_prep_save" title="django.db.models.Field.get_db_prep_save"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_save()</span></tt></a> are used:</font></p>
<dl class="method">
<dt id="django.db.models.Field.get_db_prep_save">
<tt class="descname">get_db_prep_save</tt>(<em>value</em>, <em>connection</em>)<a class="headerlink" href="fields.html#django.db.models.Field.get_db_prep_save" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="507">Same as the <a class="reference internal" href="fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>, but called when the field value must be <em>saved</em> to the database. </font><font id="508">By default returns <a class="reference internal" href="fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.pre_save">
<tt class="descname">pre_save</tt>(<em>model_instance</em>, <em>add</em>)<a class="headerlink" href="fields.html#django.db.models.Field.pre_save" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="509">Method called prior to <a class="reference internal" href="fields.html#django.db.models.Field.get_db_prep_save" title="django.db.models.Field.get_db_prep_save"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_save()</span></tt></a> to prepare the value before being saved (e.g. for <a class="reference internal" href="fields.html#django.db.models.DateField.auto_now" title="django.db.models.DateField.auto_now"><tt class="xref py py-attr docutils literal"><span class="pre">DateField.auto_now</span></tt></a>).</font></p>
<p><font id="510"><tt class="docutils literal"><span class="pre">model_instance</span></tt> is the instance this field belongs to and <tt class="docutils literal"><span class="pre">add</span></tt> is whether the instance is being saved to the database for the first time.</font></p>
<p><font id="511">It should return the value of the appropriate attribute from <tt class="docutils literal"><span class="pre">model_instance</span></tt> for this field. </font><font id="512">The attribute name is in <tt class="docutils literal"><span class="pre">self.attname</span></tt> (this is set up by <a class="reference internal" href="fields.html#django.db.models.Field" title="django.db.models.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a>).</font></p>
<p><font id="513">See <a class="reference internal" href="../../howto/custom-model-fields.html#preprocessing-values-before-saving"><em>Preprocessing values before saving</em></a> for usage.</font></p>
</dd></dl>
<p><font id="514">When a lookup is used on a field, the value may need to be “prepared”. </font><font id="515">Django exposes two methods for this:</font></p>
<dl class="method">
<dt id="django.db.models.Field.get_prep_lookup">
<tt class="descname">get_prep_lookup</tt>(<em>lookup_type</em>, <em>value</em>)<a class="headerlink" href="fields.html#django.db.models.Field.get_prep_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="516">Prepares <tt class="docutils literal"><span class="pre">value</span></tt> to the database prior to be used in a lookup. </font><font id="742">The <tt class="docutils literal"><span class="pre">lookup_type</span></tt> will be one of the valid Django filter lookups: <tt class="docutils literal"><span class="pre">"exact"</span></tt>, <tt class="docutils literal"><span class="pre">"iexact"</span></tt>, <tt class="docutils literal"><span class="pre">"contains"</span></tt>, <tt class="docutils literal"><span class="pre">"icontains"</span></tt>, <tt class="docutils literal"><span class="pre">"gt"</span></tt>, <tt class="docutils literal"><span class="pre">"gte"</span></tt>, <tt class="docutils literal"><span class="pre">"lt"</span></tt>, <tt class="docutils literal"><span class="pre">"lte"</span></tt>, <tt class="docutils literal"><span class="pre">"in"</span></tt>, <tt class="docutils literal"><span class="pre">"startswith"</span></tt>, <tt class="docutils literal"><span class="pre">"istartswith"</span></tt>, <tt class="docutils literal"><span class="pre">"endswith"</span></tt>, <tt class="docutils literal"><span class="pre">"iendswith"</span></tt>, <tt class="docutils literal"><span class="pre">"range"</span></tt>, <tt class="docutils literal"><span class="pre">"year"</span></tt>, <tt class="docutils literal"><span class="pre">"month"</span></tt>, <tt class="docutils literal"><span class="pre">"day"</span></tt>, <tt class="docutils literal"><span class="pre">"isnull"</span></tt>, <tt class="docutils literal"><span class="pre">"search"</span></tt>, <tt class="docutils literal"><span class="pre">"regex"</span></tt>, and <tt class="docutils literal"><span class="pre">"iregex"</span></tt>.</font></p>
<div class="versionadded">
<span class="title"><font id="743">New in Django 1.7.</font></span> </div>
<p><font id="517">If you are using <a class="reference internal" href="lookups.html"><em>Custom lookups</em></a> the <tt class="docutils literal"><span class="pre">lookup_type</span></tt> can be any <tt class="docutils literal"><span class="pre">lookup_name</span></tt> registered in the field.</font></p>
<p><font id="518">See <a class="reference internal" href="../../howto/custom-model-fields.html#preparing-values-for-use-in-database-lookups"><em>Preparing values for use in database lookups</em></a> for usage.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.get_db_prep_lookup">
<tt class="descname">get_db_prep_lookup</tt>(<em>lookup_type</em>, <em>value</em>, <em>connection</em>, <em>prepared=False</em>)<a class="headerlink" href="fields.html#django.db.models.Field.get_db_prep_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="519">Similar to <a class="reference internal" href="fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>, but for performing a lookup.</font></p>
<p><font id="520">As with <a class="reference internal" href="fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>, the specific connection that will be used for the query is passed as <tt class="docutils literal"><span class="pre">connection</span></tt>. </font><font id="521">In addition, <tt class="docutils literal"><span class="pre">prepared</span></tt> describes whether the value has already been prepared with <a class="reference internal" href="fields.html#django.db.models.Field.get_prep_lookup" title="django.db.models.Field.get_prep_lookup"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_lookup()</span></tt></a>.</font></p>
</dd></dl>
<p><font id="522">Fields often receive their values as a different type, either from serialization or from forms.</font></p>
<dl class="method">
<dt id="django.db.models.Field.to_python">
<tt class="descname">to_python</tt>(<em>value</em>)<a class="headerlink" href="fields.html#django.db.models.Field.to_python" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="523">Converts the value into the correct Python object. </font><font id="524">It acts as the reverse of <a class="reference internal" href="fields.html#django.db.models.Field.value_to_string" title="django.db.models.Field.value_to_string"><tt class="xref py py-meth docutils literal"><span class="pre">value_to_string()</span></tt></a>, and is also called in <a class="reference internal" href="instances.html#django.db.models.Model.clean" title="django.db.models.Model.clean"><tt class="xref py py-meth docutils literal"><span class="pre">clean()</span></tt></a>.</font></p>
<p><font id="525">See <a class="reference internal" href="../../howto/custom-model-fields.html#converting-values-to-python-objects"><em>Converting values to Python objects</em></a> for usage.</font></p>
</dd></dl>
<p><font id="526">Besides saving to the database, the field also needs to know how to serialize its value:</font></p>
<dl class="method">
<dt id="django.db.models.Field.value_to_string">
<tt class="descname">value_to_string</tt>(<em>obj</em>)<a class="headerlink" href="fields.html#django.db.models.Field.value_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="527">Converts <tt class="docutils literal"><span class="pre">obj</span></tt> to a string. </font><font id="528">Used to serialize the value of the field.</font></p>
<p><font id="529">See <a class="reference internal" href="../../howto/custom-model-fields.html#converting-model-field-to-serialization"><em>Converting field data for serialization</em></a> for usage.</font></p>
</dd></dl>
<p><font id="530">When using <a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">model</span> <span class="pre">forms</span></tt></a>, the <tt class="docutils literal"><span class="pre">Field</span></tt> needs to know which form field it should be represented by:</font></p>
<dl class="method">
<dt id="django.db.models.Field.formfield">
<tt class="descname">formfield</tt>(<em>form_class=None</em>, <em>choices_form_class=None</em>, <em>**kwargs</em>)<a class="headerlink" href="fields.html#django.db.models.Field.formfield" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="531">Returns the default <a class="reference internal" href="../forms/fields.html#django.forms.Field" title="django.forms.Field"><tt class="xref py py-class docutils literal"><span class="pre">django.forms.Field</span></tt></a> of this field for <a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a>.</font></p>
<p><font id="532">By default, if both <tt class="docutils literal"><span class="pre">form_class</span></tt> and <tt class="docutils literal"><span class="pre">choices_form_class</span></tt> are <tt class="docutils literal"><span class="pre">None</span></tt>, it uses <a class="reference internal" href="../forms/fields.html#django.forms.CharField" title="django.forms.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>; </font><font id="533">if <tt class="docutils literal"><span class="pre">choices_form_class</span></tt> is given, it returns <a class="reference internal" href="../forms/fields.html#django.forms.TypedChoiceField" title="django.forms.TypedChoiceField"><tt class="xref py py-class docutils literal"><span class="pre">TypedChoiceField</span></tt></a>.</font></p>
<p><font id="534">See <a class="reference internal" href="../../howto/custom-model-fields.html#specifying-form-field-for-model-field"><em>Specifying the form field for a model field</em></a> for usage.</font></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.deconstruct">
<tt class="descname">deconstruct</tt>()<a class="headerlink" href="fields.html#django.db.models.Field.deconstruct" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><font id="535">Returns a 4-tuple with enough information to recreate the field:</font></p>
<ol class="arabic simple">
<li><font id="657">The name of the field on the model.</font></li>
<li><font id="658">The import path of the field (e.g. <tt class="docutils literal"><span class="pre">"django.db.models.IntegerField"</span></tt>). </font><font id="744">This should be the most portable version, so less specific may be better.</font></li>
<li><font id="659">A list of positional arguments.</font></li>
<li><font id="660">A dict of keyword arguments.</font></li>
</ol>
<p><font id="536">This method must be added to fields prior to 1.7 to migrate its data using <a class="reference internal" href="../../topics/migrations.html"><em>Migrations</em></a>.</font></p>
</dd></dl>
</dd></dl>
</div>
</div>
<div class="section" id="s-field-attribute-reference">
<span id="s-model-field-attributes"></span><span id="field-attribute-reference"></span><span id="model-field-attributes"></span><h1><font id="570">Field attribute reference</font><a class="headerlink" href="fields.html#field-attribute-reference" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="537">Every <tt class="docutils literal"><span class="pre">Field</span></tt> instance contains several attributes that allow introspecting its behavior. </font><font id="538">Use these attributes instead of <tt class="docutils literal"><span class="pre">isinstance</span></tt> checks when you need to write code that depends on a field’s functionality. </font><font id="539">These attributes can be used together with the <a class="reference internal" href="meta.html#model-meta-field-api"><em>Model._meta API</em></a> to narrow down a search for specific field types. </font><font id="540">Custom model fields should implement these flags.</font></p>
<div class="section" id="s-attributes-for-fields">
<span id="attributes-for-fields"></span><h2><font id="575">Attributes for fields</font><a class="headerlink" href="fields.html#attributes-for-fields" title="Permalink to this headline">¶</a></h2>
<dl class="attribute">
<dt id="django.db.models.Field.auto_created">
<tt class="descclassname">Field.</tt><tt class="descname">auto_created</tt><a class="headerlink" href="fields.html#django.db.models.Field.auto_created" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="541">Boolean flag that indicates if the field was automatically created, such as the <tt class="docutils literal"><span class="pre">OneToOneField</span></tt> used by model inheritance.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.concrete">
<tt class="descclassname">Field.</tt><tt class="descname">concrete</tt><a class="headerlink" href="fields.html#django.db.models.Field.concrete" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="542">Boolean flag that indicates if the field has a database column associated with it.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.hidden">
<tt class="descclassname">Field.</tt><tt class="descname">hidden</tt><a class="headerlink" href="fields.html#django.db.models.Field.hidden" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="543">Boolean flag that indicates if a field is used to back another non-hidden field’s functionality (e.g. the <tt class="docutils literal"><span class="pre">content_type</span></tt> and <tt class="docutils literal"><span class="pre">object_id</span></tt> fields that make up a <tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt>). </font><font id="544">The <tt class="docutils literal"><span class="pre">hidden</span></tt> flag is used to distinguish what constitutes the public subset of fields on the model from all the fields on the model.</font></p>
<div class="admonition note">
<p class="first admonition-title"><font id="545">Note</font></p>
<p class="last"><font id="546"><a class="reference internal" href="meta.html#django.db.models.options.Options.get_fields" title="django.db.models.options.Options.get_fields"><tt class="xref py py-meth docutils literal"><span class="pre">Options.get_fields()</span></tt></a> excludes hidden fields by default. </font><font id="547">Pass in <tt class="docutils literal"><span class="pre">include_hidden=True</span></tt> to return hidden fields in the results.</font></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.is_relation">
<tt class="descclassname">Field.</tt><tt class="descname">is_relation</tt><a class="headerlink" href="fields.html#django.db.models.Field.is_relation" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="548">Boolean flag that indicates if a field contains references to one or more other models for its functionality (e.g. <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>, <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>, <tt class="docutils literal"><span class="pre">OneToOneField</span></tt>, etc.).</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.model">
<tt class="descclassname">Field.</tt><tt class="descname">model</tt><a class="headerlink" href="fields.html#django.db.models.Field.model" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="549">Returns the model on which the field is defined. </font><font id="550">If a field is defined on a superclass of a model, <tt class="docutils literal"><span class="pre">model</span></tt> will refer to the superclass, not the class of the instance.</font></p>
</dd></dl>
</div>
<div class="section" id="s-attributes-for-fields-with-relations">
<span id="attributes-for-fields-with-relations"></span><h2><font id="576">Attributes for fields with relations</font><a class="headerlink" href="fields.html#attributes-for-fields-with-relations" title="Permalink to this headline">¶</a></h2>
<p><font id="551">These attributes are used to query for the cardinality and other details of a relation. </font><font id="552">These attribute are present on all fields; </font><font id="553">however, they will only have boolean values (rather than <tt class="docutils literal"><span class="pre">None</span></tt>) if the field is a relation type (<a class="reference internal" href="fields.html#django.db.models.Field.is_relation" title="django.db.models.Field.is_relation"><tt class="xref py py-attr docutils literal"><span class="pre">Field.is_relation=True</span></tt></a>).</font></p>
<dl class="attribute">
<dt id="django.db.models.Field.many_to_many">
<tt class="descclassname">Field.</tt><tt class="descname">many_to_many</tt><a class="headerlink" href="fields.html#django.db.models.Field.many_to_many" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="554">Boolean flag that is <tt class="docutils literal"><span class="pre">True</span></tt> if the field has a many-to-many relation; </font><font id="555"><tt class="docutils literal"><span class="pre">False</span></tt> otherwise. </font><font id="556">The only field included with Django where this is <tt class="docutils literal"><span class="pre">True</span></tt> is <tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.many_to_one">
<tt class="descclassname">Field.</tt><tt class="descname">many_to_one</tt><a class="headerlink" href="fields.html#django.db.models.Field.many_to_one" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="557">Boolean flag that is <tt class="docutils literal"><span class="pre">True</span></tt> if the field has a many-to-one relation, such as a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>; </font><font id="558"><tt class="docutils literal"><span class="pre">False</span></tt> otherwise.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.one_to_many">
<tt class="descclassname">Field.</tt><tt class="descname">one_to_many</tt><a class="headerlink" href="fields.html#django.db.models.Field.one_to_many" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="559">Boolean flag that is <tt class="docutils literal"><span class="pre">True</span></tt> if the field has a one-to-many relation, such as a <tt class="docutils literal"><span class="pre">GenericRelation</span></tt> or the reverse of a <tt class="docutils literal"><span class="pre">ForeignKey</span></tt>; </font><font id="560"><tt class="docutils literal"><span class="pre">False</span></tt> otherwise.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.one_to_one">
<tt class="descclassname">Field.</tt><tt class="descname">one_to_one</tt><a class="headerlink" href="fields.html#django.db.models.Field.one_to_one" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="561">Boolean flag that is <tt class="docutils literal"><span class="pre">True</span></tt> if the field has a one-to-one relation, such as a <tt class="docutils literal"><span class="pre">OneToOneField</span></tt>; </font><font id="562"><tt class="docutils literal"><span class="pre">False</span></tt> otherwise.</font></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.related_model">
<tt class="descclassname">Field.</tt><tt class="descname">related_model</tt><a class="headerlink" href="fields.html#django.db.models.Field.related_model" title="Permalink to this definition">¶</a></dt>
<dd><p><font id="563">Points to the model the field relates to. </font><font id="564">For example, <tt class="docutils literal"><span class="pre">Author</span></tt> in <tt class="docutils literal"><span class="pre">ForeignKey(Author)</span></tt>. </font><font id="565">If a field has a generic relation (such as a <tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt> or a <tt class="docutils literal"><span class="pre">GenericRelation</span></tt>) then <tt class="docutils literal"><span class="pre">related_model</span></tt> will be <tt class="docutils literal"><span class="pre">None</span></tt>.</font></p>
</dd></dl>
</div>
</div>
</div>
</div>
</div>
<div class="yui-b" id="sidebar">
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<h3><font id="624">目录</font></h3>
<ul>
<li><a class="reference internal" href="fields.html#"><font id="661">模型字段参考</font></a><ul>
<li><a class="reference internal" href="fields.html#field-options"><font id="662">字段选项</font></a><ul>
<li><a class="reference internal" href="fields.html#null"><font id="663">null</font></a></li>
<li><a class="reference internal" href="fields.html#blank"><font id="664">blank</font></a></li>
<li><a class="reference internal" href="fields.html#choices"><font id="665">choices</font></a></li>
<li><a class="reference internal" href="fields.html#db-column"><font id="666">db_column</font></a></li>
<li><a class="reference internal" href="fields.html#db-index"><font id="667">db_index</font></a></li>
<li><a class="reference internal" href="fields.html#db-tablespace"><font id="668">db_tablespace</font></a></li>
<li><a class="reference internal" href="fields.html#default"><font id="669">default</font></a></li>
<li><a class="reference internal" href="fields.html#editable"><font id="670">editable</font></a></li>
<li><a class="reference internal" href="fields.html#error-messages"><font id="671">error_messages</font></a></li>
<li><a class="reference internal" href="fields.html#help-text"><font id="672">help_text</font></a></li>
<li><a class="reference internal" href="fields.html#primary-key"><font id="673">primary_key</font></a></li>
<li><a class="reference internal" href="fields.html#unique"><font id="674">unique</font></a></li>
<li><a class="reference internal" href="fields.html#unique-for-date"><font id="675">unique_for_date</font></a></li>
<li><a class="reference internal" href="fields.html#unique-for-month"><font id="676">unique_for_month</font></a></li>
<li><a class="reference internal" href="fields.html#unique-for-year"><font id="677">unique_for_year</font></a></li>
<li><a class="reference internal" href="fields.html#verbose-name"><font id="678">verbose_name</font></a></li>
<li><a class="reference internal" href="fields.html#validators"><font id="679">validators</font></a><ul>
<li><a class="reference internal" href="fields.html#registering-and-fetching-lookups"><font id="680">Registering and fetching lookups</font></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="fields.html#field-types"><font id="681">Field types</font></a><ul>
<li><a class="reference internal" href="fields.html#autofield"><font id="682">AutoField</font></a></li>
<li><a class="reference internal" href="fields.html#bigintegerfield"><font id="683">BigIntegerField</font></a></li>
<li><a class="reference internal" href="fields.html#binaryfield"><font id="684">BinaryField</font></a></li>
<li><a class="reference internal" href="fields.html#booleanfield"><font id="685">BooleanField</font></a></li>
<li><a class="reference internal" href="fields.html#charfield"><font id="686">CharField</font></a></li>
<li><a class="reference internal" href="fields.html#commaseparatedintegerfield"><font id="687">CommaSeparatedIntegerField</font></a></li>
<li><a class="reference internal" href="fields.html#datefield"><font id="688">DateField</font></a></li>
<li><a class="reference internal" href="fields.html#datetimefield"><font id="689">DateTimeField</font></a></li>
<li><a class="reference internal" href="fields.html#decimalfield"><font id="690">DecimalField</font></a></li>
<li><a class="reference internal" href="fields.html#durationfield"><font id="691">DurationField</font></a></li>
<li><a class="reference internal" href="fields.html#emailfield"><font id="692">EmailField</font></a></li>
<li><a class="reference internal" href="fields.html#filefield"><font id="693">FileField</font></a><ul>
<li><a class="reference internal" href="fields.html#filefield-and-fieldfile"><font id="694">FileField and FieldFile</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="fields.html#filepathfield"><font id="695">FilePathField</font></a></li>
<li><a class="reference internal" href="fields.html#floatfield"><font id="696">FloatField</font></a></li>
<li><a class="reference internal" href="fields.html#imagefield"><font id="697">ImageField</font></a></li>
<li><a class="reference internal" href="fields.html#integerfield"><font id="698">IntegerField</font></a></li>
<li><a class="reference internal" href="fields.html#ipaddressfield"><font id="699">IPAddressField</font></a></li>
<li><a class="reference internal" href="fields.html#genericipaddressfield"><font id="700">GenericIPAddressField</font></a></li>
<li><a class="reference internal" href="fields.html#nullbooleanfield"><font id="701">NullBooleanField</font></a></li>
<li><a class="reference internal" href="fields.html#positiveintegerfield"><font id="702">PositiveIntegerField</font></a></li>
<li><a class="reference internal" href="fields.html#positivesmallintegerfield"><font id="703">PositiveSmallIntegerField</font></a></li>
<li><a class="reference internal" href="fields.html#slugfield"><font id="704">SlugField</font></a></li>
<li><a class="reference internal" href="fields.html#smallintegerfield"><font id="705">SmallIntegerField</font></a></li>
<li><a class="reference internal" href="fields.html#textfield"><font id="706">TextField</font></a></li>
<li><a class="reference internal" href="fields.html#timefield"><font id="707">TimeField</font></a></li>
<li><a class="reference internal" href="fields.html#urlfield"><font id="708">URLField</font></a></li>
<li><a class="reference internal" href="fields.html#uuidfield"><font id="709">UUIDField</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="fields.html#module-django.db.models.fields.related"><font id="710">Relationship fields</font></a><ul>
<li><a class="reference internal" href="fields.html#foreignkey"><font id="711">ForeignKey</font></a><ul>
<li><a class="reference internal" href="fields.html#database-representation"><font id="712">Database Representation</font></a></li>
<li><a class="reference internal" href="fields.html#arguments"><font id="713">Arguments</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="fields.html#manytomanyfield"><font id="714">ManyToManyField</font></a><ul>
<li><a class="reference internal" href="fields.html#id1"><font id="715">Database Representation</font></a></li>
<li><a class="reference internal" href="fields.html#manytomany-arguments"><font id="716">Arguments</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="fields.html#onetoonefield"><font id="717">OneToOneField</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="fields.html#field-api-reference"><font id="718">Field API reference</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="fields.html#field-attribute-reference"><font id="719">Field attribute reference</font></a><ul>
<li><a class="reference internal" href="fields.html#attributes-for-fields"><font id="720">Attributes for fields</font></a></li>
<li><a class="reference internal" href="fields.html#attributes-for-fields-with-relations"><font id="721">Attributes for fields with relations</font></a></li>
</ul>
</li>
</ul>
<h3><font id="625">Browse</font></h3>
<ul>
<li><font id="722">Prev: <a href="index.html">Models</a></font></li>
<li><font id="723">Next: <a href="meta.html">Model <tt class="docutils literal"><span class="pre">_meta</span></tt> API</a></font></li>
</ul>
<h3><font id="626">You are here:</font></h3>
<ul>
<li>
<a href="../../index.html"><font id="724">Django 1.8.2 文档</font></a>
<ul><li><a href="../index.html"><font id="725">API Reference</font></a>
<ul><li><a href="index.html"><font id="726">Models</font></a>
<ul><li><font id="727">Model field reference</font></li></ul>
</li></ul></li></ul>
</li>
</ul>
<h3><font id="627">This Page</font></h3>
<ul class="this-page-menu">
<li><a href="http://python.usyiyi.cn/django/_sources/ref/models/fields.txt" rel="nofollow"><font id="728">Show Source</font></a></li>
</ul>
<div id="searchbox" style="display: none">
<h3><font id="628">Quick search</font></h3>
<form action="http://python.usyiyi.cn/django/search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
<p class="searchtip" style="font-size: 90%"><font id="566"> Enter search terms or a module, class or function name. </font></p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<h3><font id="629">Last update:</font></h3>
<p class="topless"><font id="567">May 13, 2015</font></p>
</div>
</div>
<div id="ft">
<div class="nav">
    « <a href="index.html" title="Models">previous</a>
     |
    <a accesskey="U" href="../index.html" title="API Reference">up</a>
   |
    <a href="meta.html" title='Model &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;_meta&lt;/span&gt;&lt;/tt&gt; API'>next</a> »</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div id="disqus_thread"></div><br>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'djangocn'; // required: replace example with your forum shortname
    var disqus_identifier = '/django/ref/models/fields';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<link href="http://python.usyiyi.cn/django/_static/ms_translator.css" rel="stylesheet" type="text/css"/>
<script src="http://python.usyiyi.cn/django/_static/ms_translator.js" type="text/javascript"></script>
<script src="http://python.usyiyi.cn/django/_static/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
<div id="MicrosoftTranslator" style="display:none; position: absolute; z-index: 2147483647; margin: 0px; border: 2px solid rgb(210, 210, 210); padding: 0px; color: rgb(0, 0, 0); background-color: rgb(230, 230, 230); font-family: Arial,Helvetica,Sans-Serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; direction: ltr; text-align: left; left: 274px; top: 2048.03px; min-width: 400px;">
    <div id="MSTCClose" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/tooltip_close.gif">
      </a>
    </div>
    
    <div id="MSTCPopDown" style="float: right;" style="display: none;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popdown.gif">
      </a>
    </div>
    <div id="MSTCPopUP" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popup.gif">
      </a>
    </div>
    
    <div id="MSTCTitle" style="margin: 4px 4px 8px; font-weight: bold;">原文
    </div>
    
    <div style="direction: ltr; text-align: left;">
      <span id="MSTCOrigion" style="display: inline-block; margin: 0px 4px 4px;"> </span>
    </div>
    
    <div id="MicrosoftTranslatorCommunity" class="MSTCltr">
      <div id="MSTCContent">
        <a id="MSTCExpandLink">
          <span id="MSTCImprove">改进翻译</span>
          <span id="MSTCSuggest">最小化</span>
          <img src="http://python.usyiyi.cn/django/_static/ctftoggledown.gif" id="MSTCToggleDown">
          <img src="http://python.usyiyi.cn/django/_static/ctftoggleup.gif" id="MSTCToggleUp">
        </a>
        <div id="MSTCRootPanel">
          <span id="MSTCLoading" style="display: none;">正在加载...</span>
          <div style="display: none;" id="MSTCTransPanelError">
            <div class="MSTCTableRow">
              <div class="MSTCTransPanelExc MSTCTableCell">
                <img style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_exclamation.gif" id="ExclamationImage">
              </div>
              <div class="MSTCTableCell">
                <span id="MSTCTransPanelErrorMsg"></span>
              </div>
            </div>
            <div class="MSTCTableRow">
              <div class="MSTCTableCell"></div>
              <div class="MSTCTableCell MSTCFlipHoriz">
                <input type="image" style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_OK.gif" class="MSTCErrorButtons" id="MSTCOKImgBtn" name="MSTCOKImgBtn">
              </div>
            </div>
          </div>
          
          <div id="MSTCTransPanel">
          </div>
          
          <div id="MSTCPrevNextPanel">
            <a id="MSTCPrevLink" style='border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>上一页</span>
            </a>
            <a style='color: black; border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>第</span>
              <span id="MSTCPage"></span>
              <span>页</span>
            </a>
            <a id="MSTCNextLink" style='padding-left: 5px;'>
              <span>下一页</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>