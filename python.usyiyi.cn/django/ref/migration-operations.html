<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Migration Operations — Django 1.8.2 中外文档</title>
<link href="../_static/default.css" rel="stylesheet" type="text/css"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.2.dev20150513143415',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="../_static/jquery.js" type="text/javascript"></script>
<script src="../_static/underscore.js" type="text/javascript"></script>
<script src="../_static/doctools.js" type="text/javascript"></script>
<link href="../index.html" rel="top" title="Django 1.8.2.dev20150513143415 documentation"/>
<link href="index.html" rel="up" title="API Reference"/>
<link href="models/index.html" rel="next" title="Models"/>
<link href="middleware.html" rel="prev" title="Middleware"/>
<script src="http://python.usyiyi.cn/django/templatebuiltins.js" type="text/javascript"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/ref/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='http://python.usyiyi.cn/django/ref/&quot;&#32;+&#32;base&#32;+&#32;&quot;#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>
</head>
<body>
<div class="document">
<div class="yui-t6" id="custom-doc">
<div id="hd">
<h1><font id="96">Django 1.8.2.dev20150513143415 documentation</font></h1>
<div id="global-nav">
<a href="../index.html" title="Home page">Home</a>  |
        <a href="../contents.html" title="Table of contents">Table of contents</a>  |
        <a href="../genindex.html" title="Global index">Index</a>  |
        <a href="../py-modindex.html" title="Module index">Modules</a>
</div>
<div class="nav">
    « <a href="middleware.html" title="Middleware">previous</a>
     |
    <a accesskey="U" href="index.html" title="API Reference">up</a>
   |
    <a href="models/index.html" title="Models">next</a> »</div>
</div>
<div id="bd">
<div id="yui-main">
<div class="yui-b">
<div class="yui-g" id="ref-migration-operations">
<div class="section" id="s-module-django.db.migrations.operations">
<span id="s-migration-operations"></span><span id="module-django.db.migrations.operations"></span><span id="migration-operations"></span><h1><font id="97">Migration Operations</font><a class="headerlink" href="migration-operations.html#module-django.db.migrations.operations" title="Permalink to this headline">¶</a></h1>
<p><font id="1">Migration files are composed of one or more <tt class="docutils literal"><span class="pre">Operation</span></tt>s, objects that declaratively record what the migration should do to your database.</font></p>
<p><font id="2">Django also uses these <tt class="docutils literal"><span class="pre">Operation</span></tt> objects to work out what your models looked like historically, and to calculate what changes you’ve made to your models since the last migration so it can automatically write your migrations; </font><font id="3">that’s why they’re declarative, as it means Django can easily load them all into memory and run through them without touching the database to work out what your project should look like.</font></p>
<p><font id="4">There are also more specialized <tt class="docutils literal"><span class="pre">Operation</span></tt> objects which are for things like <a class="reference internal" href="../topics/migrations.html#data-migrations"><em>data migrations</em></a> and for advanced manual database manipulation. </font><font id="5">You can also write your own <tt class="docutils literal"><span class="pre">Operation</span></tt> classes if you want to encapsulate a custom change you commonly make.</font></p>
<p><font id="6">If you need an empty migration file to write your own <tt class="docutils literal"><span class="pre">Operation</span></tt> objects into, just use <tt class="docutils literal"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">makemigrations</span> <span class="pre">--empty</span> <span class="pre">yourappname</span></tt>, but be aware that manually adding schema-altering operations can confuse the migration autodetector and make resulting runs of <a class="reference internal" href="django-admin.html#django-admin-makemigrations"><tt class="xref std std-djadmin docutils literal"><span class="pre">makemigrations</span></tt></a> output incorrect code.</font></p>
<p><font id="7">All of the core Django operations are available from the <tt class="docutils literal"><span class="pre">django.db.migrations.operations</span></tt> module.</font></p>
<p><font id="8">For introductory material, see the <a class="reference internal" href="../topics/migrations.html"><em>migrations topic guide</em></a>.</font></p>
<div class="section" id="s-schema-operations">
<span id="schema-operations"></span><h2><font id="98">Schema Operations</font><a class="headerlink" href="migration-operations.html#schema-operations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-createmodel">
<span id="createmodel"></span><h3><font id="101">CreateModel</font><a class="headerlink" href="migration-operations.html#createmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.CreateModel">
<em class="property">class </em><tt class="descname">CreateModel</tt>(<em>name</em>, <em>fields</em>, <em>options=None</em>, <em>bases=None</em>, <em>managers=None</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.CreateModel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="9">Creates a new model in the project history and a corresponding table in the database to match it.</font></p>
<p><font id="10"><tt class="docutils literal"><span class="pre">name</span></tt> is the model name, as would be written in the <tt class="docutils literal"><span class="pre">models.py</span></tt> file.</font></p>
<p><font id="11"><tt class="docutils literal"><span class="pre">fields</span></tt> is a list of 2-tuples of <tt class="docutils literal"><span class="pre">(field_name,</span> <span class="pre">field_instance)</span></tt>. </font><font id="12">The field instance should be an unbound field (so just <tt class="docutils literal"><span class="pre">models.</span></tt></font><font id="13">CharField(), rather than a field takes from another model).</font></p>
<p><font id="14"><tt class="docutils literal"><span class="pre">options</span></tt> is an optional dictionary of values from the model’s <tt class="docutils literal"><span class="pre">Meta</span></tt> class.</font></p>
<p><font id="15"><tt class="docutils literal"><span class="pre">bases</span></tt> is an optional list of other classes to have this model inherit from; it can contain both class objects as well as strings in the format <tt class="docutils literal"><span class="pre">"appname.ModelName"</span></tt> if you want to depend on another model (so you inherit from the historical version). </font><font id="157">If it’s not supplied, it defaults to just inheriting from the standard <tt class="docutils literal"><span class="pre">models.Model</span></tt>.</font></p>
<p><font id="16"><tt class="docutils literal"><span class="pre">managers</span></tt> takes a list of 2-tuples of <tt class="docutils literal"><span class="pre">(manager_name,</span> <span class="pre">manager_instance)</span></tt>. </font><font id="17">The first manager in the list will be the default manager for this model during migrations.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><font id="18">The <tt class="docutils literal"><span class="pre">managers</span></tt> argument was added.</font></p>
</div>
</div>
<div class="section" id="s-deletemodel">
<span id="deletemodel"></span><h3><font id="102">DeleteModel</font><a class="headerlink" href="migration-operations.html#deletemodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.DeleteModel">
<em class="property">class </em><tt class="descname">DeleteModel</tt>(<em>name</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.DeleteModel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="19">Deletes the model from the project history and its table from the database.</font></p>
</div>
<div class="section" id="s-renamemodel">
<span id="renamemodel"></span><h3><font id="103">RenameModel</font><a class="headerlink" href="migration-operations.html#renamemodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.RenameModel">
<em class="property">class </em><tt class="descname">RenameModel</tt>(<em>old_name</em>, <em>new_name</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.RenameModel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="20">Renames the model from an old name to a new one.</font></p>
<p><font id="21">You may have to manually add this if you change the model’s name and quite a few of its fields at once; </font><font id="22">to the autodetector, this will look like you deleted a model with the old name and added a new one with a different name, and the migration it creates will lose any data in the old table.</font></p>
</div>
<div class="section" id="s-altermodeltable">
<span id="altermodeltable"></span><h3><font id="104">AlterModelTable</font><a class="headerlink" href="migration-operations.html#altermodeltable" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.AlterModelTable">
<em class="property">class </em><tt class="descname">AlterModelTable</tt>(<em>name</em>, <em>table</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.AlterModelTable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="23">Changes the model’s table name (the <a class="reference internal" href="models/options.html#django.db.models.Options.db_table" title="django.db.models.Options.db_table"><tt class="xref py py-attr docutils literal"><span class="pre">db_table</span></tt></a> option on the <tt class="docutils literal"><span class="pre">Meta</span></tt> subclass).</font></p>
</div>
<div class="section" id="s-alteruniquetogether">
<span id="alteruniquetogether"></span><h3><font id="105">AlterUniqueTogether</font><a class="headerlink" href="migration-operations.html#alteruniquetogether" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.AlterUniqueTogether">
<em class="property">class </em><tt class="descname">AlterUniqueTogether</tt>(<em>name</em>, <em>unique_together</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.AlterUniqueTogether" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="24">Changes the model’s set of unique constraints (the <a class="reference internal" href="models/options.html#django.db.models.Options.unique_together" title="django.db.models.Options.unique_together"><tt class="xref py py-attr docutils literal"><span class="pre">unique_together</span></tt></a> option on the <tt class="docutils literal"><span class="pre">Meta</span></tt> subclass).</font></p>
</div>
<div class="section" id="s-alterindextogether">
<span id="alterindextogether"></span><h3><font id="106">AlterIndexTogether</font><a class="headerlink" href="migration-operations.html#alterindextogether" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.AlterIndexTogether">
<em class="property">class </em><tt class="descname">AlterIndexTogether</tt>(<em>name</em>, <em>index_together</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.AlterIndexTogether" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="25">Changes the model’s set of custom indexes (the <a class="reference internal" href="models/options.html#django.db.models.Options.index_together" title="django.db.models.Options.index_together"><tt class="xref py py-attr docutils literal"><span class="pre">index_together</span></tt></a> option on the <tt class="docutils literal"><span class="pre">Meta</span></tt> subclass).</font></p>
</div>
<div class="section" id="s-alterorderwithrespectto">
<span id="alterorderwithrespectto"></span><h3><font id="107">AlterOrderWithRespectTo</font><a class="headerlink" href="migration-operations.html#alterorderwithrespectto" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.AlterOrderWithRespectTo">
<em class="property">class </em><tt class="descname">AlterOrderWithRespectTo</tt>(<em>name</em>, <em>order_with_respect_to</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.AlterOrderWithRespectTo" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="26">Makes or deletes the <tt class="docutils literal"><span class="pre">_order</span></tt> column needed for the <a class="reference internal" href="models/options.html#django.db.models.Options.order_with_respect_to" title="django.db.models.Options.order_with_respect_to"><tt class="xref py py-attr docutils literal"><span class="pre">order_with_respect_to</span></tt></a> option on the <tt class="docutils literal"><span class="pre">Meta</span></tt> subclass.</font></p>
</div>
<div class="section" id="s-altermodeloptions">
<span id="altermodeloptions"></span><h3><font id="108">AlterModelOptions</font><a class="headerlink" href="migration-operations.html#altermodeloptions" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.AlterModelOptions">
<em class="property">class </em><tt class="descname">AlterModelOptions</tt>(<em>name</em>, <em>options</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.AlterModelOptions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="27">Stores changes to miscellaneous model options (settings on a model’s <tt class="docutils literal"><span class="pre">Meta</span></tt>) like <tt class="docutils literal"><span class="pre">permissions</span></tt> and <tt class="docutils literal"><span class="pre">verbose_name</span></tt>. </font><font id="28">Does not affect the database, but persists these changes for <a class="reference internal" href="migration-operations.html#django.db.migrations.operations.RunPython" title="django.db.migrations.operations.RunPython"><tt class="xref py py-class docutils literal"><span class="pre">RunPython</span></tt></a> instances to use. </font><font id="29"><tt class="docutils literal"><span class="pre">options</span></tt> should be a dictionary mapping option names to values.</font></p>
</div>
<div class="section" id="s-altermodelmanagers">
<span id="altermodelmanagers"></span><h3><font id="109">AlterModelManagers</font><a class="headerlink" href="migration-operations.html#altermodelmanagers" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<dl class="class">
<dt id="django.db.migrations.operations.AlterModelManagers">
<em class="property">class </em><tt class="descname">AlterModelManagers</tt>(<em>name</em>, <em>managers</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.AlterModelManagers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="30">Alters the managers that are available during migrations.</font></p>
</div>
<div class="section" id="s-addfield">
<span id="addfield"></span><h3><font id="110">AddField</font><a class="headerlink" href="migration-operations.html#addfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.AddField">
<em class="property">class </em><tt class="descname">AddField</tt>(<em>model_name</em>, <em>name</em>, <em>field</em>, <em>preserve_default=True</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.AddField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="31">Adds a field to a model. </font><font id="32"><tt class="docutils literal"><span class="pre">model_name</span></tt> is the model’s name, <tt class="docutils literal"><span class="pre">name</span></tt> is the field’s name, and <tt class="docutils literal"><span class="pre">field</span></tt> is an unbound Field instance (the thing you would put in the field declaration in <tt class="docutils literal"><span class="pre">models.py</span></tt> - for example, <tt class="docutils literal"><span class="pre">models.</span></tt></font><font id="33">IntegerField(null=True).</font></p>
<p><font id="34">The <tt class="docutils literal"><span class="pre">preserve_default</span></tt> argument indicates whether the field’s default value is permanent and should be baked into the project state (<tt class="docutils literal"><span class="pre">True</span></tt>), or if it is temporary and just for this migration (<tt class="docutils literal"><span class="pre">False</span></tt>) - usually because the migration is adding a non-nullable field to a table and needs a default value to put into existing rows. </font><font id="35">It does not effect the behavior of setting defaults in the database directly - Django never sets database defaults and always applies them in the Django ORM code.</font></p>
</div>
<div class="section" id="s-removefield">
<span id="removefield"></span><h3><font id="111">RemoveField</font><a class="headerlink" href="migration-operations.html#removefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.RemoveField">
<em class="property">class </em><tt class="descname">RemoveField</tt>(<em>model_name</em>, <em>name</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.RemoveField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="36">Removes a field from a model.</font></p>
<p><font id="37">Bear in mind that when reversed this is actually adding a field to a model; </font><font id="38">if the field is not nullable this may make this operation irreversible (apart from any data loss, which of course is irreversible).</font></p>
</div>
<div class="section" id="s-alterfield">
<span id="alterfield"></span><h3><font id="112">AlterField</font><a class="headerlink" href="migration-operations.html#alterfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.AlterField">
<em class="property">class </em><tt class="descname">AlterField</tt>(<em>model_name</em>, <em>name</em>, <em>field</em>, <em>preserve_default=True</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.AlterField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="39">Alters a field’s definition, including changes to its type, <a class="reference internal" href="models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a>, <a class="reference internal" href="models/fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique</span></tt></a>, <a class="reference internal" href="models/fields.html#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><tt class="xref py py-attr docutils literal"><span class="pre">db_column</span></tt></a> and other field attributes.</font></p>
<p><font id="40">The <tt class="docutils literal"><span class="pre">preserve_default</span></tt> argument indicates whether the field’s default value is permanent and should be baked into the project state (<tt class="docutils literal"><span class="pre">True</span></tt>), or if it is temporary and just for this migration (<tt class="docutils literal"><span class="pre">False</span></tt>) - usually because the migration is altering a nullable field to a non-nullable one and needs a default value to put into existing rows. </font><font id="41">It does not effect the behavior of setting defaults in the database directly - Django never sets database defaults and always applies them in the Django ORM code.</font></p>
<p><font id="42">Note that not all changes are possible on all databases - for example, you cannot change a text-type field like <tt class="docutils literal"><span class="pre">models.</span></tt></font><font id="43">TextField() into a number-type field like <tt class="docutils literal"><span class="pre">models.</span></tt></font><font id="44">IntegerField() on most databases.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7.1:</span> <p><font id="45">The <tt class="docutils literal"><span class="pre">preserve_default</span></tt> argument was added.</font></p>
</div>
</div>
<div class="section" id="s-renamefield">
<span id="renamefield"></span><h3><font id="113">RenameField</font><a class="headerlink" href="migration-operations.html#renamefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.RenameField">
<em class="property">class </em><tt class="descname">RenameField</tt>(<em>model_name</em>, <em>old_name</em>, <em>new_name</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.RenameField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="46">Changes a field’s name (and, unless <a class="reference internal" href="models/fields.html#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><tt class="xref py py-attr docutils literal"><span class="pre">db_column</span></tt></a> is set, its column name).</font></p>
</div>
</div>
<div class="section" id="s-special-operations">
<span id="special-operations"></span><h2><font id="99">Special Operations</font><a class="headerlink" href="migration-operations.html#special-operations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-runsql">
<span id="runsql"></span><h3><font id="114">RunSQL</font><a class="headerlink" href="migration-operations.html#runsql" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.RunSQL">
<em class="property">class </em><tt class="descname">RunSQL</tt>(<em>sql</em>, <em>reverse_sql=None</em>, <em>state_operations=None</em>, <em>hints=None</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.RunSQL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="47">Allows running of arbitrary SQL on the database - useful for more advanced features of database backends that Django doesn’t support directly, like partial indexes.</font></p>
<p><font id="48"><tt class="docutils literal"><span class="pre">sql</span></tt>, and <tt class="docutils literal"><span class="pre">reverse_sql</span></tt> if provided, should be strings of SQL to run on the database. </font><font id="49">On most database backends (all but PostgreSQL), Django will split the SQL into individual statements prior to executing them. </font><font id="50">This requires installing the <a class="reference external" href="https://pypi.python.org/pypi/sqlparse">sqlparse</a> Python library.</font></p>
<p><font id="51">You can also pass a list of strings or 2-tuples. </font><font id="52">The latter is used for passing queries and parameters in the same way as <a class="reference internal" href="../topics/db/sql.html#executing-custom-sql"><em>cursor.execute()</em></a>. </font><font id="53">These three operations are equivalent:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">migrations</span><span class="o">.</span><span class="n">RunSQL</span><span class="p">(</span><span class="s">"INSERT INTO musician (name) VALUES ('Reinhardt');"</span><span class="p">)</span>
<span class="n">migrations</span><span class="o">.</span><span class="n">RunSQL</span><span class="p">([</span><span class="s">"INSERT INTO musician (name) VALUES ('Reinhardt');"</span><span class="p">,</span> <span class="bp">None</span><span class="p">])</span>
<span class="n">migrations</span><span class="o">.</span><span class="n">RunSQL</span><span class="p">([</span><span class="s">"INSERT INTO musician (name) VALUES (</span><span class="si">%s</span><span class="s">);"</span><span class="p">,</span> <span class="p">[</span><span class="s">'Reinhardt'</span><span class="p">]])</span>
</pre></div>
</div>
<p><font id="54">If you want to include literal percent signs in the query, you have to double them if you are passing parameters.</font></p>
<p><font id="55">The <tt class="docutils literal"><span class="pre">state_operations</span></tt> argument is so you can supply operations that are equivalent to the SQL in terms of project state; </font><font id="56">for example, if you are manually creating a column, you should pass in a list containing an <tt class="docutils literal"><span class="pre">AddField</span></tt> operation here so that the autodetector still has an up-to-date state of the model (otherwise, when you next run <tt class="docutils literal"><span class="pre">makemigrations</span></tt>, it won’t see any operation that adds that field and so will try to run it again).</font></p>
<p><font id="57">The optional <tt class="docutils literal"><span class="pre">hints</span></tt> argument will be passed as <tt class="docutils literal"><span class="pre">**hints</span></tt> to the <a class="reference internal" href="../topics/db/multi-db.html#allow_migrate" title="allow_migrate"><tt class="xref py py-meth docutils literal"><span class="pre">allow_migrate()</span></tt></a> method of database routers to assist them in making routing decisions. </font><font id="58">See <a class="reference internal" href="../topics/db/multi-db.html#topics-db-multi-db-hints"><em>Hints</em></a> for more details on database hints.</font></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7.1:</span> <p><font id="59">If you want to include literal percent signs in a query without parameters you don’t need to double them anymore.</font></p>
</div>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><font id="60">The ability to pass parameters to the <tt class="docutils literal"><span class="pre">sql</span></tt> and <tt class="docutils literal"><span class="pre">reverse_sql</span></tt> queries was added.</font></p>
<p><font id="61">The <tt class="docutils literal"><span class="pre">hints</span></tt> argument was added.</font></p>
</div>
<dl class="attribute">
<dt id="django.db.migrations.operations.RunSQL.noop">
<tt class="descclassname">RunSQL.</tt><tt class="descname">noop</tt><a class="headerlink" href="migration-operations.html#django.db.migrations.operations.RunSQL.noop" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="62">Pass the <tt class="docutils literal"><span class="pre">RunSQL.noop</span></tt> attribute to <tt class="docutils literal"><span class="pre">sql</span></tt> or <tt class="docutils literal"><span class="pre">reverse_sql</span></tt> when you want the operation not to do anything in the given direction. </font><font id="63">This is especially useful in making the operation reversible.</font></p>
</dd></dl>
</div>
<div class="section" id="s-runpython">
<span id="runpython"></span><h3><font id="115">RunPython</font><a class="headerlink" href="migration-operations.html#runpython" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.RunPython">
<em class="property">class </em><tt class="descname">RunPython</tt>(<em>code</em>, <em>reverse_code=None</em>, <em>atomic=True</em>, <em>hints=None</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.RunPython" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="64">Runs custom Python code in a historical context. </font><font id="65"><tt class="docutils literal"><span class="pre">code</span></tt> </font><font id="66">(and <tt class="docutils literal"><span class="pre">reverse_code</span></tt> if supplied) should be callable objects that accept two arguments; </font><font id="67">the first is an instance of <tt class="docutils literal"><span class="pre">django.apps.registry.Apps</span></tt> containing historical models that match the operation’s place in the project history, and the second is an instance of <a class="reference internal" href="schema-editor.html#django.db.backends.base.schema.BaseDatabaseSchemaEditor" title="django.db.backends.base.schema.BaseDatabaseSchemaEditor"><tt class="xref py py-class docutils literal"><span class="pre">SchemaEditor</span></tt></a>.</font></p>
<p><font id="68">The optional <tt class="docutils literal"><span class="pre">hints</span></tt> argument will be passed as <tt class="docutils literal"><span class="pre">**hints</span></tt> to the <a class="reference internal" href="../topics/db/multi-db.html#allow_migrate" title="allow_migrate"><tt class="xref py py-meth docutils literal"><span class="pre">allow_migrate()</span></tt></a> method of database routers to assist them in making a routing decision. </font><font id="69">See <a class="reference internal" href="../topics/db/multi-db.html#topics-db-multi-db-hints"><em>Hints</em></a> for more details on database hints.</font></p>
<div class="versionadded">
<span class="title">New in Django 1.8:</span> <p><font id="70">The <tt class="docutils literal"><span class="pre">hints</span></tt> argument was added.</font></p>
</div>
<p><font id="71">You are advised to write the code as a separate function above the <tt class="docutils literal"><span class="pre">Migration</span></tt> class in the migration file, and just pass it to <tt class="docutils literal"><span class="pre">RunPython</span></tt>. </font><font id="72">Here’s an example of using <tt class="docutils literal"><span class="pre">RunPython</span></tt> to create some initial objects on a <tt class="docutils literal"><span class="pre">Country</span></tt> model:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">migrations</span>

<span class="k">def</span> <span class="nf">forwards_func</span><span class="p">(</span><span class="n">apps</span><span class="p">,</span> <span class="n">schema_editor</span><span class="p">):</span>
    <span class="c"># We get the model from the versioned app registry;</span>
    <span class="c"># if we directly import it, it'll be the wrong version</span>
    <span class="n">Country</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="s">"myapp"</span><span class="p">,</span> <span class="s">"Country"</span><span class="p">)</span>
    <span class="n">db_alias</span> <span class="o">=</span> <span class="n">schema_editor</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">alias</span>
    <span class="n">Country</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db_alias</span><span class="p">)</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">([</span>
        <span class="n">Country</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"USA"</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">"us"</span><span class="p">),</span>
        <span class="n">Country</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"France"</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s">"fr"</span><span class="p">),</span>
    <span class="p">])</span>

<span class="k">class</span> <span class="nc">Migration</span><span class="p">(</span><span class="n">migrations</span><span class="o">.</span><span class="n">Migration</span><span class="p">):</span>

    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">operations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">migrations</span><span class="o">.</span><span class="n">RunPython</span><span class="p">(</span>
            <span class="n">forwards_func</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>
</pre></div>
</div>
<p><font id="73">This is generally the operation you would use to create <a class="reference internal" href="../topics/migrations.html#data-migrations"><em>data migrations</em></a>, run custom data updates and alterations, and anything else you need access to an ORM and/or python code for.</font></p>
<p><font id="74">If you’re upgrading from South, this is basically the South pattern as an operation - one or two methods for forwards and backwards, with an ORM and schema operations available. </font><font id="158">Most of the time, you should be able to translate the <tt class="docutils literal"><span class="pre">orm.Model</span></tt> or <tt class="docutils literal"><span class="pre">orm["appname",</span> <span class="pre">"Model"]</span></tt> references from South directly into <tt class="docutils literal"><span class="pre">apps.get_model("appname",</span> <span class="pre">"Model")</span></tt> references here and leave most of the rest of the code unchanged for data migrations. </font><font id="159">However, <tt class="docutils literal"><span class="pre">apps</span></tt> will only have references to models in the current app unless migrations in other apps are added to the migration’s dependencies.</font></p>
<p><font id="75">Much like <a class="reference internal" href="migration-operations.html#django.db.migrations.operations.RunSQL" title="django.db.migrations.operations.RunSQL"><tt class="xref py py-class docutils literal"><span class="pre">RunSQL</span></tt></a>, ensure that if you change schema inside here you’re either doing it outside the scope of the Django model system (e.g. triggers) or that you use <a class="reference internal" href="migration-operations.html#django.db.migrations.operations.SeparateDatabaseAndState" title="django.db.migrations.operations.SeparateDatabaseAndState"><tt class="xref py py-class docutils literal"><span class="pre">SeparateDatabaseAndState</span></tt></a> to add in operations that will reflect your changes to the model state - otherwise, the versioned ORM and the autodetector will stop working correctly.</font></p>
<p><font id="76">By default, <tt class="docutils literal"><span class="pre">RunPython</span></tt> will run its contents inside a transaction even on databases that do not support DDL transactions (for example, MySQL and Oracle). </font><font id="77">This should be safe, but may cause a crash if you attempt to use the <tt class="docutils literal"><span class="pre">schema_editor</span></tt> provided on these backends; </font><font id="78">in this case, please set <tt class="docutils literal"><span class="pre">atomic=False</span></tt>.</font></p>
<div class="admonition warning">
<p class="first admonition-title"><font id="79">Warning</font></p>
<p class="last"><font id="80"><tt class="docutils literal"><span class="pre">RunPython</span></tt> does not magically alter the connection of the models for you; </font><font id="81">any model methods you call will go to the default database unless you give them the current database alias (available from <tt class="docutils literal"><span class="pre">schema_editor.connection.alias</span></tt>, where <tt class="docutils literal"><span class="pre">schema_editor</span></tt> is the second argument to your function).</font></p>
</div>
<dl class="staticmethod">
<dt id="django.db.migrations.operations.RunPython.noop">
<em class="property">static </em><tt class="descclassname">RunPython.</tt><tt class="descname">noop</tt>()<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.RunPython.noop" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><font id="82">Pass the <tt class="docutils literal"><span class="pre">RunPython.noop</span></tt> method to <tt class="docutils literal"><span class="pre">code</span></tt> or <tt class="docutils literal"><span class="pre">reverse_code</span></tt> when you want the operation not to do anything in the given direction. </font><font id="83">This is especially useful in making the operation reversible.</font></p>
</dd></dl>
</div>
<div class="section" id="s-separatedatabaseandstate">
<span id="separatedatabaseandstate"></span><h3><font id="116">SeparateDatabaseAndState</font><a class="headerlink" href="migration-operations.html#separatedatabaseandstate" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.migrations.operations.SeparateDatabaseAndState">
<em class="property">class </em><tt class="descname">SeparateDatabaseAndState</tt>(<em>database_operations=None</em>, <em>state_operations=None</em>)<a class="headerlink" href="migration-operations.html#django.db.migrations.operations.SeparateDatabaseAndState" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><font id="84">A highly specialized operation that let you mix and match the database (schema-changing) and state (autodetector-powering) aspects of operations.</font></p>
<p><font id="85">It accepts two list of operations, and when asked to apply state will use the state list, and when asked to apply changes to the database will use the database list. </font><font id="86">Do not use this operation unless you’re very sure you know what you’re doing.</font></p>
</div>
</div>
<div class="section" id="s-writing-your-own">
<span id="writing-your-own"></span><h2><font id="100">Writing your own</font><a class="headerlink" href="migration-operations.html#writing-your-own" title="Permalink to this headline">¶</a></h2>
<p><font id="87">Operations have a relatively simple API, and they’re designed so that you can easily write your own to supplement the built-in Django ones. </font><font id="88">The basic structure of an <tt class="docutils literal"><span class="pre">Operation</span></tt> looks like this:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db.migrations.operations.base</span> <span class="kn">import</span> <span class="n">Operation</span>

<span class="k">class</span> <span class="nc">MyCustomOperation</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>

    <span class="c"># If this is False, it means that this operation will be ignored by</span>
    <span class="c"># sqlmigrate; if true, it will be run and the SQL collected for its output.</span>
    <span class="n">reduces_to_sql</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="c"># If this is False, Django will refuse to reverse past this operation.</span>
    <span class="n">reversible</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
        <span class="c"># Operations are usually instantiated with arguments in migration</span>
        <span class="c"># files. Store the values of them on self for later use.</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">state_forwards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="c"># The Operation should take the 'state' parameter (an instance of</span>
        <span class="c"># django.db.migrations.state.ProjectState) and mutate it to match</span>
        <span class="c"># any schema changes that have occurred.</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">database_forwards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">schema_editor</span><span class="p">,</span> <span class="n">from_state</span><span class="p">,</span> <span class="n">to_state</span><span class="p">):</span>
        <span class="c"># The Operation should use schema_editor to apply any changes it</span>
        <span class="c"># wants to make to the database.</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">database_backwards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">schema_editor</span><span class="p">,</span> <span class="n">from_state</span><span class="p">,</span> <span class="n">to_state</span><span class="p">):</span>
        <span class="c"># If reversible is True, this is called when the operation is reversed.</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">describe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># This is used to describe what the operation does in console output.</span>
        <span class="k">return</span> <span class="s">"Custom Operation"</span>
</pre></div>
</div>
<p><font id="89">You can take this template and work from it, though we suggest looking at the built-in Django operations in <tt class="docutils literal"><span class="pre">django.db.migrations.operations</span></tt> - they’re easy to read and cover a lot of the example usage of semi-internal aspects of the migration framework like <tt class="docutils literal"><span class="pre">ProjectState</span></tt> and the patterns used to get historical models.</font></p>
<p><font id="90">Some things to note:</font></p>
<ul class="simple">
<li><font id="123">You don’t need to learn too much about <tt class="docutils literal"><span class="pre">ProjectState</span></tt> to just write simple migrations; </font><font id="124">just know that it has an <tt class="docutils literal"><span class="pre">apps</span></tt> property that gives access to an app registry (which you can then call <tt class="docutils literal"><span class="pre">get_model</span></tt> on).</font></li>
<li><font id="125"><tt class="docutils literal"><span class="pre">database_forwards</span></tt> and <tt class="docutils literal"><span class="pre">database_backwards</span></tt> both get two states passed to them; </font><font id="126">these just represent the difference the <tt class="docutils literal"><span class="pre">state_forwards</span></tt> method would have applied, but are given to you for convenience and speed reasons.</font></li>
<li><font id="127"><tt class="docutils literal"><span class="pre">to_state</span></tt> in the database_backwards method is the <em>older</em> state; </font><font id="128">that is, the one that will be the current state once the migration has finished reversing.</font></li>
<li><font id="129">You might see implementations of <tt class="docutils literal"><span class="pre">references_model</span></tt> on the built-in operations; </font><font id="130">this is part of the autodetection code and does not matter for custom operations.</font></li>
</ul>
<p><font id="91">As a simple example, let’s make an operation that loads PostgreSQL extensions (which contain some of PostgreSQL’s more exciting features). </font><font id="92">It’s simple enough; </font><font id="93">there’s no model state changes, and all it does is run one command:</font></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db.migrations.operations.base</span> <span class="kn">import</span> <span class="n">Operation</span>

<span class="k">class</span> <span class="nc">LoadExtension</span><span class="p">(</span><span class="n">Operation</span><span class="p">):</span>

    <span class="n">reversible</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">state_forwards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">database_forwards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">schema_editor</span><span class="p">,</span> <span class="n">from_state</span><span class="p">,</span> <span class="n">to_state</span><span class="p">):</span>
        <span class="n">schema_editor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"CREATE EXTENSION IF NOT EXISTS </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">database_backwards</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">schema_editor</span><span class="p">,</span> <span class="n">from_state</span><span class="p">,</span> <span class="n">to_state</span><span class="p">):</span>
        <span class="n">schema_editor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"DROP EXTENSION </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">describe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"Creates extension </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="yui-b" id="sidebar">
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<h3><font id="117">Table Of Contents</font></h3>
<ul>
<li><a class="reference internal" href="migration-operations.html#"><font id="131">Migration Operations</font></a><ul>
<li><a class="reference internal" href="migration-operations.html#schema-operations"><font id="132">Schema Operations</font></a><ul>
<li><a class="reference internal" href="migration-operations.html#createmodel"><font id="133">CreateModel</font></a></li>
<li><a class="reference internal" href="migration-operations.html#deletemodel"><font id="134">DeleteModel</font></a></li>
<li><a class="reference internal" href="migration-operations.html#renamemodel"><font id="135">RenameModel</font></a></li>
<li><a class="reference internal" href="migration-operations.html#altermodeltable"><font id="136">AlterModelTable</font></a></li>
<li><a class="reference internal" href="migration-operations.html#alteruniquetogether"><font id="137">AlterUniqueTogether</font></a></li>
<li><a class="reference internal" href="migration-operations.html#alterindextogether"><font id="138">AlterIndexTogether</font></a></li>
<li><a class="reference internal" href="migration-operations.html#alterorderwithrespectto"><font id="139">AlterOrderWithRespectTo</font></a></li>
<li><a class="reference internal" href="migration-operations.html#altermodeloptions"><font id="140">AlterModelOptions</font></a></li>
<li><a class="reference internal" href="migration-operations.html#altermodelmanagers"><font id="141">AlterModelManagers</font></a></li>
<li><a class="reference internal" href="migration-operations.html#addfield"><font id="142">AddField</font></a></li>
<li><a class="reference internal" href="migration-operations.html#removefield"><font id="143">RemoveField</font></a></li>
<li><a class="reference internal" href="migration-operations.html#alterfield"><font id="144">AlterField</font></a></li>
<li><a class="reference internal" href="migration-operations.html#renamefield"><font id="145">RenameField</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="migration-operations.html#special-operations"><font id="146">Special Operations</font></a><ul>
<li><a class="reference internal" href="migration-operations.html#runsql"><font id="147">RunSQL</font></a></li>
<li><a class="reference internal" href="migration-operations.html#runpython"><font id="148">RunPython</font></a></li>
<li><a class="reference internal" href="migration-operations.html#separatedatabaseandstate"><font id="149">SeparateDatabaseAndState</font></a></li>
</ul>
</li>
<li><a class="reference internal" href="migration-operations.html#writing-your-own"><font id="150">Writing your own</font></a></li>
</ul>
</li>
</ul>
<h3><font id="118">Browse</font></h3>
<ul>
<li><font id="151">Prev: <a href="middleware.html">Middleware</a></font></li>
<li><font id="152">Next: <a href="models/index.html">Models</a></font></li>
</ul>
<h3><font id="119">You are here:</font></h3>
<ul>
<li>
<a href="../index.html"><font id="153">Django 1.8.2.dev20150513143415 documentation</font></a>
<ul><li><a href="index.html"><font id="154">API Reference</font></a>
<ul><li><font id="155">Migration Operations</font></li></ul>
</li></ul>
</li>
</ul>
<h3><font id="120">This Page</font></h3>
<ul class="this-page-menu">
<li><a href="http://python.usyiyi.cn/django/_sources/ref/migration-operations.txt" rel="nofollow"><font id="156">Show Source</font></a></li>
</ul>
<div id="searchbox" style="display: none">
<h3><font id="121">Quick search</font></h3>
<form action="http://python.usyiyi.cn/django/search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
<p class="searchtip" style="font-size: 90%"><font id="94"> Enter search terms or a module, class or function name. </font></p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<h3><font id="122">Last update:</font></h3>
<p class="topless"><font id="95">May 13, 2015</font></p>
</div>
</div>
<div id="ft">
<div class="nav">
    « <a href="middleware.html" title="Middleware">previous</a>
     |
    <a accesskey="U" href="index.html" title="API Reference">up</a>
   |
    <a href="models/index.html" title="Models">next</a> »</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div id="disqus_thread"></div><br>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'djangocn'; // required: replace example with your forum shortname
    var disqus_identifier = '/django/ref/migration-operations';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a class="dsq-brlink" href="http://disqus.com">comments powered by <span class="logo-disqus">Disqus</span></a>
<link href="http://python.usyiyi.cn/django/_static/ms_translator.css" rel="stylesheet" type="text/css"/>
<script src="http://python.usyiyi.cn/django/_static/ms_translator.js" type="text/javascript"></script>
<script src="http://python.usyiyi.cn/django/_static/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
<div id="MicrosoftTranslator" style="display:none; position: absolute; z-index: 2147483647; margin: 0px; border: 2px solid rgb(210, 210, 210); padding: 0px; color: rgb(0, 0, 0); background-color: rgb(230, 230, 230); font-family: Arial,Helvetica,Sans-Serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; direction: ltr; text-align: left; left: 274px; top: 2048.03px; min-width: 400px;">
    <div id="MSTCClose" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/tooltip_close.gif">
      </a>
    </div>
    
    <div id="MSTCPopDown" style="float: right;" style="display: none;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popdown.gif">
      </a>
    </div>
    <div id="MSTCPopUP" style="float: right;">
      <a style="display: inline-block; cursor: pointer; text-decoration: none; vertical-align: top; border: 0px none; padding: 4px;">
        <img src="http://python.usyiyi.cn/django/_static/popup.gif">
      </a>
    </div>
    
    <div id="MSTCTitle" style="margin: 4px 4px 8px; font-weight: bold;">原文
    </div>
    
    <div style="direction: ltr; text-align: left;">
      <span id="MSTCOrigion" style="display: inline-block; margin: 0px 4px 4px;"> </span>
    </div>
    
    <div id="MicrosoftTranslatorCommunity" class="MSTCltr">
      <div id="MSTCContent">
        <a id="MSTCExpandLink">
          <span id="MSTCImprove">改进翻译</span>
          <span id="MSTCSuggest">最小化</span>
          <img src="http://python.usyiyi.cn/django/_static/ctftoggledown.gif" id="MSTCToggleDown">
          <img src="http://python.usyiyi.cn/django/_static/ctftoggleup.gif" id="MSTCToggleUp">
        </a>
        <div id="MSTCRootPanel">
          <span id="MSTCLoading" style="display: none;">正在加载...</span>
          <div style="display: none;" id="MSTCTransPanelError">
            <div class="MSTCTableRow">
              <div class="MSTCTransPanelExc MSTCTableCell">
                <img style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_exclamation.gif" id="ExclamationImage">
              </div>
              <div class="MSTCTableCell">
                <span id="MSTCTransPanelErrorMsg"></span>
              </div>
            </div>
            <div class="MSTCTableRow">
              <div class="MSTCTableCell"></div>
              <div class="MSTCTableCell MSTCFlipHoriz">
                <input type="image" style="border-width:0px;" src="http://python.usyiyi.cn/django/_static/error_OK.gif" class="MSTCErrorButtons" id="MSTCOKImgBtn" name="MSTCOKImgBtn">
              </div>
            </div>
          </div>
          
          <div id="MSTCTransPanel">
          </div>
          
          <div id="MSTCPrevNextPanel">
            <a id="MSTCPrevLink" style='border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>上一页</span>
            </a>
            <a style='color: black; border-right-width: 1px;border-right-style: solid;padding-right: 5px;'>
              <span>第</span>
              <span id="MSTCPage"></span>
              <span>页</span>
            </a>
            <a id="MSTCNextLink" style='padding-left: 5px;'>
              <span>下一页</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>